"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profiles/random/route";
exports.ids = ["app/api/profiles/random/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_vik_GTRanked_app_api_profiles_random_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/profiles/random/route.ts */ \"(rsc)/./app/api/profiles/random/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profiles/random/route\",\n        pathname: \"/api/profiles/random\",\n        filename: \"route\",\n        bundlePath: \"app/api/profiles/random/route\"\n    },\n    resolvedPagePath: \"/Users/vik/GTRanked/app/api/profiles/random/route.ts\",\n    nextConfigOutput,\n    userland: _Users_vik_GTRanked_app_api_profiles_random_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/profiles/random/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlcyUyRnJhbmRvbSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvZmlsZXMlMkZyYW5kb20lMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9maWxlcyUyRnJhbmRvbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpayUyRkdUUmFua2VkJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnZpayUyRkdUUmFua2VkJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNJO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvP2EwNGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Zpay9HVFJhbmtlZC9hcHAvYXBpL3Byb2ZpbGVzL3JhbmRvbS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZmlsZXMvcmFuZG9tXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9maWxlcy9yYW5kb20vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdmlrL0dUUmFua2VkL2FwcC9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm9maWxlcy9yYW5kb20vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/profiles/random/route.ts":
/*!******************************************!*\
  !*** ./app/api/profiles/random/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Import the JavaScript version of the profiles module\nconst { getRandomProfiles, getProfileById } = __webpack_require__(/*! @/lib/profiles-js */ \"(rsc)/./lib/profiles-js.js\");\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const excludeParam = searchParams.get(\"exclude\") || \"\";\n        // Convert exclude list to array of numbers\n        const excludeIds = excludeParam ? excludeParam.split(\",\").map((id)=>parseInt(id, 10)).filter((id)=>!isNaN(id)) : [];\n        console.log(`Fetching random profiles with excludeIds: ${JSON.stringify(excludeIds)}`);\n        // Get random profiles from Supabase\n        const basicProfiles = await getRandomProfiles(excludeIds);\n        // Check if profiles need enrichment and enrich them\n        const detailedProfiles = [];\n        for (const profile of basicProfiles){\n            try {\n                let enrichedProfile;\n                // Check if profile needs enrichment\n                if (profile.is_enriched !== true) {\n                    console.log(`Profile ${profile.id} (${profile.full_name}) needs enrichment`);\n                    // Call the enrichment endpoint\n                    const enrichResponse = await fetch(`${process.env.VERCEL_URL || \"http://localhost:3000\"}/api/profiles/enrich?aviato_id=${profile.aviato_id}`, {\n                        method: \"GET\"\n                    });\n                    if (!enrichResponse.ok) {\n                        console.error(`Error enriching profile ${profile.id}: ${enrichResponse.statusText}`);\n                        continue;\n                    }\n                    const enrichResult = await enrichResponse.json();\n                    enrichedProfile = enrichResult.profile;\n                    console.log(`Successfully enriched profile ${profile.id} ${enrichResult.enriched ? \"(newly enriched)\" : \"(already enriched)\"}`);\n                } else {\n                    // Profile is already enriched, just get the details\n                    enrichedProfile = await getProfileById(profile.id);\n                    console.log(`Using already enriched profile ${profile.id}`);\n                }\n                if (enrichedProfile) {\n                    detailedProfiles.push(enrichedProfile);\n                }\n            } catch (error) {\n                console.error(`Error processing profile ${profile.id}:`, error);\n            }\n        }\n        // Transform profiles to match frontend format\n        const transformedProfiles = detailedProfiles.map((profile)=>{\n            // Get experiences from both direct profile fields and experience table\n            const experiences = [];\n            // Add top experiences from direct profile fields if available\n            if (profile.exp1_title && profile.exp1_company) {\n                const startYear = profile.exp1_start_date ? new Date(profile.exp1_start_date).getFullYear() : \"\";\n                const endYear = profile.exp1_is_current ? \"Present\" : profile.exp1_end_date ? new Date(profile.exp1_end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                experiences.push({\n                    title: profile.exp1_title,\n                    company: profile.exp1_company,\n                    duration\n                });\n            }\n            if (profile.exp2_title && profile.exp2_company) {\n                const startYear = profile.exp2_start_date ? new Date(profile.exp2_start_date).getFullYear() : \"\";\n                const endYear = profile.exp2_is_current ? \"Present\" : profile.exp2_end_date ? new Date(profile.exp2_end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                experiences.push({\n                    title: profile.exp2_title,\n                    company: profile.exp2_company,\n                    duration\n                });\n            }\n            if (profile.exp3_title && profile.exp3_company) {\n                const startYear = profile.exp3_start_date ? new Date(profile.exp3_start_date).getFullYear() : \"\";\n                const endYear = profile.exp3_is_current ? \"Present\" : profile.exp3_end_date ? new Date(profile.exp3_end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                experiences.push({\n                    title: profile.exp3_title,\n                    company: profile.exp3_company,\n                    duration\n                });\n            }\n            // Format additional experiences from experience table\n            if (profile.experience && profile.experience.length > 0) {\n                // Start at index 0 if we don't have any direct experiences, otherwise add to the existing ones\n                const additionalExperiences = profile.experience.map((exp)=>{\n                    const startYear = exp.start_date ? new Date(exp.start_date).getFullYear() : \"\";\n                    const endYear = exp.is_current ? \"Present\" : exp.end_date ? new Date(exp.end_date).getFullYear() : \"\";\n                    const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                    return {\n                        title: exp.title || \"\",\n                        company: exp.company_name || \"\",\n                        duration\n                    };\n                });\n                // Add any experiences that aren't already included (avoid duplicates)\n                for (const exp of additionalExperiences){\n                    const isDuplicate = experiences.some((e)=>e.title === exp.title && e.company === exp.company);\n                    if (!isDuplicate) {\n                        experiences.push(exp);\n                    }\n                }\n            }\n            // Get skills from skills table\n            const skills = profile.skills ? profile.skills.map((skill)=>skill.name || \"\") : [];\n            // Get degree from education if available\n            const degree = profile.education && profile.education.length > 0 ? profile.education[0].degree || \"BS\" : \"BS\";\n            // Extract major from headline if it's not available in the profile\n            let major = profile.major || \"\";\n            // If major is empty, try to extract it from the headline\n            if (!major && profile.headline) {\n                // Look for common patterns like \"CS @ Georgia Tech\" or \"studying Computer Science at GT\"\n                const headline = profile.headline.toLowerCase();\n                if (headline.includes(\"cs @\") || headline.includes(\"cs at\")) {\n                    major = \"Computer Science\";\n                } else if (headline.includes(\"computer science\")) {\n                    major = \"Computer Science\";\n                } else if (headline.includes(\"electrical engineering\")) {\n                    major = \"Electrical Engineering\";\n                } else if (headline.includes(\"mechanical engineering\")) {\n                    major = \"Mechanical Engineering\";\n                } else if (headline.includes(\"business\")) {\n                    major = \"Business Administration\";\n                } else if (headline.includes(\"data science\")) {\n                    major = \"Data Science\";\n                }\n            }\n            // If still no major found, use part of the degree if it contains \"in\"\n            if (!major && degree && degree.includes(\" in \")) {\n                const parts = degree.split(\" in \");\n                if (parts.length > 1) {\n                    major = parts[1];\n                }\n            }\n            return {\n                id: profile.id.toString(),\n                name: profile.full_name || \"Unknown\",\n                title: profile.title || \"\",\n                company: profile.company || \"\",\n                major: major || \"Unknown Major\",\n                graduationYear: profile.graduation_year || 0,\n                isStudent: profile.is_student,\n                elo: profile.elo_rating,\n                location: profile.location || \"\",\n                avatar: `/avatars/${Math.floor(Math.random() * 10) + 1}.png`,\n                degree,\n                skills,\n                experiences,\n                linkedinUrl: profile.linkedin_url || null\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            profiles: transformedProfiles\n        });\n    } catch (error) {\n        console.error(\"Error fetching random profiles:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch random profiles\",\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            profiles: []\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QkFDTHhFLElBQUlVLFFBQVFWLEVBQUUsQ0FBQ3lFLFFBQVE7Z0JBQ3ZCUixNQUFNdkQsUUFBUUcsU0FBUyxJQUFJO2dCQUMzQjJCLE9BQU85QixRQUFROEIsS0FBSyxJQUFJO2dCQUN4QkMsU0FBUy9CLFFBQVErQixPQUFPLElBQUk7Z0JBQzVCMkIsT0FBT0EsU0FBUztnQkFDaEJNLGdCQUFnQmhFLFFBQVFpRSxlQUFlLElBQUk7Z0JBQzNDQyxXQUFXbEUsUUFBUW1FLFVBQVU7Z0JBQzdCQyxLQUFLcEUsUUFBUXFFLFVBQVU7Z0JBQ3ZCQyxVQUFVdEUsUUFBUXNFLFFBQVEsSUFBSTtnQkFDOUJDLFFBQVEsQ0FBQyxTQUFTLEVBQUVDLEtBQUtDLEtBQUssQ0FBQ0QsS0FBS0UsTUFBTSxLQUFLLE1BQU0sRUFBRSxJQUFJLENBQUM7Z0JBQzVEbEI7Z0JBQ0FIO2dCQUNBbEM7Z0JBQ0F3RCxhQUFhM0UsUUFBUTRFLFlBQVksSUFBSTtZQUN2QztRQUNGO1FBRUEsT0FBT3BHLHFEQUFZQSxDQUFDdUMsSUFBSSxDQUFDO1lBQUU4RCxVQUFVM0Q7UUFBb0I7SUFDM0QsRUFBRSxPQUFPTixPQUFPO1FBQ2RsQixRQUFRa0IsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBT3BDLHFEQUFZQSxDQUFDdUMsSUFBSSxDQUN0QjtZQUNFSCxPQUFPO1lBQ1BrRSxTQUFTbEUsaUJBQWlCbUUsUUFBUW5FLE1BQU1rRSxPQUFPLEdBQUc7WUFDbERELFVBQVUsRUFBRTtRQUNkLEdBQ0E7WUFBRUcsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2FwcC9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlLnRzP2Q5MmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG4vLyBJbXBvcnQgdGhlIEphdmFTY3JpcHQgdmVyc2lvbiBvZiB0aGUgcHJvZmlsZXMgbW9kdWxlXG5jb25zdCB7IGdldFJhbmRvbVByb2ZpbGVzLCBnZXRQcm9maWxlQnlJZCB9ID0gcmVxdWlyZShcIkAvbGliL3Byb2ZpbGVzLWpzXCIpO1xuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB0aGUgcHJvZmlsZSByZXR1cm5lZCBmcm9tIFN1cGFiYXNlXG5pbnRlcmZhY2UgU3VwYWJhc2VQcm9maWxlIHtcbiAgaWQ6IG51bWJlcjtcbiAgZnVsbF9uYW1lPzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgY29tcGFueT86IHN0cmluZztcbiAgbWFqb3I/OiBzdHJpbmc7XG4gIGdyYWR1YXRpb25feWVhcj86IG51bWJlcjtcbiAgaXNfc3R1ZGVudDogYm9vbGVhbjtcbiAgZWxvX3JhdGluZzogbnVtYmVyO1xuICBsb2NhdGlvbj86IHN0cmluZztcbiAgaXNfZW5yaWNoZWQ/OiBib29sZWFuO1xuICBhdmlhdG9faWQ/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IGFueTsgLy8gQWxsb3cgZm9yIG90aGVyIGZpZWxkc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgZXhjbHVkZVBhcmFtID0gc2VhcmNoUGFyYW1zLmdldChcImV4Y2x1ZGVcIikgfHwgXCJcIjtcblxuICAgIC8vIENvbnZlcnQgZXhjbHVkZSBsaXN0IHRvIGFycmF5IG9mIG51bWJlcnNcbiAgICBjb25zdCBleGNsdWRlSWRzID0gZXhjbHVkZVBhcmFtXG4gICAgICA/IGV4Y2x1ZGVQYXJhbVxuICAgICAgICAgIC5zcGxpdChcIixcIilcbiAgICAgICAgICAubWFwKChpZCkgPT4gcGFyc2VJbnQoaWQsIDEwKSlcbiAgICAgICAgICAuZmlsdGVyKChpZCkgPT4gIWlzTmFOKGlkKSlcbiAgICAgIDogW107XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBGZXRjaGluZyByYW5kb20gcHJvZmlsZXMgd2l0aCBleGNsdWRlSWRzOiAke0pTT04uc3RyaW5naWZ5KGV4Y2x1ZGVJZHMpfWBcbiAgICApO1xuXG4gICAgLy8gR2V0IHJhbmRvbSBwcm9maWxlcyBmcm9tIFN1cGFiYXNlXG4gICAgY29uc3QgYmFzaWNQcm9maWxlcyA9IChhd2FpdCBnZXRSYW5kb21Qcm9maWxlcyhcbiAgICAgIGV4Y2x1ZGVJZHNcbiAgICApKSBhcyBTdXBhYmFzZVByb2ZpbGVbXTtcblxuICAgIC8vIENoZWNrIGlmIHByb2ZpbGVzIG5lZWQgZW5yaWNobWVudCBhbmQgZW5yaWNoIHRoZW1cbiAgICBjb25zdCBkZXRhaWxlZFByb2ZpbGVzID0gW107XG4gICAgXG4gICAgZm9yIChjb25zdCBwcm9maWxlIG9mIGJhc2ljUHJvZmlsZXMpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGxldCBlbnJpY2hlZFByb2ZpbGU7XG4gICAgICAgIFxuICAgICAgICAvLyBDaGVjayBpZiBwcm9maWxlIG5lZWRzIGVucmljaG1lbnRcbiAgICAgICAgaWYgKHByb2ZpbGUuaXNfZW5yaWNoZWQgIT09IHRydWUpIHtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgUHJvZmlsZSAke3Byb2ZpbGUuaWR9ICgke3Byb2ZpbGUuZnVsbF9uYW1lfSkgbmVlZHMgZW5yaWNobWVudGApO1xuICAgICAgICAgIFxuICAgICAgICAgIC8vIENhbGwgdGhlIGVucmljaG1lbnQgZW5kcG9pbnRcbiAgICAgICAgICBjb25zdCBlbnJpY2hSZXNwb25zZSA9IGF3YWl0IGZldGNoKFxuICAgICAgICAgICAgYCR7cHJvY2Vzcy5lbnYuVkVSQ0VMX1VSTCB8fCAnaHR0cDovL2xvY2FsaG9zdDozMDAwJ30vYXBpL3Byb2ZpbGVzL2VucmljaD9hdmlhdG9faWQ9JHtwcm9maWxlLmF2aWF0b19pZH1gLFxuICAgICAgICAgICAgeyBtZXRob2Q6ICdHRVQnIH1cbiAgICAgICAgICApO1xuICAgICAgICAgIFxuICAgICAgICAgIGlmICghZW5yaWNoUmVzcG9uc2Uub2spIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEVycm9yIGVucmljaGluZyBwcm9maWxlICR7cHJvZmlsZS5pZH06ICR7ZW5yaWNoUmVzcG9uc2Uuc3RhdHVzVGV4dH1gKTtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cbiAgICAgICAgICBcbiAgICAgICAgICBjb25zdCBlbnJpY2hSZXN1bHQgPSBhd2FpdCBlbnJpY2hSZXNwb25zZS5qc29uKCk7XG4gICAgICAgICAgZW5yaWNoZWRQcm9maWxlID0gZW5yaWNoUmVzdWx0LnByb2ZpbGU7XG4gICAgICAgICAgXG4gICAgICAgICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBlbnJpY2hlZCBwcm9maWxlICR7cHJvZmlsZS5pZH0gJHtlbnJpY2hSZXN1bHQuZW5yaWNoZWQgPyAnKG5ld2x5IGVucmljaGVkKScgOiAnKGFscmVhZHkgZW5yaWNoZWQpJ31gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBQcm9maWxlIGlzIGFscmVhZHkgZW5yaWNoZWQsIGp1c3QgZ2V0IHRoZSBkZXRhaWxzXG4gICAgICAgICAgZW5yaWNoZWRQcm9maWxlID0gYXdhaXQgZ2V0UHJvZmlsZUJ5SWQocHJvZmlsZS5pZCk7XG4gICAgICAgICAgY29uc29sZS5sb2coYFVzaW5nIGFscmVhZHkgZW5yaWNoZWQgcHJvZmlsZSAke3Byb2ZpbGUuaWR9YCk7XG4gICAgICAgIH1cbiAgICAgICAgXG4gICAgICAgIGlmIChlbnJpY2hlZFByb2ZpbGUpIHtcbiAgICAgICAgICBkZXRhaWxlZFByb2ZpbGVzLnB1c2goZW5yaWNoZWRQcm9maWxlKTtcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgcHJvY2Vzc2luZyBwcm9maWxlICR7cHJvZmlsZS5pZH06YCwgZXJyb3IpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFRyYW5zZm9ybSBwcm9maWxlcyB0byBtYXRjaCBmcm9udGVuZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZFByb2ZpbGVzID0gZGV0YWlsZWRQcm9maWxlcy5tYXAoKHByb2ZpbGU6IGFueSkgPT4ge1xuICAgICAgLy8gR2V0IGV4cGVyaWVuY2VzIGZyb20gYm90aCBkaXJlY3QgcHJvZmlsZSBmaWVsZHMgYW5kIGV4cGVyaWVuY2UgdGFibGVcbiAgICAgIGNvbnN0IGV4cGVyaWVuY2VzID0gW107XG4gICAgICBcbiAgICAgIC8vIEFkZCB0b3AgZXhwZXJpZW5jZXMgZnJvbSBkaXJlY3QgcHJvZmlsZSBmaWVsZHMgaWYgYXZhaWxhYmxlXG4gICAgICBpZiAocHJvZmlsZS5leHAxX3RpdGxlICYmIHByb2ZpbGUuZXhwMV9jb21wYW55KSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IHByb2ZpbGUuZXhwMV9zdGFydF9kYXRlXG4gICAgICAgICAgPyBuZXcgRGF0ZShwcm9maWxlLmV4cDFfc3RhcnRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgZW5kWWVhciA9IHByb2ZpbGUuZXhwMV9pc19jdXJyZW50XG4gICAgICAgICAgPyBcIlByZXNlbnRcIlxuICAgICAgICAgIDogcHJvZmlsZS5leHAxX2VuZF9kYXRlXG4gICAgICAgICAgPyBuZXcgRGF0ZShwcm9maWxlLmV4cDFfZW5kX2RhdGUpLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID1cbiAgICAgICAgICBzdGFydFllYXIgJiYgZW5kWWVhciA/IGAke3N0YXJ0WWVhcn0gLSAke2VuZFllYXJ9YCA6IFwiXCI7XG4gICAgICAgICAgXG4gICAgICAgIGV4cGVyaWVuY2VzLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBwcm9maWxlLmV4cDFfdGl0bGUsXG4gICAgICAgICAgY29tcGFueTogcHJvZmlsZS5leHAxX2NvbXBhbnksXG4gICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocHJvZmlsZS5leHAyX3RpdGxlICYmIHByb2ZpbGUuZXhwMl9jb21wYW55KSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IHByb2ZpbGUuZXhwMl9zdGFydF9kYXRlXG4gICAgICAgICAgPyBuZXcgRGF0ZShwcm9maWxlLmV4cDJfc3RhcnRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgZW5kWWVhciA9IHByb2ZpbGUuZXhwMl9pc19jdXJyZW50XG4gICAgICAgICAgPyBcIlByZXNlbnRcIlxuICAgICAgICAgIDogcHJvZmlsZS5leHAyX2VuZF9kYXRlXG4gICAgICAgICAgPyBuZXcgRGF0ZShwcm9maWxlLmV4cDJfZW5kX2RhdGUpLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID1cbiAgICAgICAgICBzdGFydFllYXIgJiYgZW5kWWVhciA/IGAke3N0YXJ0WWVhcn0gLSAke2VuZFllYXJ9YCA6IFwiXCI7XG4gICAgICAgICAgXG4gICAgICAgIGV4cGVyaWVuY2VzLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBwcm9maWxlLmV4cDJfdGl0bGUsXG4gICAgICAgICAgY29tcGFueTogcHJvZmlsZS5leHAyX2NvbXBhbnksXG4gICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgICAgXG4gICAgICBpZiAocHJvZmlsZS5leHAzX3RpdGxlICYmIHByb2ZpbGUuZXhwM19jb21wYW55KSB7XG4gICAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IHByb2ZpbGUuZXhwM19zdGFydF9kYXRlXG4gICAgICAgICAgPyBuZXcgRGF0ZShwcm9maWxlLmV4cDNfc3RhcnRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgZW5kWWVhciA9IHByb2ZpbGUuZXhwM19pc19jdXJyZW50XG4gICAgICAgICAgPyBcIlByZXNlbnRcIlxuICAgICAgICAgIDogcHJvZmlsZS5leHAzX2VuZF9kYXRlXG4gICAgICAgICAgPyBuZXcgRGF0ZShwcm9maWxlLmV4cDNfZW5kX2RhdGUpLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICA6IFwiXCI7XG4gICAgICAgIGNvbnN0IGR1cmF0aW9uID1cbiAgICAgICAgICBzdGFydFllYXIgJiYgZW5kWWVhciA/IGAke3N0YXJ0WWVhcn0gLSAke2VuZFllYXJ9YCA6IFwiXCI7XG4gICAgICAgICAgXG4gICAgICAgIGV4cGVyaWVuY2VzLnB1c2goe1xuICAgICAgICAgIHRpdGxlOiBwcm9maWxlLmV4cDNfdGl0bGUsXG4gICAgICAgICAgY29tcGFueTogcHJvZmlsZS5leHAzX2NvbXBhbnksXG4gICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgIH0pO1xuICAgICAgfVxuXG4gICAgICAvLyBGb3JtYXQgYWRkaXRpb25hbCBleHBlcmllbmNlcyBmcm9tIGV4cGVyaWVuY2UgdGFibGVcbiAgICAgIGlmIChwcm9maWxlLmV4cGVyaWVuY2UgJiYgcHJvZmlsZS5leHBlcmllbmNlLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU3RhcnQgYXQgaW5kZXggMCBpZiB3ZSBkb24ndCBoYXZlIGFueSBkaXJlY3QgZXhwZXJpZW5jZXMsIG90aGVyd2lzZSBhZGQgdG8gdGhlIGV4aXN0aW5nIG9uZXNcbiAgICAgICAgY29uc3QgYWRkaXRpb25hbEV4cGVyaWVuY2VzID0gcHJvZmlsZS5leHBlcmllbmNlXG4gICAgICAgICAgLm1hcCgoZXhwOiBhbnkpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0WWVhciA9IGV4cC5zdGFydF9kYXRlXG4gICAgICAgICAgICAgID8gbmV3IERhdGUoZXhwLnN0YXJ0X2RhdGUpLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgY29uc3QgZW5kWWVhciA9IGV4cC5pc19jdXJyZW50XG4gICAgICAgICAgICAgID8gXCJQcmVzZW50XCJcbiAgICAgICAgICAgICAgOiBleHAuZW5kX2RhdGVcbiAgICAgICAgICAgICAgPyBuZXcgRGF0ZShleHAuZW5kX2RhdGUpLmdldEZ1bGxZZWFyKClcbiAgICAgICAgICAgICAgOiBcIlwiO1xuICAgICAgICAgICAgY29uc3QgZHVyYXRpb24gPVxuICAgICAgICAgICAgICBzdGFydFllYXIgJiYgZW5kWWVhciA/IGAke3N0YXJ0WWVhcn0gLSAke2VuZFllYXJ9YCA6IFwiXCI7XG5cbiAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgIHRpdGxlOiBleHAudGl0bGUgfHwgXCJcIixcbiAgICAgICAgICAgICAgY29tcGFueTogZXhwLmNvbXBhbnlfbmFtZSB8fCBcIlwiLFxuICAgICAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgXG4gICAgICAgIC8vIEFkZCBhbnkgZXhwZXJpZW5jZXMgdGhhdCBhcmVuJ3QgYWxyZWFkeSBpbmNsdWRlZCAoYXZvaWQgZHVwbGljYXRlcylcbiAgICAgICAgZm9yIChjb25zdCBleHAgb2YgYWRkaXRpb25hbEV4cGVyaWVuY2VzKSB7XG4gICAgICAgICAgY29uc3QgaXNEdXBsaWNhdGUgPSBleHBlcmllbmNlcy5zb21lKFxuICAgICAgICAgICAgZSA9PiBlLnRpdGxlID09PSBleHAudGl0bGUgJiYgZS5jb21wYW55ID09PSBleHAuY29tcGFueVxuICAgICAgICAgICk7XG4gICAgICAgICAgaWYgKCFpc0R1cGxpY2F0ZSkge1xuICAgICAgICAgICAgZXhwZXJpZW5jZXMucHVzaChleHApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICAvLyBHZXQgc2tpbGxzIGZyb20gc2tpbGxzIHRhYmxlXG4gICAgICBjb25zdCBza2lsbHMgPSBwcm9maWxlLnNraWxscyBcbiAgICAgICAgPyBwcm9maWxlLnNraWxscy5tYXAoKHNraWxsOiBhbnkpID0+IHNraWxsLm5hbWUgfHwgXCJcIilcbiAgICAgICAgOiBbXTtcblxuICAgICAgLy8gR2V0IGRlZ3JlZSBmcm9tIGVkdWNhdGlvbiBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGRlZ3JlZSA9XG4gICAgICAgIHByb2ZpbGUuZWR1Y2F0aW9uICYmIHByb2ZpbGUuZWR1Y2F0aW9uLmxlbmd0aCA+IDBcbiAgICAgICAgICA/IHByb2ZpbGUuZWR1Y2F0aW9uWzBdLmRlZ3JlZSB8fCBcIkJTXCJcbiAgICAgICAgICA6IFwiQlNcIjtcbiAgICAgICAgICBcbiAgICAgIC8vIEV4dHJhY3QgbWFqb3IgZnJvbSBoZWFkbGluZSBpZiBpdCdzIG5vdCBhdmFpbGFibGUgaW4gdGhlIHByb2ZpbGVcbiAgICAgIGxldCBtYWpvciA9IHByb2ZpbGUubWFqb3IgfHwgXCJcIjtcbiAgICAgIFxuICAgICAgLy8gSWYgbWFqb3IgaXMgZW1wdHksIHRyeSB0byBleHRyYWN0IGl0IGZyb20gdGhlIGhlYWRsaW5lXG4gICAgICBpZiAoIW1ham9yICYmIHByb2ZpbGUuaGVhZGxpbmUpIHtcbiAgICAgICAgLy8gTG9vayBmb3IgY29tbW9uIHBhdHRlcm5zIGxpa2UgXCJDUyBAIEdlb3JnaWEgVGVjaFwiIG9yIFwic3R1ZHlpbmcgQ29tcHV0ZXIgU2NpZW5jZSBhdCBHVFwiXG4gICAgICAgIGNvbnN0IGhlYWRsaW5lID0gcHJvZmlsZS5oZWFkbGluZS50b0xvd2VyQ2FzZSgpO1xuICAgICAgICBpZiAoaGVhZGxpbmUuaW5jbHVkZXMoXCJjcyBAXCIpIHx8IGhlYWRsaW5lLmluY2x1ZGVzKFwiY3MgYXRcIikpIHtcbiAgICAgICAgICBtYWpvciA9IFwiQ29tcHV0ZXIgU2NpZW5jZVwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhlYWRsaW5lLmluY2x1ZGVzKFwiY29tcHV0ZXIgc2NpZW5jZVwiKSkge1xuICAgICAgICAgIG1ham9yID0gXCJDb21wdXRlciBTY2llbmNlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaGVhZGxpbmUuaW5jbHVkZXMoXCJlbGVjdHJpY2FsIGVuZ2luZWVyaW5nXCIpKSB7XG4gICAgICAgICAgbWFqb3IgPSBcIkVsZWN0cmljYWwgRW5naW5lZXJpbmdcIjtcbiAgICAgICAgfSBlbHNlIGlmIChoZWFkbGluZS5pbmNsdWRlcyhcIm1lY2hhbmljYWwgZW5naW5lZXJpbmdcIikpIHtcbiAgICAgICAgICBtYWpvciA9IFwiTWVjaGFuaWNhbCBFbmdpbmVlcmluZ1wiO1xuICAgICAgICB9IGVsc2UgaWYgKGhlYWRsaW5lLmluY2x1ZGVzKFwiYnVzaW5lc3NcIikpIHtcbiAgICAgICAgICBtYWpvciA9IFwiQnVzaW5lc3MgQWRtaW5pc3RyYXRpb25cIjtcbiAgICAgICAgfSBlbHNlIGlmIChoZWFkbGluZS5pbmNsdWRlcyhcImRhdGEgc2NpZW5jZVwiKSkge1xuICAgICAgICAgIG1ham9yID0gXCJEYXRhIFNjaWVuY2VcIjtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBJZiBzdGlsbCBubyBtYWpvciBmb3VuZCwgdXNlIHBhcnQgb2YgdGhlIGRlZ3JlZSBpZiBpdCBjb250YWlucyBcImluXCJcbiAgICAgIGlmICghbWFqb3IgJiYgZGVncmVlICYmIGRlZ3JlZS5pbmNsdWRlcyhcIiBpbiBcIikpIHtcbiAgICAgICAgY29uc3QgcGFydHMgPSBkZWdyZWUuc3BsaXQoXCIgaW4gXCIpO1xuICAgICAgICBpZiAocGFydHMubGVuZ3RoID4gMSkge1xuICAgICAgICAgIG1ham9yID0gcGFydHNbMV07XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHtcbiAgICAgICAgaWQ6IHByb2ZpbGUuaWQudG9TdHJpbmcoKSxcbiAgICAgICAgbmFtZTogcHJvZmlsZS5mdWxsX25hbWUgfHwgXCJVbmtub3duXCIsXG4gICAgICAgIHRpdGxlOiBwcm9maWxlLnRpdGxlIHx8IFwiXCIsXG4gICAgICAgIGNvbXBhbnk6IHByb2ZpbGUuY29tcGFueSB8fCBcIlwiLFxuICAgICAgICBtYWpvcjogbWFqb3IgfHwgXCJVbmtub3duIE1ham9yXCIsXG4gICAgICAgIGdyYWR1YXRpb25ZZWFyOiBwcm9maWxlLmdyYWR1YXRpb25feWVhciB8fCAwLFxuICAgICAgICBpc1N0dWRlbnQ6IHByb2ZpbGUuaXNfc3R1ZGVudCxcbiAgICAgICAgZWxvOiBwcm9maWxlLmVsb19yYXRpbmcsXG4gICAgICAgIGxvY2F0aW9uOiBwcm9maWxlLmxvY2F0aW9uIHx8IFwiXCIsXG4gICAgICAgIGF2YXRhcjogYC9hdmF0YXJzLyR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMX0ucG5nYCxcbiAgICAgICAgZGVncmVlLFxuICAgICAgICBza2lsbHMsIC8vIE5vdyB1c2luZyBza2lsbHMgZnJvbSB0aGUgZGF0YWJhc2VcbiAgICAgICAgZXhwZXJpZW5jZXMsIC8vIFVzaW5nIHRoZSBmb3JtYXR0ZWQgZXhwZXJpZW5jZXMgZnJvbSBib3RoIHNvdXJjZXNcbiAgICAgICAgbGlua2VkaW5Vcmw6IHByb2ZpbGUubGlua2VkaW5fdXJsIHx8IG51bGwsIC8vIEluY2x1ZGUgTGlua2VkSW4gVVJMIGlmIGF2YWlsYWJsZVxuICAgICAgfTtcbiAgICB9KTtcblxuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IHByb2ZpbGVzOiB0cmFuc2Zvcm1lZFByb2ZpbGVzIH0pO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByYW5kb20gcHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXG4gICAgICB7XG4gICAgICAgIGVycm9yOiBcIkZhaWxlZCB0byBmZXRjaCByYW5kb20gcHJvZmlsZXNcIixcbiAgICAgICAgbWVzc2FnZTogZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiBcIlVua25vd24gZXJyb3JcIixcbiAgICAgICAgcHJvZmlsZXM6IFtdLFxuICAgICAgfSxcbiAgICAgIHsgc3RhdHVzOiA1MDAgfVxuICAgICk7XG4gIH1cbn1cbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJnZXRSYW5kb21Qcm9maWxlcyIsImdldFByb2ZpbGVCeUlkIiwicmVxdWlyZSIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJleGNsdWRlUGFyYW0iLCJnZXQiLCJleGNsdWRlSWRzIiwic3BsaXQiLCJtYXAiLCJpZCIsInBhcnNlSW50IiwiZmlsdGVyIiwiaXNOYU4iLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInN0cmluZ2lmeSIsImJhc2ljUHJvZmlsZXMiLCJkZXRhaWxlZFByb2ZpbGVzIiwicHJvZmlsZSIsImVucmljaGVkUHJvZmlsZSIsImlzX2VucmljaGVkIiwiZnVsbF9uYW1lIiwiZW5yaWNoUmVzcG9uc2UiLCJmZXRjaCIsInByb2Nlc3MiLCJlbnYiLCJWRVJDRUxfVVJMIiwiYXZpYXRvX2lkIiwibWV0aG9kIiwib2siLCJlcnJvciIsInN0YXR1c1RleHQiLCJlbnJpY2hSZXN1bHQiLCJqc29uIiwiZW5yaWNoZWQiLCJwdXNoIiwidHJhbnNmb3JtZWRQcm9maWxlcyIsImV4cGVyaWVuY2VzIiwiZXhwMV90aXRsZSIsImV4cDFfY29tcGFueSIsInN0YXJ0WWVhciIsImV4cDFfc3RhcnRfZGF0ZSIsIkRhdGUiLCJnZXRGdWxsWWVhciIsImVuZFllYXIiLCJleHAxX2lzX2N1cnJlbnQiLCJleHAxX2VuZF9kYXRlIiwiZHVyYXRpb24iLCJ0aXRsZSIsImNvbXBhbnkiLCJleHAyX3RpdGxlIiwiZXhwMl9jb21wYW55IiwiZXhwMl9zdGFydF9kYXRlIiwiZXhwMl9pc19jdXJyZW50IiwiZXhwMl9lbmRfZGF0ZSIsImV4cDNfdGl0bGUiLCJleHAzX2NvbXBhbnkiLCJleHAzX3N0YXJ0X2RhdGUiLCJleHAzX2lzX2N1cnJlbnQiLCJleHAzX2VuZF9kYXRlIiwiZXhwZXJpZW5jZSIsImxlbmd0aCIsImFkZGl0aW9uYWxFeHBlcmllbmNlcyIsImV4cCIsInN0YXJ0X2RhdGUiLCJpc19jdXJyZW50IiwiZW5kX2RhdGUiLCJjb21wYW55X25hbWUiLCJpc0R1cGxpY2F0ZSIsInNvbWUiLCJlIiwic2tpbGxzIiwic2tpbGwiLCJuYW1lIiwiZGVncmVlIiwiZWR1Y2F0aW9uIiwibWFqb3IiLCJoZWFkbGluZSIsInRvTG93ZXJDYXNlIiwiaW5jbHVkZXMiLCJwYXJ0cyIsInRvU3RyaW5nIiwiZ3JhZHVhdGlvblllYXIiLCJncmFkdWF0aW9uX3llYXIiLCJpc1N0dWRlbnQiLCJpc19zdHVkZW50IiwiZWxvIiwiZWxvX3JhdGluZyIsImxvY2F0aW9uIiwiYXZhdGFyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwibGlua2VkaW5VcmwiLCJsaW5rZWRpbl91cmwiLCJwcm9maWxlcyIsIm1lc3NhZ2UiLCJFcnJvciIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/profiles/random/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/profiles-js.js":
/*!****************************!*\
  !*** ./lib/profiles-js.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Import supabase client\n\nconst { supabase } = __webpack_require__(/*! ./supabase.js */ \"(rsc)/./lib/supabase.js\");\n/**\n * Get profiles with pagination, filtering and sorting\n */ async function getProfiles({ page = 1, limit = 10, query = \"\", filter = \"all\", sort = \"elo\" }) {\n    try {\n        // Calculate offset\n        const offset = (page - 1) * limit;\n        // Start building query\n        let profileQuery = supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\"\n        });\n        // Add search filter if query is provided\n        if (query) {\n            profileQuery = profileQuery.or(`full_name.ilike.%${query}%,title.ilike.%${query}%,company.ilike.%${query}%,major.ilike.%${query}%`);\n        }\n        // Add category filter\n        if (filter !== \"all\") {\n            if (filter === \"students\") {\n                profileQuery = profileQuery.eq(\"is_student\", true);\n            } else if (filter === \"alumni\") {\n                profileQuery = profileQuery.eq(\"is_student\", false);\n            } else {\n                // Assume filter is a major\n                profileQuery = profileQuery.ilike(\"major\", `%${filter}%`);\n            }\n        }\n        // Add sorting\n        if (sort === \"elo\") {\n            profileQuery = profileQuery.order(\"elo_rating\", {\n                ascending: false\n            });\n        } else if (sort === \"name\") {\n            profileQuery = profileQuery.order(\"full_name\");\n        } else if (sort === \"graduation\") {\n            profileQuery = profileQuery.order(\"graduation_year\");\n        }\n        // Add pagination\n        profileQuery = profileQuery.range(offset, offset + limit - 1);\n        // Execute query\n        const { data: profiles, error, count } = await profileQuery;\n        if (error) throw error;\n        // Get education and work experience for each profile\n        const profilesWithDetails = [];\n        for (const profile of profiles || []){\n            const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", profile.id);\n            const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", profile.id).order(\"is_current\", {\n                ascending: false\n            }).order(\"end_date\", {\n                ascending: false\n            });\n            profilesWithDetails.push({\n                ...profile,\n                education: education || [],\n                experience: experience || []\n            });\n        }\n        return {\n            profiles: profilesWithDetails,\n            total: count || 0,\n            totalPages: Math.ceil((count || 0) / limit)\n        };\n    } catch (error) {\n        console.error(\"Error fetching profiles:\", error);\n        throw error;\n    }\n}\n/**\n * Get a single profile by ID with education and work experience\n */ async function getProfileById(id) {\n    try {\n        const { data: profile, error } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", id).single();\n        if (error) throw error;\n        if (!profile) return null;\n        const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", id);\n        const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", id).order(\"is_current\", {\n            ascending: false\n        }).order(\"end_date\", {\n            ascending: false\n        });\n        // Get skills for this profile\n        const { data: skills } = await supabase.from(\"skills\").select(\"*\").eq(\"profile_id\", id);\n        return {\n            ...profile,\n            education: education || [],\n            experience: experience || [],\n            skills: skills || []\n        };\n    } catch (error) {\n        console.error(`Error fetching profile with ID ${id}:`, error);\n        return null;\n    }\n}\n/**\n * Get two random profiles, excluding specified IDs\n */ async function getRandomProfiles(excludeIds = []) {\n    // Ensure excludeIds is an array of numbers\n    const safeExcludeIds = Array.isArray(excludeIds) ? excludeIds.filter((id)=>typeof id === \"number\" && !isNaN(id)) : [];\n    console.log(`DIAGNOSTICS - getRandomProfiles called with excludeIds:`, safeExcludeIds);\n    try {\n        // Check if we have any profiles at all first\n        const { count: profileCount, error: countError } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (countError) {\n            console.error(\"Error counting profiles:\", countError);\n            throw new Error(`Could not count profiles: ${countError.message}`);\n        }\n        console.log(`DIAGNOSTICS - Total profile count: ${profileCount}`);\n        if (profileCount === 0) {\n            console.error(\"No profiles found in database\");\n            throw new Error(\"No profiles found in database\");\n        }\n        // Get all profiles (limit to a reasonable number)\n        const { data: allProfiles, error: profilesError } = await supabase.from(\"profiles\").select(\"*\").limit(100); // Limit to 100 profiles max for performance\n        if (profilesError) {\n            console.error(\"Error fetching profiles:\", profilesError);\n            throw new Error(`Could not fetch profiles: ${profilesError.message}`);\n        }\n        if (!allProfiles || allProfiles.length === 0) {\n            throw new Error(\"No profiles returned from database\");\n        }\n        console.log(`DIAGNOSTICS - Fetched ${allProfiles.length} profiles successfully`);\n        // Filter out excluded profiles for the first selection\n        let availableForFirst = allProfiles;\n        if (safeExcludeIds.length > 0) {\n            availableForFirst = allProfiles.filter((profile)=>!safeExcludeIds.includes(profile.id));\n            // If no profiles left after exclusion, use all profiles\n            if (availableForFirst.length === 0) {\n                console.warn(\"No profiles left after exclusion, using all profiles for first selection\");\n                availableForFirst = allProfiles;\n            }\n        }\n        // Select a random first profile\n        const randomFirstIndex = Math.floor(Math.random() * availableForFirst.length);\n        const firstProfile = availableForFirst[randomFirstIndex];\n        console.log(`DIAGNOSTICS - First profile selected: ${firstProfile.id}`);\n        // Filter profiles for second selection (exclude the first profile and others)\n        const combinedExcludeIds = [\n            ...safeExcludeIds,\n            firstProfile.id\n        ];\n        let availableForSecond = allProfiles.filter((profile)=>!combinedExcludeIds.includes(profile.id));\n        // If no profiles available for second selection, just exclude the first profile\n        if (availableForSecond.length === 0) {\n            console.warn(\"No profiles available for second selection after exclusions\");\n            availableForSecond = allProfiles.filter((profile)=>profile.id !== firstProfile.id);\n            // If still no profiles available, return just the first profile\n            if (availableForSecond.length === 0) {\n                console.warn(\"Could not find any profile different from the first one\");\n                return [\n                    firstProfile\n                ];\n            }\n        }\n        // Select a random second profile\n        const randomSecondIndex = Math.floor(Math.random() * availableForSecond.length);\n        const secondProfile = availableForSecond[randomSecondIndex];\n        console.log(`DIAGNOSTICS - Second profile selected: ${secondProfile.id}`);\n        // Return both profiles\n        return [\n            firstProfile,\n            secondProfile\n        ];\n    } catch (err) {\n        console.error(\"Exception in getRandomProfiles:\", err);\n        throw new Error(`Failed to get random profiles: ${err.message}`);\n    }\n}\n/**\n * Record a vote in the database\n */ async function recordVote(leftProfileId, rightProfileId, winnerId, sessionId) {\n    try {\n        const voteData = {\n            winner_id: winnerId,\n            left_profile_id: leftProfileId,\n            right_profile_id: rightProfileId,\n            voter_session_id: sessionId\n        };\n        const { error } = await supabase.from(\"votes\").insert([\n            voteData\n        ]);\n        if (error) throw error;\n    } catch (error) {\n        console.error(\"Error recording vote:\", error);\n        throw error;\n    }\n}\n/**\n * Get recent votes for a user session\n */ async function getRecentVotes(sessionId, limit = 5) {\n    try {\n        const { data, error } = await supabase.from(\"votes\").select(\"*\").eq(\"voter_session_id\", sessionId).order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching recent votes:\", error);\n        return [];\n    }\n}\n/**\n * Get top profiles by ELO rating\n */ async function getTopProfiles(limit = 10) {\n    try {\n        const { data, error } = await supabase.from(\"profiles\").select(\"*\").order(\"elo_rating\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching top profiles:\", error);\n        return [];\n    }\n}\n/**\n * Count profiles in the database\n */ async function countProfiles() {\n    try {\n        const { count, error } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (error) {\n            console.error(\"Error counting profiles:\", error);\n            throw error;\n        }\n        return count || 0;\n    } catch (error) {\n        console.error(\"Error in countProfiles:\", error);\n        return 0;\n    }\n}\nmodule.exports = {\n    getProfiles,\n    getProfileById,\n    getRandomProfiles,\n    recordVote,\n    getRecentVotes,\n    getTopProfiles,\n    countProfiles\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0YsUUFBUSxFQUFFO0lBQ25CLEVBQUUsT0FBT0UsT0FBTztRQUNkVyxRQUFRWCxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPLEVBQUU7SUFDWDtBQUNGO0FBRUE7O0NBRUMsR0FDRCxlQUFlc0QsZUFBZXZFLFFBQVEsRUFBRTtJQUN0QyxJQUFJO1FBQ0YsTUFBTSxFQUFFZSxJQUFJLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU1yQixTQUMzQlUsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxLQUNQSyxLQUFLLENBQUMsY0FBYztZQUFFQyxXQUFXO1FBQU0sR0FDdkNiLEtBQUssQ0FBQ0E7UUFFVCxJQUFJaUIsT0FBTyxNQUFNQTtRQUNqQixPQUFPRixRQUFRLEVBQUU7SUFDbkIsRUFBRSxPQUFPRSxPQUFPO1FBQ2RXLFFBQVFYLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU8sRUFBRTtJQUNYO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELGVBQWV1RDtJQUNiLElBQUk7UUFDRixNQUFNLEVBQUVoRSxLQUFLLEVBQUVTLEtBQUssRUFBRSxHQUFHLE1BQU1yQixTQUM1QlUsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxLQUFLO1lBQUVDLE9BQU87WUFBU2lDLE1BQU07UUFBSztRQUU1QyxJQUFJeEIsT0FBTztZQUNUVyxRQUFRWCxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxNQUFNQTtRQUNSO1FBRUEsT0FBT1QsU0FBUztJQUNsQixFQUFFLE9BQU9TLE9BQU87UUFDZFcsUUFBUVgsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBTztJQUNUO0FBQ0Y7QUFFQXdELE9BQU9DLE9BQU8sR0FBRztJQUNmNUU7SUFDQStCO0lBQ0FHO0lBQ0EyQjtJQUNBVztJQUNBQztJQUNBQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvLi9saWIvcHJvZmlsZXMtanMuanM/ZDdlNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnQgc3VwYWJhc2UgY2xpZW50XG5jb25zdCB7IHN1cGFiYXNlIH0gPSByZXF1aXJlKFwiLi9zdXBhYmFzZS5qc1wiKTtcblxuLyoqXG4gKiBHZXQgcHJvZmlsZXMgd2l0aCBwYWdpbmF0aW9uLCBmaWx0ZXJpbmcgYW5kIHNvcnRpbmdcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZXMoe1xuICBwYWdlID0gMSxcbiAgbGltaXQgPSAxMCxcbiAgcXVlcnkgPSBcIlwiLFxuICBmaWx0ZXIgPSBcImFsbFwiLFxuICBzb3J0ID0gXCJlbG9cIixcbn0pIHtcbiAgdHJ5IHtcbiAgICAvLyBDYWxjdWxhdGUgb2Zmc2V0XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgLy8gU3RhcnQgYnVpbGRpbmcgcXVlcnlcbiAgICBsZXQgcHJvZmlsZVF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiB9KTtcblxuICAgIC8vIEFkZCBzZWFyY2ggZmlsdGVyIGlmIHF1ZXJ5IGlzIHByb3ZpZGVkXG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3IoXG4gICAgICAgIGBmdWxsX25hbWUuaWxpa2UuJSR7cXVlcnl9JSx0aXRsZS5pbGlrZS4lJHtxdWVyeX0lLGNvbXBhbnkuaWxpa2UuJSR7cXVlcnl9JSxtYWpvci5pbGlrZS4lJHtxdWVyeX0lYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY2F0ZWdvcnkgZmlsdGVyXG4gICAgaWYgKGZpbHRlciAhPT0gXCJhbGxcIikge1xuICAgICAgaWYgKGZpbHRlciA9PT0gXCJzdHVkZW50c1wiKSB7XG4gICAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5lcShcImlzX3N0dWRlbnRcIiwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlciA9PT0gXCJhbHVtbmlcIikge1xuICAgICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkuZXEoXCJpc19zdHVkZW50XCIsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFzc3VtZSBmaWx0ZXIgaXMgYSBtYWpvclxuICAgICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkuaWxpa2UoXCJtYWpvclwiLCBgJSR7ZmlsdGVyfSVgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgc29ydGluZ1xuICAgIGlmIChzb3J0ID09PSBcImVsb1wiKSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3JkZXIoXCJlbG9fcmF0aW5nXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICB9IGVsc2UgaWYgKHNvcnQgPT09IFwibmFtZVwiKSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3JkZXIoXCJmdWxsX25hbWVcIik7XG4gICAgfSBlbHNlIGlmIChzb3J0ID09PSBcImdyYWR1YXRpb25cIikge1xuICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5Lm9yZGVyKFwiZ3JhZHVhdGlvbl95ZWFyXCIpO1xuICAgIH1cblxuICAgIC8vIEFkZCBwYWdpbmF0aW9uXG4gICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5LnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQgLSAxKTtcblxuICAgIC8vIEV4ZWN1dGUgcXVlcnlcbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGVzLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHByb2ZpbGVRdWVyeTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgICAvLyBHZXQgZWR1Y2F0aW9uIGFuZCB3b3JrIGV4cGVyaWVuY2UgZm9yIGVhY2ggcHJvZmlsZVxuICAgIGNvbnN0IHByb2ZpbGVzV2l0aERldGFpbHMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgcHJvZmlsZSBvZiBwcm9maWxlcyB8fCBbXSkge1xuICAgICAgY29uc3QgeyBkYXRhOiBlZHVjYXRpb24gfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiZWR1Y2F0aW9uXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAgIC5lcShcInByb2ZpbGVfaWRcIiwgcHJvZmlsZS5pZCk7XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogZXhwZXJpZW5jZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJ3b3JrX2V4cGVyaWVuY2VcIilcbiAgICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBwcm9maWxlLmlkKVxuICAgICAgICAub3JkZXIoXCJpc19jdXJyZW50XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAub3JkZXIoXCJlbmRfZGF0ZVwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICAgIHByb2ZpbGVzV2l0aERldGFpbHMucHVzaCh7XG4gICAgICAgIC4uLnByb2ZpbGUsXG4gICAgICAgIGVkdWNhdGlvbjogZWR1Y2F0aW9uIHx8IFtdLFxuICAgICAgICBleHBlcmllbmNlOiBleHBlcmllbmNlIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpbGVzOiBwcm9maWxlc1dpdGhEZXRhaWxzLFxuICAgICAgdG90YWw6IGNvdW50IHx8IDAsXG4gICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwoKGNvdW50IHx8IDApIC8gbGltaXQpLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYSBzaW5nbGUgcHJvZmlsZSBieSBJRCB3aXRoIGVkdWNhdGlvbiBhbmQgd29yayBleHBlcmllbmNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFByb2ZpbGVCeUlkKGlkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJpZFwiLCBpZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgaWYgKCFwcm9maWxlKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHsgZGF0YTogZWR1Y2F0aW9uIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJlZHVjYXRpb25cIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJwcm9maWxlX2lkXCIsIGlkKTtcblxuICAgIGNvbnN0IHsgZGF0YTogZXhwZXJpZW5jZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwid29ya19leHBlcmllbmNlXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBpZClcbiAgICAgIC5vcmRlcihcImlzX2N1cnJlbnRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAub3JkZXIoXCJlbmRfZGF0ZVwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgICBcbiAgICAvLyBHZXQgc2tpbGxzIGZvciB0aGlzIHByb2ZpbGVcbiAgICBjb25zdCB7IGRhdGE6IHNraWxscyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwic2tpbGxzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBpZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJvZmlsZSxcbiAgICAgIGVkdWNhdGlvbjogZWR1Y2F0aW9uIHx8IFtdLFxuICAgICAgZXhwZXJpZW5jZTogZXhwZXJpZW5jZSB8fCBbXSxcbiAgICAgIHNraWxsczogc2tpbGxzIHx8IFtdXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBwcm9maWxlIHdpdGggSUQgJHtpZH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHR3byByYW5kb20gcHJvZmlsZXMsIGV4Y2x1ZGluZyBzcGVjaWZpZWQgSURzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFJhbmRvbVByb2ZpbGVzKGV4Y2x1ZGVJZHMgPSBbXSkge1xuICAvLyBFbnN1cmUgZXhjbHVkZUlkcyBpcyBhbiBhcnJheSBvZiBudW1iZXJzXG4gIGNvbnN0IHNhZmVFeGNsdWRlSWRzID0gQXJyYXkuaXNBcnJheShleGNsdWRlSWRzKVxuICAgID8gZXhjbHVkZUlkcy5maWx0ZXIoKGlkKSA9PiB0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKGlkKSlcbiAgICA6IFtdO1xuXG4gIGNvbnNvbGUubG9nKFxuICAgIGBESUFHTk9TVElDUyAtIGdldFJhbmRvbVByb2ZpbGVzIGNhbGxlZCB3aXRoIGV4Y2x1ZGVJZHM6YCxcbiAgICBzYWZlRXhjbHVkZUlkc1xuICApO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhbnkgcHJvZmlsZXMgYXQgYWxsIGZpcnN0XG4gICAgY29uc3QgeyBjb3VudDogcHJvZmlsZUNvdW50LCBlcnJvcjogY291bnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiwgaGVhZDogdHJ1ZSB9KTtcblxuICAgIGlmIChjb3VudEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY291bnRpbmcgcHJvZmlsZXM6XCIsIGNvdW50RXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY291bnQgcHJvZmlsZXM6ICR7Y291bnRFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIFRvdGFsIHByb2ZpbGUgY291bnQ6ICR7cHJvZmlsZUNvdW50fWApO1xuXG4gICAgaWYgKHByb2ZpbGVDb3VudCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIk5vIHByb2ZpbGVzIGZvdW5kIGluIGRhdGFiYXNlXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcHJvZmlsZXMgZm91bmQgaW4gZGF0YWJhc2VcIik7XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCBwcm9maWxlcyAobGltaXQgdG8gYSByZWFzb25hYmxlIG51bWJlcilcbiAgICBjb25zdCB7IGRhdGE6IGFsbFByb2ZpbGVzLCBlcnJvcjogcHJvZmlsZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAubGltaXQoMTAwKTsgLy8gTGltaXQgdG8gMTAwIHByb2ZpbGVzIG1heCBmb3IgcGVyZm9ybWFuY2VcblxuICAgIGlmIChwcm9maWxlc0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZXM6XCIsIHByb2ZpbGVzRXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmV0Y2ggcHJvZmlsZXM6ICR7cHJvZmlsZXNFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGlmICghYWxsUHJvZmlsZXMgfHwgYWxsUHJvZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm9maWxlcyByZXR1cm5lZCBmcm9tIGRhdGFiYXNlXCIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYERJQUdOT1NUSUNTIC0gRmV0Y2hlZCAke2FsbFByb2ZpbGVzLmxlbmd0aH0gcHJvZmlsZXMgc3VjY2Vzc2Z1bGx5YFxuICAgICk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGV4Y2x1ZGVkIHByb2ZpbGVzIGZvciB0aGUgZmlyc3Qgc2VsZWN0aW9uXG4gICAgbGV0IGF2YWlsYWJsZUZvckZpcnN0ID0gYWxsUHJvZmlsZXM7XG4gICAgaWYgKHNhZmVFeGNsdWRlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF2YWlsYWJsZUZvckZpcnN0ID0gYWxsUHJvZmlsZXMuZmlsdGVyKFxuICAgICAgICAocHJvZmlsZSkgPT4gIXNhZmVFeGNsdWRlSWRzLmluY2x1ZGVzKHByb2ZpbGUuaWQpXG4gICAgICApO1xuXG4gICAgICAvLyBJZiBubyBwcm9maWxlcyBsZWZ0IGFmdGVyIGV4Y2x1c2lvbiwgdXNlIGFsbCBwcm9maWxlc1xuICAgICAgaWYgKGF2YWlsYWJsZUZvckZpcnN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJObyBwcm9maWxlcyBsZWZ0IGFmdGVyIGV4Y2x1c2lvbiwgdXNpbmcgYWxsIHByb2ZpbGVzIGZvciBmaXJzdCBzZWxlY3Rpb25cIlxuICAgICAgICApO1xuICAgICAgICBhdmFpbGFibGVGb3JGaXJzdCA9IGFsbFByb2ZpbGVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlbGVjdCBhIHJhbmRvbSBmaXJzdCBwcm9maWxlXG4gICAgY29uc3QgcmFuZG9tRmlyc3RJbmRleCA9IE1hdGguZmxvb3IoXG4gICAgICBNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlRm9yRmlyc3QubGVuZ3RoXG4gICAgKTtcbiAgICBjb25zdCBmaXJzdFByb2ZpbGUgPSBhdmFpbGFibGVGb3JGaXJzdFtyYW5kb21GaXJzdEluZGV4XTtcblxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIEZpcnN0IHByb2ZpbGUgc2VsZWN0ZWQ6ICR7Zmlyc3RQcm9maWxlLmlkfWApO1xuXG4gICAgLy8gRmlsdGVyIHByb2ZpbGVzIGZvciBzZWNvbmQgc2VsZWN0aW9uIChleGNsdWRlIHRoZSBmaXJzdCBwcm9maWxlIGFuZCBvdGhlcnMpXG4gICAgY29uc3QgY29tYmluZWRFeGNsdWRlSWRzID0gWy4uLnNhZmVFeGNsdWRlSWRzLCBmaXJzdFByb2ZpbGUuaWRdO1xuICAgIGxldCBhdmFpbGFibGVGb3JTZWNvbmQgPSBhbGxQcm9maWxlcy5maWx0ZXIoXG4gICAgICAocHJvZmlsZSkgPT4gIWNvbWJpbmVkRXhjbHVkZUlkcy5pbmNsdWRlcyhwcm9maWxlLmlkKVxuICAgICk7XG5cbiAgICAvLyBJZiBubyBwcm9maWxlcyBhdmFpbGFibGUgZm9yIHNlY29uZCBzZWxlY3Rpb24sIGp1c3QgZXhjbHVkZSB0aGUgZmlyc3QgcHJvZmlsZVxuICAgIGlmIChhdmFpbGFibGVGb3JTZWNvbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiTm8gcHJvZmlsZXMgYXZhaWxhYmxlIGZvciBzZWNvbmQgc2VsZWN0aW9uIGFmdGVyIGV4Y2x1c2lvbnNcIlxuICAgICAgKTtcbiAgICAgIGF2YWlsYWJsZUZvclNlY29uZCA9IGFsbFByb2ZpbGVzLmZpbHRlcihcbiAgICAgICAgKHByb2ZpbGUpID0+IHByb2ZpbGUuaWQgIT09IGZpcnN0UHJvZmlsZS5pZFxuICAgICAgKTtcblxuICAgICAgLy8gSWYgc3RpbGwgbm8gcHJvZmlsZXMgYXZhaWxhYmxlLCByZXR1cm4ganVzdCB0aGUgZmlyc3QgcHJvZmlsZVxuICAgICAgaWYgKGF2YWlsYWJsZUZvclNlY29uZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGZpbmQgYW55IHByb2ZpbGUgZGlmZmVyZW50IGZyb20gdGhlIGZpcnN0IG9uZVwiKTtcbiAgICAgICAgcmV0dXJuIFtmaXJzdFByb2ZpbGVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlbGVjdCBhIHJhbmRvbSBzZWNvbmQgcHJvZmlsZVxuICAgIGNvbnN0IHJhbmRvbVNlY29uZEluZGV4ID0gTWF0aC5mbG9vcihcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBhdmFpbGFibGVGb3JTZWNvbmQubGVuZ3RoXG4gICAgKTtcbiAgICBjb25zdCBzZWNvbmRQcm9maWxlID0gYXZhaWxhYmxlRm9yU2Vjb25kW3JhbmRvbVNlY29uZEluZGV4XTtcblxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIFNlY29uZCBwcm9maWxlIHNlbGVjdGVkOiAke3NlY29uZFByb2ZpbGUuaWR9YCk7XG5cbiAgICAvLyBSZXR1cm4gYm90aCBwcm9maWxlc1xuICAgIHJldHVybiBbZmlyc3RQcm9maWxlLCBzZWNvbmRQcm9maWxlXTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkV4Y2VwdGlvbiBpbiBnZXRSYW5kb21Qcm9maWxlczpcIiwgZXJyKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgcmFuZG9tIHByb2ZpbGVzOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8qKlxuICogUmVjb3JkIGEgdm90ZSBpbiB0aGUgZGF0YWJhc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVjb3JkVm90ZShsZWZ0UHJvZmlsZUlkLCByaWdodFByb2ZpbGVJZCwgd2lubmVySWQsIHNlc3Npb25JZCkge1xuICB0cnkge1xuICAgIGNvbnN0IHZvdGVEYXRhID0ge1xuICAgICAgd2lubmVyX2lkOiB3aW5uZXJJZCxcbiAgICAgIGxlZnRfcHJvZmlsZV9pZDogbGVmdFByb2ZpbGVJZCxcbiAgICAgIHJpZ2h0X3Byb2ZpbGVfaWQ6IHJpZ2h0UHJvZmlsZUlkLFxuICAgICAgdm90ZXJfc2Vzc2lvbl9pZDogc2Vzc2lvbklkLFxuICAgIH07XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwidm90ZXNcIikuaW5zZXJ0KFt2b3RlRGF0YV0pO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVjb3JkaW5nIHZvdGU6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCByZWNlbnQgdm90ZXMgZm9yIGEgdXNlciBzZXNzaW9uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY2VudFZvdGVzKHNlc3Npb25JZCwgbGltaXQgPSA1KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwidm90ZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJ2b3Rlcl9zZXNzaW9uX2lkXCIsIHNlc3Npb25JZClcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcmVjZW50IHZvdGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRvcCBwcm9maWxlcyBieSBFTE8gcmF0aW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFRvcFByb2ZpbGVzKGxpbWl0ID0gMTApIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5vcmRlcihcImVsb19yYXRpbmdcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdG9wIHByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogQ291bnQgcHJvZmlsZXMgaW4gdGhlIGRhdGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvdW50UHJvZmlsZXMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb3VudGluZyBwcm9maWxlczpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50IHx8IDA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGNvdW50UHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0UHJvZmlsZXMsXG4gIGdldFByb2ZpbGVCeUlkLFxuICBnZXRSYW5kb21Qcm9maWxlcyxcbiAgcmVjb3JkVm90ZSxcbiAgZ2V0UmVjZW50Vm90ZXMsXG4gIGdldFRvcFByb2ZpbGVzLFxuICBjb3VudFByb2ZpbGVzLFxufTtcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsInJlcXVpcmUiLCJnZXRQcm9maWxlcyIsInBhZ2UiLCJsaW1pdCIsInF1ZXJ5IiwiZmlsdGVyIiwic29ydCIsIm9mZnNldCIsInByb2ZpbGVRdWVyeSIsImZyb20iLCJzZWxlY3QiLCJjb3VudCIsIm9yIiwiZXEiLCJpbGlrZSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwicmFuZ2UiLCJkYXRhIiwicHJvZmlsZXMiLCJlcnJvciIsInByb2ZpbGVzV2l0aERldGFpbHMiLCJwcm9maWxlIiwiZWR1Y2F0aW9uIiwiaWQiLCJleHBlcmllbmNlIiwicHVzaCIsInRvdGFsIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiY29uc29sZSIsImdldFByb2ZpbGVCeUlkIiwic2luZ2xlIiwic2tpbGxzIiwiZ2V0UmFuZG9tUHJvZmlsZXMiLCJleGNsdWRlSWRzIiwic2FmZUV4Y2x1ZGVJZHMiLCJBcnJheSIsImlzQXJyYXkiLCJpc05hTiIsImxvZyIsInByb2ZpbGVDb3VudCIsImNvdW50RXJyb3IiLCJoZWFkIiwiRXJyb3IiLCJtZXNzYWdlIiwiYWxsUHJvZmlsZXMiLCJwcm9maWxlc0Vycm9yIiwibGVuZ3RoIiwiYXZhaWxhYmxlRm9yRmlyc3QiLCJpbmNsdWRlcyIsIndhcm4iLCJyYW5kb21GaXJzdEluZGV4IiwiZmxvb3IiLCJyYW5kb20iLCJmaXJzdFByb2ZpbGUiLCJjb21iaW5lZEV4Y2x1ZGVJZHMiLCJhdmFpbGFibGVGb3JTZWNvbmQiLCJyYW5kb21TZWNvbmRJbmRleCIsInNlY29uZFByb2ZpbGUiLCJlcnIiLCJyZWNvcmRWb3RlIiwibGVmdFByb2ZpbGVJZCIsInJpZ2h0UHJvZmlsZUlkIiwid2lubmVySWQiLCJzZXNzaW9uSWQiLCJ2b3RlRGF0YSIsIndpbm5lcl9pZCIsImxlZnRfcHJvZmlsZV9pZCIsInJpZ2h0X3Byb2ZpbGVfaWQiLCJ2b3Rlcl9zZXNzaW9uX2lkIiwiaW5zZXJ0IiwiZ2V0UmVjZW50Vm90ZXMiLCJnZXRUb3BQcm9maWxlcyIsImNvdW50UHJvZmlsZXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/profiles-js.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { createClient } = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n(__webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\").config)({\n    path: \".env.local\"\n});\n// Get environment variables with fallbacks for development\nconst supabaseUrl = \"https://qbzwhueywwpqkucwfnsb.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFiendodWV5d3dwcWt1Y3dmbnNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4MDk4MzEsImV4cCI6MjA1OTM4NTgzMX0.YiZec-9dg4z32pqCuSGGB3uyqrEZs5zm-b_unS_2czs\" || 0;\n// Create Supabase client\nconst supabase = createClient(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: false\n    }\n});\n// Log initialization for debugging\nconsole.log(`Supabase JS client initialized with URL: ${supabaseUrl.substring(0, 20)}...`);\n// Export the client\nmodule.exports = {\n    supabase\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sRUFBRUEsWUFBWSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDLDhGQUF1QjtBQUN4REEscUZBQXdCLENBQUM7SUFBRUUsTUFBTTtBQUFhO0FBRTlDLDJEQUEyRDtBQUMzRCxNQUFNQyxjQUNKQywwQ0FBb0MsSUFDcEMsQ0FBdUM7QUFDekMsTUFBTUcsa0JBQ0pILGtOQUF5QyxJQUFJLENBQWU7QUFFOUQseUJBQXlCO0FBQ3pCLE1BQU1LLFdBQVdWLGFBQWFJLGFBQWFJLGlCQUFpQjtJQUMxREcsTUFBTTtRQUNKQyxnQkFBZ0I7SUFDbEI7QUFDRjtBQUVBLG1DQUFtQztBQUNuQ0MsUUFBUUMsR0FBRyxDQUNULENBQUMseUNBQXlDLEVBQUVWLFlBQVlXLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO0FBRy9FLG9CQUFvQjtBQUNwQkMsT0FBT0MsT0FBTyxHQUFHO0lBQUVQO0FBQVMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSByZXF1aXJlKFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCIpO1xucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoeyBwYXRoOiBcIi5lbnYubG9jYWxcIiB9KTtcblxuLy8gR2V0IGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGZhbGxiYWNrcyBmb3IgZGV2ZWxvcG1lbnRcbmNvbnN0IHN1cGFiYXNlVXJsID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8XG4gIFwiaHR0cHM6Ly95b3VyLXN1cGFiYXNlLXVybC5zdXBhYmFzZS5jb1wiO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgXCJ5b3VyLWFub24ta2V5XCI7XG5cbi8vIENyZWF0ZSBTdXBhYmFzZSBjbGllbnRcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgYXV0aDoge1xuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgfSxcbn0pO1xuXG4vLyBMb2cgaW5pdGlhbGl6YXRpb24gZm9yIGRlYnVnZ2luZ1xuY29uc29sZS5sb2coXG4gIGBTdXBhYmFzZSBKUyBjbGllbnQgaW5pdGlhbGl6ZWQgd2l0aCBVUkw6ICR7c3VwYWJhc2VVcmwuc3Vic3RyaW5nKDAsIDIwKX0uLi5gXG4pO1xuXG4vLyBFeHBvcnQgdGhlIGNsaWVudFxubW9kdWxlLmV4cG9ydHMgPSB7IHN1cGFiYXNlIH07XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwicmVxdWlyZSIsImNvbmZpZyIsInBhdGgiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/dotenv","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();