"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profiles/random/route";
exports.ids = ["app/api/profiles/random/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*****************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rishikanaparti_Gtranked_GTRanked_app_api_profiles_random_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/profiles/random/route.ts */ \"(rsc)/./app/api/profiles/random/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profiles/random/route\",\n        pathname: \"/api/profiles/random\",\n        filename: \"route\",\n        bundlePath: \"app/api/profiles/random/route\"\n    },\n    resolvedPagePath: \"/Users/rishikanaparti/Gtranked/GTRanked/app/api/profiles/random/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rishikanaparti_Gtranked_GTRanked_app_api_profiles_random_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/profiles/random/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlcyUyRnJhbmRvbSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvZmlsZXMlMkZyYW5kb20lMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9maWxlcyUyRnJhbmRvbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJpc2hpa2FuYXBhcnRpJTJGR3RyYW5rZWQlMkZHVFJhbmtlZCUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyaXNoaWthbmFwYXJ0aSUyRkd0cmFua2VkJTJGR1RSYW5rZWQmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNjO0FBQ3dCO0FBQ3JHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvP2U5MjQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Jpc2hpa2FuYXBhcnRpL0d0cmFua2VkL0dUUmFua2VkL2FwcC9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9wcm9maWxlcy9yYW5kb20vcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9wcm9maWxlcy9yYW5kb21cIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3Byb2ZpbGVzL3JhbmRvbS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy9yaXNoaWthbmFwYXJ0aS9HdHJhbmtlZC9HVFJhbmtlZC9hcHAvYXBpL3Byb2ZpbGVzL3JhbmRvbS9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlXCI7XG5mdW5jdGlvbiBwYXRjaEZldGNoKCkge1xuICAgIHJldHVybiBfcGF0Y2hGZXRjaCh7XG4gICAgICAgIHNlcnZlckhvb2tzLFxuICAgICAgICBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlXG4gICAgfSk7XG59XG5leHBvcnQgeyByb3V0ZU1vZHVsZSwgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIG9yaWdpbmFsUGF0aG5hbWUsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/profiles/random/route.ts":
/*!******************************************!*\
  !*** ./app/api/profiles/random/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n// Import the JavaScript version of the profiles module\nconst { getRandomProfiles, getProfileById } = __webpack_require__(/*! @/lib/profiles-js */ \"(rsc)/./lib/profiles-js.js\");\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const excludeParam = searchParams.get(\"exclude\") || \"\";\n        // Convert exclude list to array of numbers\n        const excludeIds = excludeParam ? excludeParam.split(\",\").map((id)=>parseInt(id, 10)).filter((id)=>!isNaN(id)) : [];\n        console.log(`Fetching random profiles with excludeIds: ${JSON.stringify(excludeIds)}`);\n        // Get random profiles from Supabase\n        const basicProfiles = await getRandomProfiles(excludeIds);\n        // Fetch detailed profiles with experience and education data\n        const detailedProfiles = await Promise.all(basicProfiles.map((profile)=>getProfileById(profile.id)));\n        // Transform profiles to match frontend format\n        const transformedProfiles = detailedProfiles.map((profile)=>{\n            // Format experiences\n            const experiences = profile.experience ? profile.experience.map((exp)=>{\n                // Format the duration (e.g., \"2022 - Present\")\n                const startYear = exp.start_date ? new Date(exp.start_date).getFullYear() : \"\";\n                const endYear = exp.is_current ? \"Present\" : exp.end_date ? new Date(exp.end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                return {\n                    title: exp.title || \"\",\n                    company: exp.company_name || \"\",\n                    duration\n                };\n            }) : [];\n            // Get degree from education if available\n            const degree = profile.education && profile.education.length > 0 ? profile.education[0].degree || \"BS\" : \"BS\";\n            return {\n                id: profile.id.toString(),\n                name: profile.full_name || \"Unknown\",\n                title: profile.title || \"\",\n                company: profile.company || \"\",\n                major: profile.major || \"Unknown\",\n                graduationYear: profile.graduation_year || 0,\n                isStudent: profile.is_student,\n                elo: profile.elo_rating,\n                location: profile.location || \"\",\n                avatar: `/avatars/${Math.floor(Math.random() * 10) + 1}.png`,\n                degree,\n                skills: [],\n                experiences\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            profiles: transformedProfiles\n        });\n    } catch (error) {\n        console.error(\"Error fetching random profiles:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch random profiles\",\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            profiles: []\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LG1DQUFtQ0E7UUFDakQsT0FBTy9ELHFEQUFZQSxDQUFDNkQsSUFBSSxDQUN0QjtZQUNFRSxPQUFPO1lBQ1BDLFNBQVNELGlCQUFpQkUsUUFBUUYsTUFBTUMsT0FBTyxHQUFHO1lBQ2xERixVQUFVLEVBQUU7UUFDZCxHQUNBO1lBQUVJLFFBQVE7UUFBSTtJQUVsQjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvLi9hcHAvYXBpL3Byb2ZpbGVzL3JhbmRvbS9yb3V0ZS50cz9kOTJmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuLy8gSW1wb3J0IHRoZSBKYXZhU2NyaXB0IHZlcnNpb24gb2YgdGhlIHByb2ZpbGVzIG1vZHVsZVxuY29uc3QgeyBnZXRSYW5kb21Qcm9maWxlcywgZ2V0UHJvZmlsZUJ5SWQgfSA9IHJlcXVpcmUoXCJAL2xpYi9wcm9maWxlcy1qc1wiKTtcblxuLy8gRGVmaW5lIGEgdHlwZSBmb3IgdGhlIHByb2ZpbGUgcmV0dXJuZWQgZnJvbSBTdXBhYmFzZVxuaW50ZXJmYWNlIFN1cGFiYXNlUHJvZmlsZSB7XG4gIGlkOiBudW1iZXI7XG4gIGZ1bGxfbmFtZT86IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGNvbXBhbnk/OiBzdHJpbmc7XG4gIG1ham9yPzogc3RyaW5nO1xuICBncmFkdWF0aW9uX3llYXI/OiBudW1iZXI7XG4gIGlzX3N0dWRlbnQ6IGJvb2xlYW47XG4gIGVsb19yYXRpbmc6IG51bWJlcjtcbiAgbG9jYXRpb24/OiBzdHJpbmc7XG4gIFtrZXk6IHN0cmluZ106IGFueTsgLy8gQWxsb3cgZm9yIG90aGVyIGZpZWxkc1xufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKHJlcXVlc3Q6IFJlcXVlc3QpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IHNlYXJjaFBhcmFtcyB9ID0gbmV3IFVSTChyZXF1ZXN0LnVybCk7XG4gICAgY29uc3QgZXhjbHVkZVBhcmFtID0gc2VhcmNoUGFyYW1zLmdldChcImV4Y2x1ZGVcIikgfHwgXCJcIjtcblxuICAgIC8vIENvbnZlcnQgZXhjbHVkZSBsaXN0IHRvIGFycmF5IG9mIG51bWJlcnNcbiAgICBjb25zdCBleGNsdWRlSWRzID0gZXhjbHVkZVBhcmFtXG4gICAgICA/IGV4Y2x1ZGVQYXJhbVxuICAgICAgICAgIC5zcGxpdChcIixcIilcbiAgICAgICAgICAubWFwKChpZCkgPT4gcGFyc2VJbnQoaWQsIDEwKSlcbiAgICAgICAgICAuZmlsdGVyKChpZCkgPT4gIWlzTmFOKGlkKSlcbiAgICAgIDogW107XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBGZXRjaGluZyByYW5kb20gcHJvZmlsZXMgd2l0aCBleGNsdWRlSWRzOiAke0pTT04uc3RyaW5naWZ5KGV4Y2x1ZGVJZHMpfWBcbiAgICApO1xuXG4gICAgLy8gR2V0IHJhbmRvbSBwcm9maWxlcyBmcm9tIFN1cGFiYXNlXG4gICAgY29uc3QgYmFzaWNQcm9maWxlcyA9IChhd2FpdCBnZXRSYW5kb21Qcm9maWxlcyhcbiAgICAgIGV4Y2x1ZGVJZHNcbiAgICApKSBhcyBTdXBhYmFzZVByb2ZpbGVbXTtcblxuICAgIC8vIEZldGNoIGRldGFpbGVkIHByb2ZpbGVzIHdpdGggZXhwZXJpZW5jZSBhbmQgZWR1Y2F0aW9uIGRhdGFcbiAgICBjb25zdCBkZXRhaWxlZFByb2ZpbGVzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBiYXNpY1Byb2ZpbGVzLm1hcCgocHJvZmlsZSkgPT4gZ2V0UHJvZmlsZUJ5SWQocHJvZmlsZS5pZCkpXG4gICAgKTtcblxuICAgIC8vIFRyYW5zZm9ybSBwcm9maWxlcyB0byBtYXRjaCBmcm9udGVuZCBmb3JtYXRcbiAgICBjb25zdCB0cmFuc2Zvcm1lZFByb2ZpbGVzID0gZGV0YWlsZWRQcm9maWxlcy5tYXAoKHByb2ZpbGU6IGFueSkgPT4ge1xuICAgICAgLy8gRm9ybWF0IGV4cGVyaWVuY2VzXG4gICAgICBjb25zdCBleHBlcmllbmNlcyA9IHByb2ZpbGUuZXhwZXJpZW5jZVxuICAgICAgICA/IHByb2ZpbGUuZXhwZXJpZW5jZS5tYXAoKGV4cDogYW55KSA9PiB7XG4gICAgICAgICAgICAvLyBGb3JtYXQgdGhlIGR1cmF0aW9uIChlLmcuLCBcIjIwMjIgLSBQcmVzZW50XCIpXG4gICAgICAgICAgICBjb25zdCBzdGFydFllYXIgPSBleHAuc3RhcnRfZGF0ZVxuICAgICAgICAgICAgICA/IG5ldyBEYXRlKGV4cC5zdGFydF9kYXRlKS5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGVuZFllYXIgPSBleHAuaXNfY3VycmVudFxuICAgICAgICAgICAgICA/IFwiUHJlc2VudFwiXG4gICAgICAgICAgICAgIDogZXhwLmVuZF9kYXRlXG4gICAgICAgICAgICAgID8gbmV3IERhdGUoZXhwLmVuZF9kYXRlKS5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgICAgIGNvbnN0IGR1cmF0aW9uID1cbiAgICAgICAgICAgICAgc3RhcnRZZWFyICYmIGVuZFllYXIgPyBgJHtzdGFydFllYXJ9IC0gJHtlbmRZZWFyfWAgOiBcIlwiO1xuXG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICB0aXRsZTogZXhwLnRpdGxlIHx8IFwiXCIsXG4gICAgICAgICAgICAgIGNvbXBhbnk6IGV4cC5jb21wYW55X25hbWUgfHwgXCJcIixcbiAgICAgICAgICAgICAgZHVyYXRpb24sXG4gICAgICAgICAgICB9O1xuICAgICAgICAgIH0pXG4gICAgICAgIDogW107XG5cbiAgICAgIC8vIEdldCBkZWdyZWUgZnJvbSBlZHVjYXRpb24gaWYgYXZhaWxhYmxlXG4gICAgICBjb25zdCBkZWdyZWUgPVxuICAgICAgICBwcm9maWxlLmVkdWNhdGlvbiAmJiBwcm9maWxlLmVkdWNhdGlvbi5sZW5ndGggPiAwXG4gICAgICAgICAgPyBwcm9maWxlLmVkdWNhdGlvblswXS5kZWdyZWUgfHwgXCJCU1wiXG4gICAgICAgICAgOiBcIkJTXCI7XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIGlkOiBwcm9maWxlLmlkLnRvU3RyaW5nKCksXG4gICAgICAgIG5hbWU6IHByb2ZpbGUuZnVsbF9uYW1lIHx8IFwiVW5rbm93blwiLFxuICAgICAgICB0aXRsZTogcHJvZmlsZS50aXRsZSB8fCBcIlwiLFxuICAgICAgICBjb21wYW55OiBwcm9maWxlLmNvbXBhbnkgfHwgXCJcIixcbiAgICAgICAgbWFqb3I6IHByb2ZpbGUubWFqb3IgfHwgXCJVbmtub3duXCIsXG4gICAgICAgIGdyYWR1YXRpb25ZZWFyOiBwcm9maWxlLmdyYWR1YXRpb25feWVhciB8fCAwLFxuICAgICAgICBpc1N0dWRlbnQ6IHByb2ZpbGUuaXNfc3R1ZGVudCxcbiAgICAgICAgZWxvOiBwcm9maWxlLmVsb19yYXRpbmcsXG4gICAgICAgIGxvY2F0aW9uOiBwcm9maWxlLmxvY2F0aW9uIHx8IFwiXCIsXG4gICAgICAgIGF2YXRhcjogYC9hdmF0YXJzLyR7TWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogMTApICsgMX0ucG5nYCxcbiAgICAgICAgZGVncmVlLFxuICAgICAgICBza2lsbHM6IFtdLCAvLyBOb3QgaW4gZGF0YWJhc2VcbiAgICAgICAgZXhwZXJpZW5jZXMsIC8vIFVzZSB0aGUgZm9ybWF0dGVkIGV4cGVyaWVuY2VzXG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcHJvZmlsZXM6IHRyYW5zZm9ybWVkUHJvZmlsZXMgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHJhbmRvbSBwcm9maWxlczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIHJhbmRvbSBwcm9maWxlc1wiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgICBwcm9maWxlczogW10sXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFJhbmRvbVByb2ZpbGVzIiwiZ2V0UHJvZmlsZUJ5SWQiLCJyZXF1aXJlIiwiR0VUIiwicmVxdWVzdCIsInNlYXJjaFBhcmFtcyIsIlVSTCIsInVybCIsImV4Y2x1ZGVQYXJhbSIsImdldCIsImV4Y2x1ZGVJZHMiLCJzcGxpdCIsIm1hcCIsImlkIiwicGFyc2VJbnQiLCJmaWx0ZXIiLCJpc05hTiIsImNvbnNvbGUiLCJsb2ciLCJKU09OIiwic3RyaW5naWZ5IiwiYmFzaWNQcm9maWxlcyIsImRldGFpbGVkUHJvZmlsZXMiLCJQcm9taXNlIiwiYWxsIiwicHJvZmlsZSIsInRyYW5zZm9ybWVkUHJvZmlsZXMiLCJleHBlcmllbmNlcyIsImV4cGVyaWVuY2UiLCJleHAiLCJzdGFydFllYXIiLCJzdGFydF9kYXRlIiwiRGF0ZSIsImdldEZ1bGxZZWFyIiwiZW5kWWVhciIsImlzX2N1cnJlbnQiLCJlbmRfZGF0ZSIsImR1cmF0aW9uIiwidGl0bGUiLCJjb21wYW55IiwiY29tcGFueV9uYW1lIiwiZGVncmVlIiwiZWR1Y2F0aW9uIiwibGVuZ3RoIiwidG9TdHJpbmciLCJuYW1lIiwiZnVsbF9uYW1lIiwibWFqb3IiLCJncmFkdWF0aW9uWWVhciIsImdyYWR1YXRpb25feWVhciIsImlzU3R1ZGVudCIsImlzX3N0dWRlbnQiLCJlbG8iLCJlbG9fcmF0aW5nIiwibG9jYXRpb24iLCJhdmF0YXIiLCJNYXRoIiwiZmxvb3IiLCJyYW5kb20iLCJza2lsbHMiLCJqc29uIiwicHJvZmlsZXMiLCJlcnJvciIsIm1lc3NhZ2UiLCJFcnJvciIsInN0YXR1cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/profiles/random/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/profiles-js.js":
/*!****************************!*\
  !*** ./lib/profiles-js.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Import supabase client\n\nconst { supabase } = __webpack_require__(/*! ./supabase.js */ \"(rsc)/./lib/supabase.js\");\n/**\n * Get profiles with pagination, filtering and sorting\n */ async function getProfiles({ page = 1, limit = 10, query = \"\", filter = \"all\", sort = \"elo\" }) {\n    try {\n        // Calculate offset\n        const offset = (page - 1) * limit;\n        // Start building query\n        let profileQuery = supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\"\n        });\n        // Add search filter if query is provided\n        if (query) {\n            profileQuery = profileQuery.or(`full_name.ilike.%${query}%,title.ilike.%${query}%,company.ilike.%${query}%,major.ilike.%${query}%`);\n        }\n        // Add category filter\n        if (filter !== \"all\") {\n            if (filter === \"students\") {\n                profileQuery = profileQuery.eq(\"is_student\", true);\n            } else if (filter === \"alumni\") {\n                profileQuery = profileQuery.eq(\"is_student\", false);\n            } else {\n                // Assume filter is a major\n                profileQuery = profileQuery.ilike(\"major\", `%${filter}%`);\n            }\n        }\n        // Add sorting\n        if (sort === \"elo\") {\n            profileQuery = profileQuery.order(\"elo_rating\", {\n                ascending: false\n            });\n        } else if (sort === \"name\") {\n            profileQuery = profileQuery.order(\"full_name\");\n        } else if (sort === \"graduation\") {\n            profileQuery = profileQuery.order(\"graduation_year\");\n        }\n        // Add pagination\n        profileQuery = profileQuery.range(offset, offset + limit - 1);\n        // Execute query\n        const { data: profiles, error, count } = await profileQuery;\n        if (error) throw error;\n        // Get education and work experience for each profile\n        const profilesWithDetails = [];\n        for (const profile of profiles || []){\n            const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", profile.id);\n            const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", profile.id).order(\"is_current\", {\n                ascending: false\n            }).order(\"end_date\", {\n                ascending: false\n            });\n            profilesWithDetails.push({\n                ...profile,\n                education: education || [],\n                experience: experience || []\n            });\n        }\n        return {\n            profiles: profilesWithDetails,\n            total: count || 0,\n            totalPages: Math.ceil((count || 0) / limit)\n        };\n    } catch (error) {\n        console.error(\"Error fetching profiles:\", error);\n        throw error;\n    }\n}\n/**\n * Get a single profile by ID with education and work experience\n */ async function getProfileById(id) {\n    try {\n        const { data: profile, error } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", id).single();\n        if (error) throw error;\n        if (!profile) return null;\n        const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", id);\n        const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", id).order(\"is_current\", {\n            ascending: false\n        }).order(\"end_date\", {\n            ascending: false\n        });\n        return {\n            ...profile,\n            education: education || [],\n            experience: experience || []\n        };\n    } catch (error) {\n        console.error(`Error fetching profile with ID ${id}:`, error);\n        return null;\n    }\n}\n/**\n * Get two random profiles, excluding specified IDs\n */ async function getRandomProfiles(excludeIds = []) {\n    // Ensure excludeIds is an array of numbers\n    const safeExcludeIds = Array.isArray(excludeIds) ? excludeIds.filter((id)=>typeof id === \"number\" && !isNaN(id)) : [];\n    console.log(`DIAGNOSTICS - getRandomProfiles called with excludeIds:`, safeExcludeIds);\n    try {\n        // Check if we have any profiles at all first\n        const { count: profileCount, error: countError } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (countError) {\n            console.error(\"Error counting profiles:\", countError);\n            throw new Error(`Could not count profiles: ${countError.message}`);\n        }\n        console.log(`DIAGNOSTICS - Total profile count: ${profileCount}`);\n        if (profileCount === 0) {\n            console.error(\"No profiles found in database\");\n            throw new Error(\"No profiles found in database\");\n        }\n        // Get all profiles (limit to a reasonable number)\n        const { data: allProfiles, error: profilesError } = await supabase.from(\"profiles\").select(\"*\").limit(100); // Limit to 100 profiles max for performance\n        if (profilesError) {\n            console.error(\"Error fetching profiles:\", profilesError);\n            throw new Error(`Could not fetch profiles: ${profilesError.message}`);\n        }\n        if (!allProfiles || allProfiles.length === 0) {\n            throw new Error(\"No profiles returned from database\");\n        }\n        console.log(`DIAGNOSTICS - Fetched ${allProfiles.length} profiles successfully`);\n        // Filter out excluded profiles for the first selection\n        let availableForFirst = allProfiles;\n        if (safeExcludeIds.length > 0) {\n            availableForFirst = allProfiles.filter((profile)=>!safeExcludeIds.includes(profile.id));\n            // If no profiles left after exclusion, use all profiles\n            if (availableForFirst.length === 0) {\n                console.warn(\"No profiles left after exclusion, using all profiles for first selection\");\n                availableForFirst = allProfiles;\n            }\n        }\n        // Select a random first profile\n        const randomFirstIndex = Math.floor(Math.random() * availableForFirst.length);\n        const firstProfile = availableForFirst[randomFirstIndex];\n        console.log(`DIAGNOSTICS - First profile selected: ${firstProfile.id}`);\n        // Filter profiles for second selection (exclude the first profile and others)\n        const combinedExcludeIds = [\n            ...safeExcludeIds,\n            firstProfile.id\n        ];\n        let availableForSecond = allProfiles.filter((profile)=>!combinedExcludeIds.includes(profile.id));\n        // If no profiles available for second selection, just exclude the first profile\n        if (availableForSecond.length === 0) {\n            console.warn(\"No profiles available for second selection after exclusions\");\n            availableForSecond = allProfiles.filter((profile)=>profile.id !== firstProfile.id);\n            // If still no profiles available, return just the first profile\n            if (availableForSecond.length === 0) {\n                console.warn(\"Could not find any profile different from the first one\");\n                return [\n                    firstProfile\n                ];\n            }\n        }\n        // Select a random second profile\n        const randomSecondIndex = Math.floor(Math.random() * availableForSecond.length);\n        const secondProfile = availableForSecond[randomSecondIndex];\n        console.log(`DIAGNOSTICS - Second profile selected: ${secondProfile.id}`);\n        // Return both profiles\n        return [\n            firstProfile,\n            secondProfile\n        ];\n    } catch (err) {\n        console.error(\"Exception in getRandomProfiles:\", err);\n        throw new Error(`Failed to get random profiles: ${err.message}`);\n    }\n}\n/**\n * Record a vote in the database\n */ async function recordVote(leftProfileId, rightProfileId, winnerId, sessionId) {\n    try {\n        const voteData = {\n            winner_id: winnerId,\n            left_profile_id: leftProfileId,\n            right_profile_id: rightProfileId,\n            voter_session_id: sessionId\n        };\n        const { error } = await supabase.from(\"votes\").insert([\n            voteData\n        ]);\n        if (error) throw error;\n    } catch (error) {\n        console.error(\"Error recording vote:\", error);\n        throw error;\n    }\n}\n/**\n * Get recent votes for a user session\n */ async function getRecentVotes(sessionId, limit = 5) {\n    try {\n        const { data, error } = await supabase.from(\"votes\").select(\"*\").eq(\"voter_session_id\", sessionId).order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching recent votes:\", error);\n        return [];\n    }\n}\n/**\n * Get top profiles by ELO rating\n */ async function getTopProfiles(limit = 10) {\n    try {\n        const { data, error } = await supabase.from(\"profiles\").select(\"*\").order(\"elo_rating\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching top profiles:\", error);\n        return [];\n    }\n}\n/**\n * Count profiles in the database\n */ async function countProfiles() {\n    try {\n        const { count, error } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (error) {\n            console.error(\"Error counting profiles:\", error);\n            throw error;\n        }\n        return count || 0;\n    } catch (error) {\n        console.error(\"Error in countProfiles:\", error);\n        return 0;\n    }\n}\nmodule.exports = {\n    getProfiles,\n    getProfileById,\n    getRandomProfiles,\n    recordVote,\n    getRecentVotes,\n    getTopProfiles,\n    countProfiles\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUk7UUFDRixNQUFNLEVBQUVlLElBQUksRUFBRUUsS0FBSyxFQUFFLEdBQUcsTUFBTXJCLFNBQzNCVSxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQ1BLLEtBQUssQ0FBQyxjQUFjO1lBQUVDLFdBQVc7UUFBTSxHQUN2Q2IsS0FBSyxDQUFDQTtRQUVULElBQUlpQixPQUFPLE1BQU1BO1FBQ2pCLE9BQU9GLFFBQVEsRUFBRTtJQUNuQixFQUFFLE9BQU9FLE9BQU87UUFDZFcsUUFBUVgsS0FBSyxDQUFDLGdDQUFnQ0E7UUFDOUMsT0FBTyxFQUFFO0lBQ1g7QUFDRjtBQUVBOztDQUVDLEdBQ0QsZUFBZXNEO0lBQ2IsSUFBSTtRQUNGLE1BQU0sRUFBRS9ELEtBQUssRUFBRVMsS0FBSyxFQUFFLEdBQUcsTUFBTXJCLFNBQzVCVSxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQUs7WUFBRUMsT0FBTztZQUFTZ0MsTUFBTTtRQUFLO1FBRTVDLElBQUl2QixPQUFPO1lBQ1RXLFFBQVFYLEtBQUssQ0FBQyw0QkFBNEJBO1lBQzFDLE1BQU1BO1FBQ1I7UUFFQSxPQUFPVCxTQUFTO0lBQ2xCLEVBQUUsT0FBT1MsT0FBTztRQUNkVyxRQUFRWCxLQUFLLENBQUMsMkJBQTJCQTtRQUN6QyxPQUFPO0lBQ1Q7QUFDRjtBQUVBdUQsT0FBT0MsT0FBTyxHQUFHO0lBQ2YzRTtJQUNBK0I7SUFDQUU7SUFDQTJCO0lBQ0FXO0lBQ0FDO0lBQ0FDO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2xpYi9wcm9maWxlcy1qcy5qcz9kN2U2Il0sInNvdXJjZXNDb250ZW50IjpbIi8vIEltcG9ydCBzdXBhYmFzZSBjbGllbnRcbmNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoXCIuL3N1cGFiYXNlLmpzXCIpO1xuXG4vKipcbiAqIEdldCBwcm9maWxlcyB3aXRoIHBhZ2luYXRpb24sIGZpbHRlcmluZyBhbmQgc29ydGluZ1xuICovXG5hc3luYyBmdW5jdGlvbiBnZXRQcm9maWxlcyh7XG4gIHBhZ2UgPSAxLFxuICBsaW1pdCA9IDEwLFxuICBxdWVyeSA9IFwiXCIsXG4gIGZpbHRlciA9IFwiYWxsXCIsXG4gIHNvcnQgPSBcImVsb1wiLFxufSkge1xuICB0cnkge1xuICAgIC8vIENhbGN1bGF0ZSBvZmZzZXRcbiAgICBjb25zdCBvZmZzZXQgPSAocGFnZSAtIDEpICogbGltaXQ7XG5cbiAgICAvLyBTdGFydCBidWlsZGluZyBxdWVyeVxuICAgIGxldCBwcm9maWxlUXVlcnkgPSBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIiwgeyBjb3VudDogXCJleGFjdFwiIH0pO1xuXG4gICAgLy8gQWRkIHNlYXJjaCBmaWx0ZXIgaWYgcXVlcnkgaXMgcHJvdmlkZWRcbiAgICBpZiAocXVlcnkpIHtcbiAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5vcihcbiAgICAgICAgYGZ1bGxfbmFtZS5pbGlrZS4lJHtxdWVyeX0lLHRpdGxlLmlsaWtlLiUke3F1ZXJ5fSUsY29tcGFueS5pbGlrZS4lJHtxdWVyeX0lLG1ham9yLmlsaWtlLiUke3F1ZXJ5fSVgXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEFkZCBjYXRlZ29yeSBmaWx0ZXJcbiAgICBpZiAoZmlsdGVyICE9PSBcImFsbFwiKSB7XG4gICAgICBpZiAoZmlsdGVyID09PSBcInN0dWRlbnRzXCIpIHtcbiAgICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5LmVxKFwiaXNfc3R1ZGVudFwiLCB0cnVlKTtcbiAgICAgIH0gZWxzZSBpZiAoZmlsdGVyID09PSBcImFsdW1uaVwiKSB7XG4gICAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5lcShcImlzX3N0dWRlbnRcIiwgZmFsc2UpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgLy8gQXNzdW1lIGZpbHRlciBpcyBhIG1ham9yXG4gICAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5pbGlrZShcIm1ham9yXCIsIGAlJHtmaWx0ZXJ9JWApO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIEFkZCBzb3J0aW5nXG4gICAgaWYgKHNvcnQgPT09IFwiZWxvXCIpIHtcbiAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5vcmRlcihcImVsb19yYXRpbmdcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJuYW1lXCIpIHtcbiAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5vcmRlcihcImZ1bGxfbmFtZVwiKTtcbiAgICB9IGVsc2UgaWYgKHNvcnQgPT09IFwiZ3JhZHVhdGlvblwiKSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3JkZXIoXCJncmFkdWF0aW9uX3llYXJcIik7XG4gICAgfVxuXG4gICAgLy8gQWRkIHBhZ2luYXRpb25cbiAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkucmFuZ2Uob2Zmc2V0LCBvZmZzZXQgKyBsaW1pdCAtIDEpO1xuXG4gICAgLy8gRXhlY3V0ZSBxdWVyeVxuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZXMsIGVycm9yLCBjb3VudCB9ID0gYXdhaXQgcHJvZmlsZVF1ZXJ5O1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcblxuICAgIC8vIEdldCBlZHVjYXRpb24gYW5kIHdvcmsgZXhwZXJpZW5jZSBmb3IgZWFjaCBwcm9maWxlXG4gICAgY29uc3QgcHJvZmlsZXNXaXRoRGV0YWlscyA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwcm9maWxlIG9mIHByb2ZpbGVzIHx8IFtdKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGVkdWNhdGlvbiB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJlZHVjYXRpb25cIilcbiAgICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBwcm9maWxlLmlkKTtcblxuICAgICAgY29uc3QgeyBkYXRhOiBleHBlcmllbmNlIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcIndvcmtfZXhwZXJpZW5jZVwiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgICAuZXEoXCJwcm9maWxlX2lkXCIsIHByb2ZpbGUuaWQpXG4gICAgICAgIC5vcmRlcihcImlzX2N1cnJlbnRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgIC5vcmRlcihcImVuZF9kYXRlXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgICAgcHJvZmlsZXNXaXRoRGV0YWlscy5wdXNoKHtcbiAgICAgICAgLi4ucHJvZmlsZSxcbiAgICAgICAgZWR1Y2F0aW9uOiBlZHVjYXRpb24gfHwgW10sXG4gICAgICAgIGV4cGVyaWVuY2U6IGV4cGVyaWVuY2UgfHwgW10sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZXM6IHByb2ZpbGVzV2l0aERldGFpbHMsXG4gICAgICB0b3RhbDogY291bnQgfHwgMCxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCgoY291bnQgfHwgMCkgLyBsaW1pdCksXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCBhIHNpbmdsZSBwcm9maWxlIGJ5IElEIHdpdGggZWR1Y2F0aW9uIGFuZCB3b3JrIGV4cGVyaWVuY2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZUJ5SWQoaWQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5lcShcImlkXCIsIGlkKVxuICAgICAgLnNpbmdsZSgpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICBpZiAoIXByb2ZpbGUpIHJldHVybiBudWxsO1xuXG4gICAgY29uc3QgeyBkYXRhOiBlZHVjYXRpb24gfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcImVkdWNhdGlvblwiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5lcShcInByb2ZpbGVfaWRcIiwgaWQpO1xuXG4gICAgY29uc3QgeyBkYXRhOiBleHBlcmllbmNlIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJ3b3JrX2V4cGVyaWVuY2VcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJwcm9maWxlX2lkXCIsIGlkKVxuICAgICAgLm9yZGVyKFwiaXNfY3VycmVudFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgIC5vcmRlcihcImVuZF9kYXRlXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICAuLi5wcm9maWxlLFxuICAgICAgZWR1Y2F0aW9uOiBlZHVjYXRpb24gfHwgW10sXG4gICAgICBleHBlcmllbmNlOiBleHBlcmllbmNlIHx8IFtdLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihgRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZSB3aXRoIElEICR7aWR9OmAsIGVycm9yKTtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxufVxuXG4vKipcbiAqIEdldCB0d28gcmFuZG9tIHByb2ZpbGVzLCBleGNsdWRpbmcgc3BlY2lmaWVkIElEc1xuICovXG5hc3luYyBmdW5jdGlvbiBnZXRSYW5kb21Qcm9maWxlcyhleGNsdWRlSWRzID0gW10pIHtcbiAgLy8gRW5zdXJlIGV4Y2x1ZGVJZHMgaXMgYW4gYXJyYXkgb2YgbnVtYmVyc1xuICBjb25zdCBzYWZlRXhjbHVkZUlkcyA9IEFycmF5LmlzQXJyYXkoZXhjbHVkZUlkcylcbiAgICA/IGV4Y2x1ZGVJZHMuZmlsdGVyKChpZCkgPT4gdHlwZW9mIGlkID09PSBcIm51bWJlclwiICYmICFpc05hTihpZCkpXG4gICAgOiBbXTtcblxuICBjb25zb2xlLmxvZyhcbiAgICBgRElBR05PU1RJQ1MgLSBnZXRSYW5kb21Qcm9maWxlcyBjYWxsZWQgd2l0aCBleGNsdWRlSWRzOmAsXG4gICAgc2FmZUV4Y2x1ZGVJZHNcbiAgKTtcblxuICB0cnkge1xuICAgIC8vIENoZWNrIGlmIHdlIGhhdmUgYW55IHByb2ZpbGVzIGF0IGFsbCBmaXJzdFxuICAgIGNvbnN0IHsgY291bnQ6IHByb2ZpbGVDb3VudCwgZXJyb3I6IGNvdW50RXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSk7XG5cbiAgICBpZiAoY291bnRFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGNvdW50aW5nIHByb2ZpbGVzOlwiLCBjb3VudEVycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGNvdW50IHByb2ZpbGVzOiAke2NvdW50RXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgRElBR05PU1RJQ1MgLSBUb3RhbCBwcm9maWxlIGNvdW50OiAke3Byb2ZpbGVDb3VudH1gKTtcblxuICAgIGlmIChwcm9maWxlQ291bnQgPT09IDApIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJObyBwcm9maWxlcyBmb3VuZCBpbiBkYXRhYmFzZVwiKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcIk5vIHByb2ZpbGVzIGZvdW5kIGluIGRhdGFiYXNlXCIpO1xuICAgIH1cblxuICAgIC8vIEdldCBhbGwgcHJvZmlsZXMgKGxpbWl0IHRvIGEgcmVhc29uYWJsZSBudW1iZXIpXG4gICAgY29uc3QgeyBkYXRhOiBhbGxQcm9maWxlcywgZXJyb3I6IHByb2ZpbGVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmxpbWl0KDEwMCk7IC8vIExpbWl0IHRvIDEwMCBwcm9maWxlcyBtYXggZm9yIHBlcmZvcm1hbmNlXG5cbiAgICBpZiAocHJvZmlsZXNFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2ZpbGVzOlwiLCBwcm9maWxlc0Vycm9yKTtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZldGNoIHByb2ZpbGVzOiAke3Byb2ZpbGVzRXJyb3IubWVzc2FnZX1gKTtcbiAgICB9XG5cbiAgICBpZiAoIWFsbFByb2ZpbGVzIHx8IGFsbFByb2ZpbGVzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcHJvZmlsZXMgcmV0dXJuZWQgZnJvbSBkYXRhYmFzZVwiKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhcbiAgICAgIGBESUFHTk9TVElDUyAtIEZldGNoZWQgJHthbGxQcm9maWxlcy5sZW5ndGh9IHByb2ZpbGVzIHN1Y2Nlc3NmdWxseWBcbiAgICApO1xuXG4gICAgLy8gRmlsdGVyIG91dCBleGNsdWRlZCBwcm9maWxlcyBmb3IgdGhlIGZpcnN0IHNlbGVjdGlvblxuICAgIGxldCBhdmFpbGFibGVGb3JGaXJzdCA9IGFsbFByb2ZpbGVzO1xuICAgIGlmIChzYWZlRXhjbHVkZUlkcy5sZW5ndGggPiAwKSB7XG4gICAgICBhdmFpbGFibGVGb3JGaXJzdCA9IGFsbFByb2ZpbGVzLmZpbHRlcihcbiAgICAgICAgKHByb2ZpbGUpID0+ICFzYWZlRXhjbHVkZUlkcy5pbmNsdWRlcyhwcm9maWxlLmlkKVxuICAgICAgKTtcblxuICAgICAgLy8gSWYgbm8gcHJvZmlsZXMgbGVmdCBhZnRlciBleGNsdXNpb24sIHVzZSBhbGwgcHJvZmlsZXNcbiAgICAgIGlmIChhdmFpbGFibGVGb3JGaXJzdC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgIFwiTm8gcHJvZmlsZXMgbGVmdCBhZnRlciBleGNsdXNpb24sIHVzaW5nIGFsbCBwcm9maWxlcyBmb3IgZmlyc3Qgc2VsZWN0aW9uXCJcbiAgICAgICAgKTtcbiAgICAgICAgYXZhaWxhYmxlRm9yRmlyc3QgPSBhbGxQcm9maWxlcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWxlY3QgYSByYW5kb20gZmlyc3QgcHJvZmlsZVxuICAgIGNvbnN0IHJhbmRvbUZpcnN0SW5kZXggPSBNYXRoLmZsb29yKFxuICAgICAgTWF0aC5yYW5kb20oKSAqIGF2YWlsYWJsZUZvckZpcnN0Lmxlbmd0aFxuICAgICk7XG4gICAgY29uc3QgZmlyc3RQcm9maWxlID0gYXZhaWxhYmxlRm9yRmlyc3RbcmFuZG9tRmlyc3RJbmRleF07XG5cbiAgICBjb25zb2xlLmxvZyhgRElBR05PU1RJQ1MgLSBGaXJzdCBwcm9maWxlIHNlbGVjdGVkOiAke2ZpcnN0UHJvZmlsZS5pZH1gKTtcblxuICAgIC8vIEZpbHRlciBwcm9maWxlcyBmb3Igc2Vjb25kIHNlbGVjdGlvbiAoZXhjbHVkZSB0aGUgZmlyc3QgcHJvZmlsZSBhbmQgb3RoZXJzKVxuICAgIGNvbnN0IGNvbWJpbmVkRXhjbHVkZUlkcyA9IFsuLi5zYWZlRXhjbHVkZUlkcywgZmlyc3RQcm9maWxlLmlkXTtcbiAgICBsZXQgYXZhaWxhYmxlRm9yU2Vjb25kID0gYWxsUHJvZmlsZXMuZmlsdGVyKFxuICAgICAgKHByb2ZpbGUpID0+ICFjb21iaW5lZEV4Y2x1ZGVJZHMuaW5jbHVkZXMocHJvZmlsZS5pZClcbiAgICApO1xuXG4gICAgLy8gSWYgbm8gcHJvZmlsZXMgYXZhaWxhYmxlIGZvciBzZWNvbmQgc2VsZWN0aW9uLCBqdXN0IGV4Y2x1ZGUgdGhlIGZpcnN0IHByb2ZpbGVcbiAgICBpZiAoYXZhaWxhYmxlRm9yU2Vjb25kLmxlbmd0aCA9PT0gMCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBcIk5vIHByb2ZpbGVzIGF2YWlsYWJsZSBmb3Igc2Vjb25kIHNlbGVjdGlvbiBhZnRlciBleGNsdXNpb25zXCJcbiAgICAgICk7XG4gICAgICBhdmFpbGFibGVGb3JTZWNvbmQgPSBhbGxQcm9maWxlcy5maWx0ZXIoXG4gICAgICAgIChwcm9maWxlKSA9PiBwcm9maWxlLmlkICE9PSBmaXJzdFByb2ZpbGUuaWRcbiAgICAgICk7XG5cbiAgICAgIC8vIElmIHN0aWxsIG5vIHByb2ZpbGVzIGF2YWlsYWJsZSwgcmV0dXJuIGp1c3QgdGhlIGZpcnN0IHByb2ZpbGVcbiAgICAgIGlmIChhdmFpbGFibGVGb3JTZWNvbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcIkNvdWxkIG5vdCBmaW5kIGFueSBwcm9maWxlIGRpZmZlcmVudCBmcm9tIHRoZSBmaXJzdCBvbmVcIik7XG4gICAgICAgIHJldHVybiBbZmlyc3RQcm9maWxlXTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBTZWxlY3QgYSByYW5kb20gc2Vjb25kIHByb2ZpbGVcbiAgICBjb25zdCByYW5kb21TZWNvbmRJbmRleCA9IE1hdGguZmxvb3IoXG4gICAgICBNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlRm9yU2Vjb25kLmxlbmd0aFxuICAgICk7XG4gICAgY29uc3Qgc2Vjb25kUHJvZmlsZSA9IGF2YWlsYWJsZUZvclNlY29uZFtyYW5kb21TZWNvbmRJbmRleF07XG5cbiAgICBjb25zb2xlLmxvZyhgRElBR05PU1RJQ1MgLSBTZWNvbmQgcHJvZmlsZSBzZWxlY3RlZDogJHtzZWNvbmRQcm9maWxlLmlkfWApO1xuXG4gICAgLy8gUmV0dXJuIGJvdGggcHJvZmlsZXNcbiAgICByZXR1cm4gW2ZpcnN0UHJvZmlsZSwgc2Vjb25kUHJvZmlsZV07XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFeGNlcHRpb24gaW4gZ2V0UmFuZG9tUHJvZmlsZXM6XCIsIGVycik7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBGYWlsZWQgdG8gZ2V0IHJhbmRvbSBwcm9maWxlczogJHtlcnIubWVzc2FnZX1gKTtcbiAgfVxufVxuXG4vKipcbiAqIFJlY29yZCBhIHZvdGUgaW4gdGhlIGRhdGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIHJlY29yZFZvdGUobGVmdFByb2ZpbGVJZCwgcmlnaHRQcm9maWxlSWQsIHdpbm5lcklkLCBzZXNzaW9uSWQpIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2b3RlRGF0YSA9IHtcbiAgICAgIHdpbm5lcl9pZDogd2lubmVySWQsXG4gICAgICBsZWZ0X3Byb2ZpbGVfaWQ6IGxlZnRQcm9maWxlSWQsXG4gICAgICByaWdodF9wcm9maWxlX2lkOiByaWdodFByb2ZpbGVJZCxcbiAgICAgIHZvdGVyX3Nlc3Npb25faWQ6IHNlc3Npb25JZCxcbiAgICB9O1xuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbShcInZvdGVzXCIpLmluc2VydChbdm90ZURhdGFdKTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIHJlY29yZGluZyB2b3RlOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgcmVjZW50IHZvdGVzIGZvciBhIHVzZXIgc2Vzc2lvblxuICovXG5hc3luYyBmdW5jdGlvbiBnZXRSZWNlbnRWb3RlcyhzZXNzaW9uSWQsIGxpbWl0ID0gNSkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInZvdGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwidm90ZXJfc2Vzc2lvbl9pZFwiLCBzZXNzaW9uSWQpXG4gICAgICAub3JkZXIoXCJjcmVhdGVkX2F0XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgLmxpbWl0KGxpbWl0KTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgcmV0dXJuIGRhdGEgfHwgW107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHJlY2VudCB2b3RlczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIEdldCB0b3AgcHJvZmlsZXMgYnkgRUxPIHJhdGluZ1xuICovXG5hc3luYyBmdW5jdGlvbiBnZXRUb3BQcm9maWxlcyhsaW1pdCA9IDEwKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAub3JkZXIoXCJlbG9fcmF0aW5nXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgLmxpbWl0KGxpbWl0KTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgcmV0dXJuIGRhdGEgfHwgW107XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHRvcCBwcm9maWxlczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBbXTtcbiAgfVxufVxuXG4vKipcbiAqIENvdW50IHByb2ZpbGVzIGluIHRoZSBkYXRhYmFzZVxuICovXG5hc3luYyBmdW5jdGlvbiBjb3VudFByb2ZpbGVzKCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgY291bnQsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIiwgeyBjb3VudDogXCJleGFjdFwiLCBoZWFkOiB0cnVlIH0pO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY291bnRpbmcgcHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICAgIHRocm93IGVycm9yO1xuICAgIH1cblxuICAgIHJldHVybiBjb3VudCB8fCAwO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBpbiBjb3VudFByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIDA7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSB7XG4gIGdldFByb2ZpbGVzLFxuICBnZXRQcm9maWxlQnlJZCxcbiAgZ2V0UmFuZG9tUHJvZmlsZXMsXG4gIHJlY29yZFZvdGUsXG4gIGdldFJlY2VudFZvdGVzLFxuICBnZXRUb3BQcm9maWxlcyxcbiAgY291bnRQcm9maWxlcyxcbn07XG4iXSwibmFtZXMiOlsic3VwYWJhc2UiLCJyZXF1aXJlIiwiZ2V0UHJvZmlsZXMiLCJwYWdlIiwibGltaXQiLCJxdWVyeSIsImZpbHRlciIsInNvcnQiLCJvZmZzZXQiLCJwcm9maWxlUXVlcnkiLCJmcm9tIiwic2VsZWN0IiwiY291bnQiLCJvciIsImVxIiwiaWxpa2UiLCJvcmRlciIsImFzY2VuZGluZyIsInJhbmdlIiwiZGF0YSIsInByb2ZpbGVzIiwiZXJyb3IiLCJwcm9maWxlc1dpdGhEZXRhaWxzIiwicHJvZmlsZSIsImVkdWNhdGlvbiIsImlkIiwiZXhwZXJpZW5jZSIsInB1c2giLCJ0b3RhbCIsInRvdGFsUGFnZXMiLCJNYXRoIiwiY2VpbCIsImNvbnNvbGUiLCJnZXRQcm9maWxlQnlJZCIsInNpbmdsZSIsImdldFJhbmRvbVByb2ZpbGVzIiwiZXhjbHVkZUlkcyIsInNhZmVFeGNsdWRlSWRzIiwiQXJyYXkiLCJpc0FycmF5IiwiaXNOYU4iLCJsb2ciLCJwcm9maWxlQ291bnQiLCJjb3VudEVycm9yIiwiaGVhZCIsIkVycm9yIiwibWVzc2FnZSIsImFsbFByb2ZpbGVzIiwicHJvZmlsZXNFcnJvciIsImxlbmd0aCIsImF2YWlsYWJsZUZvckZpcnN0IiwiaW5jbHVkZXMiLCJ3YXJuIiwicmFuZG9tRmlyc3RJbmRleCIsImZsb29yIiwicmFuZG9tIiwiZmlyc3RQcm9maWxlIiwiY29tYmluZWRFeGNsdWRlSWRzIiwiYXZhaWxhYmxlRm9yU2Vjb25kIiwicmFuZG9tU2Vjb25kSW5kZXgiLCJzZWNvbmRQcm9maWxlIiwiZXJyIiwicmVjb3JkVm90ZSIsImxlZnRQcm9maWxlSWQiLCJyaWdodFByb2ZpbGVJZCIsIndpbm5lcklkIiwic2Vzc2lvbklkIiwidm90ZURhdGEiLCJ3aW5uZXJfaWQiLCJsZWZ0X3Byb2ZpbGVfaWQiLCJyaWdodF9wcm9maWxlX2lkIiwidm90ZXJfc2Vzc2lvbl9pZCIsImluc2VydCIsImdldFJlY2VudFZvdGVzIiwiZ2V0VG9wUHJvZmlsZXMiLCJjb3VudFByb2ZpbGVzIiwibW9kdWxlIiwiZXhwb3J0cyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/profiles-js.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { createClient } = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n(__webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\").config)({\n    path: \".env.local\"\n});\n// Get environment variables with fallbacks for development\nconst supabaseUrl = \"https://qbzwhueywwpqkucwfnsb.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFiendodWV5d3dwcWt1Y3dmbnNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4MDk4MzEsImV4cCI6MjA1OTM4NTgzMX0.YiZec-9dg4z32pqCuSGGB3uyqrEZs5zm-b_unS_2czs\" || 0;\n// Create Supabase client\nconst supabase = createClient(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: false\n    }\n});\n// Log initialization for debugging\nconsole.log(`Supabase JS client initialized with URL: ${supabaseUrl.substring(0, 20)}...`);\n// Export the client\nmodule.exports = {\n    supabase\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sRUFBRUEsWUFBWSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDLDhGQUF1QjtBQUN4REEscUZBQXdCLENBQUM7SUFBRUUsTUFBTTtBQUFhO0FBRTlDLDJEQUEyRDtBQUMzRCxNQUFNQyxjQUNKQywwQ0FBb0MsSUFDcEMsQ0FBdUM7QUFDekMsTUFBTUcsa0JBQ0pILGtOQUF5QyxJQUFJLENBQWU7QUFFOUQseUJBQXlCO0FBQ3pCLE1BQU1LLFdBQVdWLGFBQWFJLGFBQWFJLGlCQUFpQjtJQUMxREcsTUFBTTtRQUNKQyxnQkFBZ0I7SUFDbEI7QUFDRjtBQUVBLG1DQUFtQztBQUNuQ0MsUUFBUUMsR0FBRyxDQUNULENBQUMseUNBQXlDLEVBQUVWLFlBQVlXLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO0FBRy9FLG9CQUFvQjtBQUNwQkMsT0FBT0MsT0FBTyxHQUFHO0lBQUVQO0FBQVMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSByZXF1aXJlKFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCIpO1xucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoeyBwYXRoOiBcIi5lbnYubG9jYWxcIiB9KTtcblxuLy8gR2V0IGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGZhbGxiYWNrcyBmb3IgZGV2ZWxvcG1lbnRcbmNvbnN0IHN1cGFiYXNlVXJsID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8XG4gIFwiaHR0cHM6Ly95b3VyLXN1cGFiYXNlLXVybC5zdXBhYmFzZS5jb1wiO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgXCJ5b3VyLWFub24ta2V5XCI7XG5cbi8vIENyZWF0ZSBTdXBhYmFzZSBjbGllbnRcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgYXV0aDoge1xuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgfSxcbn0pO1xuXG4vLyBMb2cgaW5pdGlhbGl6YXRpb24gZm9yIGRlYnVnZ2luZ1xuY29uc29sZS5sb2coXG4gIGBTdXBhYmFzZSBKUyBjbGllbnQgaW5pdGlhbGl6ZWQgd2l0aCBVUkw6ICR7c3VwYWJhc2VVcmwuc3Vic3RyaW5nKDAsIDIwKX0uLi5gXG4pO1xuXG4vLyBFeHBvcnQgdGhlIGNsaWVudFxubW9kdWxlLmV4cG9ydHMgPSB7IHN1cGFiYXNlIH07XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwicmVxdWlyZSIsImNvbmZpZyIsInBhdGgiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/dotenv","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frishikanaparti%2FGtranked%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();