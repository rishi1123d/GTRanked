"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/profiles/random/route";
exports.ids = ["app/api/profiles/random/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_vik_GTRanked_app_api_profiles_random_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/profiles/random/route.ts */ \"(rsc)/./app/api/profiles/random/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/profiles/random/route\",\n        pathname: \"/api/profiles/random\",\n        filename: \"route\",\n        bundlePath: \"app/api/profiles/random/route\"\n    },\n    resolvedPagePath: \"/Users/vik/GTRanked/app/api/profiles/random/route.ts\",\n    nextConfigOutput,\n    userland: _Users_vik_GTRanked_app_api_profiles_random_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/profiles/random/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZwcm9maWxlcyUyRnJhbmRvbSUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGcHJvZmlsZXMlMkZyYW5kb20lMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZwcm9maWxlcyUyRnJhbmRvbSUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpayUyRkdUUmFua2VkJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnZpayUyRkdUUmFua2VkJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNJO0FBQ2pGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvP2EwNGQiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Zpay9HVFJhbmtlZC9hcHAvYXBpL3Byb2ZpbGVzL3JhbmRvbS9yb3V0ZS50c1wiO1xuLy8gV2UgaW5qZWN0IHRoZSBuZXh0Q29uZmlnT3V0cHV0IGhlcmUgc28gdGhhdCB3ZSBjYW4gdXNlIHRoZW0gaW4gdGhlIHJvdXRlXG4vLyBtb2R1bGUuXG5jb25zdCBuZXh0Q29uZmlnT3V0cHV0ID0gXCJcIlxuY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgQXBwUm91dGVSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuQVBQX1JPVVRFLFxuICAgICAgICBwYWdlOiBcIi9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvcHJvZmlsZXMvcmFuZG9tXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9wcm9maWxlcy9yYW5kb20vcm91dGVcIlxuICAgIH0sXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvdmlrL0dUUmFua2VkL2FwcC9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9wcm9maWxlcy9yYW5kb20vcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/profiles/random/route.ts":
/*!******************************************!*\
  !*** ./app/api/profiles/random/route.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_profiles_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/profiles-js */ \"(rsc)/./lib/profiles-js.js\");\n/* harmony import */ var _lib_profiles_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_lib_profiles_js__WEBPACK_IMPORTED_MODULE_1__);\n\n\nconst { supabase } = __webpack_require__(/*! @/lib/supabase.js */ \"(rsc)/./lib/supabase.js\");\n/**\n * Get random profiles from the database, excluding specific IDs\n * This now implements a smart ranking system to ensure users see a mix of high and average ELO profiles\n */ async function getRandomProfiles(excludeIds = []) {\n    console.log(\"DIAGNOSTICS - getRandomProfiles called with excludeIds:\", excludeIds);\n    try {\n        // First, check how many profiles we have in total\n        const { count, error: countError } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (countError) {\n            console.error(\"Error getting profile count:\", countError);\n            return [];\n        }\n        console.log(\"DIAGNOSTICS - Total profile count:\", count);\n        // We'll use a weighted approach:\n        // - 30% chance of selecting a high-ELO profile (top 15%)\n        // - 70% chance of selecting a random profile from the rest\n        // Get potential high-ELO profiles (top 15%)\n        const topProfileCount = Math.ceil((count || 0) * 0.15);\n        const { data: topProfiles, error: topError } = await supabase.from(\"profiles\").select(\"*\").not(\"id\", \"in\", `(${excludeIds.join(\",\")})`).order(\"elo_rating\", {\n            ascending: false\n        }).limit(topProfileCount);\n        if (topError) {\n            console.error(\"Error getting top profiles:\", topError);\n            return [];\n        }\n        // Now get a larger pool of regular profiles\n        const { data: regularProfiles, error: regularError } = await supabase.from(\"profiles\").select(\"*\").not(\"id\", \"in\", `(${excludeIds.join(\",\")})`).order(\"id\", {\n            ascending: false\n        }) // Just use ID for random-ish selection from newer profiles\n        .limit(50);\n        if (regularError) {\n            console.error(\"Error getting regular profiles:\", regularError);\n            return [];\n        }\n        console.log(`DIAGNOSTICS - Fetched ${topProfiles.length} top profiles and ${regularProfiles.length} regular profiles`);\n        // Function to select two distinct profiles with our weighted approach\n        const selectTwoProfiles = ()=>{\n            const selectedProfiles = [];\n            // For first profile: 30% chance of high-ELO, 70% chance of regular\n            const useHighEloFirst = Math.random() < 0.3 && topProfiles.length > 0;\n            if (useHighEloFirst && topProfiles.length > 0) {\n                // Select random high-ELO profile\n                const randomIndex = Math.floor(Math.random() * topProfiles.length);\n                selectedProfiles.push(topProfiles[randomIndex]);\n                // Remove from pool to avoid duplicates\n                topProfiles.splice(randomIndex, 1);\n            } else if (regularProfiles.length > 0) {\n                // Select random regular profile\n                const randomIndex = Math.floor(Math.random() * regularProfiles.length);\n                selectedProfiles.push(regularProfiles[randomIndex]);\n                // Remove from pool to avoid duplicates\n                regularProfiles.splice(randomIndex, 1);\n            }\n            // For second profile: If we used high-ELO first, use regular now\n            // If we used regular first, 30% chance of high-ELO, 70% chance of regular\n            const useHighEloSecond = !useHighEloFirst && Math.random() < 0.3 && topProfiles.length > 0;\n            if (useHighEloSecond && topProfiles.length > 0) {\n                const randomIndex = Math.floor(Math.random() * topProfiles.length);\n                selectedProfiles.push(topProfiles[randomIndex]);\n            } else if (regularProfiles.length > 0) {\n                const randomIndex = Math.floor(Math.random() * regularProfiles.length);\n                selectedProfiles.push(regularProfiles[randomIndex]);\n            }\n            return selectedProfiles;\n        };\n        // Select two profiles with our algorithm\n        const selectedProfiles = selectTwoProfiles();\n        // If we couldn't get two profiles, fall back to simple random selection\n        if (selectedProfiles.length < 2) {\n            const { data: fallbackProfiles, error: fallbackError } = await supabase.from(\"profiles\").select(\"*\").not(\"id\", \"in\", `(${excludeIds.join(\",\")})`).order(\"RANDOM()\").limit(2);\n            if (fallbackError) {\n                console.error(\"Error getting fallback profiles:\", fallbackError);\n                return [];\n            }\n            console.log(`DIAGNOSTICS - Fell back to random selection, got ${fallbackProfiles.length} profiles`);\n            return fallbackProfiles;\n        }\n        // Perform a join with education to get those records too\n        const selectedProfileIds = selectedProfiles.map((profile)=>profile.id);\n        const { data: profilesWithRelations, error: profilesError } = await supabase.from(\"profiles\").select(`\n        *,\n        education:education(*),\n        skills:skills(*)\n      `).in(\"id\", selectedProfileIds).order(\"elo_rating\", {\n            ascending: false\n        });\n        if (profilesError) {\n            console.error(\"Error getting profiles with relations:\", profilesError);\n            return [];\n        }\n        console.log(`DIAGNOSTICS - First profile selected: ${selectedProfiles[0].id}`);\n        console.log(`DIAGNOSTICS - Second profile selected: ${selectedProfiles[1].id}`);\n        return profilesWithRelations;\n    } catch (error) {\n        console.error(\"Error in getRandomProfiles:\", error);\n        return [];\n    }\n}\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const excludeParam = searchParams.get(\"exclude\") || \"\";\n        // Convert exclude list to array of numbers\n        const excludeIds = excludeParam ? excludeParam.split(\",\").map((id)=>parseInt(id, 10)).filter((id)=>!isNaN(id)) : [];\n        console.log(`Fetching random profiles with excludeIds: ${JSON.stringify(excludeIds)}`);\n        // Get random profiles from Supabase\n        const basicProfiles = await getRandomProfiles(excludeIds);\n        // Check if profiles need enrichment and enrich them\n        const detailedProfiles = [];\n        for (const profile of basicProfiles){\n            try {\n                let enrichedProfile;\n                // Check if profile needs enrichment\n                if (profile.is_enriched !== true) {\n                    console.log(`Profile ${profile.id} (${profile.full_name}) needs enrichment`);\n                    // Call the enrichment endpoint\n                    const enrichResponse = await fetch(`${process.env.VERCEL_URL || \"http://localhost:3000\"}/api/profiles/enrich?aviato_id=${profile.aviato_id}`, {\n                        method: \"GET\"\n                    });\n                    if (!enrichResponse.ok) {\n                        console.error(`Error enriching profile ${profile.id}: ${enrichResponse.statusText}`);\n                        continue;\n                    }\n                    const enrichResult = await enrichResponse.json();\n                    enrichedProfile = enrichResult.profile;\n                    console.log(`Successfully enriched profile ${profile.id} ${enrichResult.enriched ? \"(newly enriched)\" : \"(already enriched)\"}`);\n                } else {\n                    // Profile is already enriched, just get the details\n                    enrichedProfile = await (0,_lib_profiles_js__WEBPACK_IMPORTED_MODULE_1__.getProfileById)(profile.id);\n                    console.log(`Using already enriched profile ${profile.id}`);\n                }\n                if (enrichedProfile) {\n                    detailedProfiles.push(enrichedProfile);\n                }\n            } catch (error) {\n                console.error(`Error processing profile ${profile.id}:`, error);\n            }\n        }\n        // Transform profiles to match frontend format\n        const transformedProfiles = detailedProfiles.map((profile)=>{\n            // Get experiences from both direct profile fields and experience table\n            const experiences = [];\n            // Add top experiences from direct profile fields if available\n            if (profile.exp1_title && profile.exp1_company) {\n                const startYear = profile.exp1_start_date ? new Date(profile.exp1_start_date).getFullYear() : \"\";\n                const endYear = profile.exp1_is_current ? \"Present\" : profile.exp1_end_date ? new Date(profile.exp1_end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                experiences.push({\n                    title: profile.exp1_title,\n                    company: profile.exp1_company,\n                    duration\n                });\n            }\n            if (profile.exp2_title && profile.exp2_company) {\n                const startYear = profile.exp2_start_date ? new Date(profile.exp2_start_date).getFullYear() : \"\";\n                const endYear = profile.exp2_is_current ? \"Present\" : profile.exp2_end_date ? new Date(profile.exp2_end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                experiences.push({\n                    title: profile.exp2_title,\n                    company: profile.exp2_company,\n                    duration\n                });\n            }\n            if (profile.exp3_title && profile.exp3_company) {\n                const startYear = profile.exp3_start_date ? new Date(profile.exp3_start_date).getFullYear() : \"\";\n                const endYear = profile.exp3_is_current ? \"Present\" : profile.exp3_end_date ? new Date(profile.exp3_end_date).getFullYear() : \"\";\n                const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                experiences.push({\n                    title: profile.exp3_title,\n                    company: profile.exp3_company,\n                    duration\n                });\n            }\n            // Format additional experiences from experience table\n            if (profile.experience && profile.experience.length > 0) {\n                // Start at index 0 if we don't have any direct experiences, otherwise add to the existing ones\n                const additionalExperiences = profile.experience.map((exp)=>{\n                    const startYear = exp.start_date ? new Date(exp.start_date).getFullYear() : \"\";\n                    const endYear = exp.is_current ? \"Present\" : exp.end_date ? new Date(exp.end_date).getFullYear() : \"\";\n                    const duration = startYear && endYear ? `${startYear} - ${endYear}` : \"\";\n                    return {\n                        title: exp.title || \"\",\n                        company: exp.company_name || \"\",\n                        duration\n                    };\n                });\n                // Add any experiences that aren't already included (avoid duplicates)\n                for (const exp of additionalExperiences){\n                    const isDuplicate = experiences.some((e)=>e.title === exp.title && e.company === exp.company);\n                    if (!isDuplicate) {\n                        experiences.push(exp);\n                    }\n                }\n            }\n            // Get skills from skills table\n            const skills = profile.skills ? profile.skills.map((skill)=>skill.name || \"\") : [];\n            // Get degree from education if available\n            const degree = profile.education && profile.education.length > 0 ? profile.education[0].degree || \"BS\" : \"BS\";\n            // Extract major from headline if it's not available in the profile\n            let major = profile.major || \"\";\n            // If major is empty, try to extract it from the headline\n            if (!major && profile.headline) {\n                // Look for common patterns like \"CS @ Georgia Tech\" or \"studying Computer Science at GT\"\n                const headline = profile.headline.toLowerCase();\n                if (headline.includes(\"cs @\") || headline.includes(\"cs at\")) {\n                    major = \"Computer Science\";\n                } else if (headline.includes(\"computer science\")) {\n                    major = \"Computer Science\";\n                } else if (headline.includes(\"electrical engineering\")) {\n                    major = \"Electrical Engineering\";\n                } else if (headline.includes(\"mechanical engineering\")) {\n                    major = \"Mechanical Engineering\";\n                } else if (headline.includes(\"business\")) {\n                    major = \"Business Administration\";\n                } else if (headline.includes(\"data science\")) {\n                    major = \"Data Science\";\n                }\n            }\n            // If still no major found, use part of the degree if it contains \"in\"\n            if (!major && degree && degree.includes(\" in \")) {\n                const parts = degree.split(\" in \");\n                if (parts.length > 1) {\n                    major = parts[1];\n                }\n            }\n            return {\n                id: profile.id.toString(),\n                name: profile.full_name || \"Unknown\",\n                title: profile.title || \"\",\n                company: profile.company || \"\",\n                major: major || \"Unknown Major\",\n                graduationYear: profile.graduation_year || 0,\n                isStudent: profile.is_student,\n                elo: profile.elo_rating,\n                location: profile.location || \"\",\n                avatar: `/avatars/${Math.floor(Math.random() * 10) + 1}.png`,\n                degree,\n                skills,\n                experiences,\n                linkedinUrl: profile.linkedin_url || null,\n                education: profile.education || []\n            };\n        });\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            profiles: transformedProfiles\n        });\n    } catch (error) {\n        console.error(\"Error fetching random profiles:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch random profiles\",\n            message: error instanceof Error ? error.message : \"Unknown error\",\n            profiles: []\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3Byb2ZpbGVzL3JhbmRvbS9yb3V0ZS50cyIsIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQTJDO0FBRVE7QUFDbkQsTUFBTSxFQUFFRSxRQUFRLEVBQUUsR0FBR0MsbUJBQU9BLENBQUMsa0RBQW1CO0FBcUJoRDs7O0NBR0MsR0FDRCxlQUFlQyxrQkFBa0JDLGFBQXVCLEVBQUU7SUFDeERDLFFBQVFDLEdBQUcsQ0FBQywyREFBMkRGO0lBRXZFLElBQUk7UUFDRixrREFBa0Q7UUFDbEQsTUFBTSxFQUFFRyxLQUFLLEVBQUVDLE9BQU9DLFVBQVUsRUFBRSxHQUFHLE1BQU1SLFNBQ3hDUyxJQUFJLENBQUMsWUFDTEMsTUFBTSxDQUFDLEtBQUs7WUFBRUosT0FBTztZQUFTSyxNQUFNO1FBQUs7UUFFNUMsSUFBSUgsWUFBWTtZQUNkSixRQUFRRyxLQUFLLENBQUMsZ0NBQWdDQztZQUM5QyxPQUFPLEVBQUU7UUFDWDtRQUVBSixRQUFRQyxHQUFHLENBQUMsc0NBQXNDQztRQUVsRCxpQ0FBaUM7UUFDakMseURBQXlEO1FBQ3pELDJEQUEyRDtRQUUzRCw0Q0FBNEM7UUFDNUMsTUFBTU0sa0JBQWtCQyxLQUFLQyxJQUFJLENBQUMsQ0FBQ1IsU0FBUyxLQUFLO1FBQ2pELE1BQU0sRUFBRVMsTUFBTUMsV0FBVyxFQUFFVCxPQUFPVSxRQUFRLEVBQUUsR0FBRyxNQUFNakIsU0FDbERTLElBQUksQ0FBQyxZQUNMQyxNQUFNLENBQUMsS0FDUFEsR0FBRyxDQUFDLE1BQU0sTUFBTSxDQUFDLENBQUMsRUFBRWYsV0FBV2dCLElBQUksQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUMzQ0MsS0FBSyxDQUFDLGNBQWM7WUFBRUMsV0FBVztRQUFNLEdBQ3ZDQyxLQUFLLENBQUNWO1FBRVQsSUFBSUssVUFBVTtZQUNaYixRQUFRRyxLQUFLLENBQUMsK0JBQStCVTtZQUM3QyxPQUFPLEVBQUU7UUFDWDtRQUVBLDRDQUE0QztRQUM1QyxNQUFNLEVBQUVGLE1BQU1RLGVBQWUsRUFB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U0FBUyxJQUFJLEVBQUU7WUFDcEM7UUFDRjtRQUVBLE9BQU9sSCxxREFBWUEsQ0FBQzBFLElBQUksQ0FBQztZQUFFeUQsVUFBVXZEO1FBQW9CO0lBQzNELEVBQUUsT0FBT25FLE9BQU87UUFDZEgsUUFBUUcsS0FBSyxDQUFDLG1DQUFtQ0E7UUFDakQsT0FBT1QscURBQVlBLENBQUMwRSxJQUFJLENBQ3RCO1lBQ0VqRSxPQUFPO1lBQ1AySCxTQUFTM0gsaUJBQWlCNEgsUUFBUTVILE1BQU0ySCxPQUFPLEdBQUc7WUFDbERELFVBQVUsRUFBRTtRQUNkLEdBQ0E7WUFBRUcsUUFBUTtRQUFJO0lBRWxCO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2FwcC9hcGkvcHJvZmlsZXMvcmFuZG9tL3JvdXRlLnRzP2Q5MmYiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSBcIm5leHQvc2VydmVyXCI7XG5pbXBvcnQgdHlwZSB7IFByb2ZpbGVUeXBlIH0gZnJvbSBcIkAvbGliL3R5cGVzXCI7XG5pbXBvcnQgeyBnZXRQcm9maWxlQnlJZCB9IGZyb20gXCJAL2xpYi9wcm9maWxlcy1qc1wiO1xuY29uc3QgeyBzdXBhYmFzZSB9ID0gcmVxdWlyZShcIkAvbGliL3N1cGFiYXNlLmpzXCIpO1xuXG4vLyBEZWZpbmUgYSB0eXBlIGZvciB0aGUgcHJvZmlsZSByZXR1cm5lZCBmcm9tIFN1cGFiYXNlXG5pbnRlcmZhY2UgU3VwYWJhc2VQcm9maWxlIHtcbiAgaWQ6IG51bWJlcjtcbiAgYXZpYXRvX2lkOiBzdHJpbmc7XG4gIGZ1bGxfbmFtZTogc3RyaW5nO1xuICBoZWFkbGluZT86IHN0cmluZztcbiAgdGl0bGU/OiBzdHJpbmc7XG4gIGNvbXBhbnk/OiBzdHJpbmc7XG4gIG1ham9yPzogc3RyaW5nO1xuICBncmFkdWF0aW9uX3llYXI/OiBudW1iZXI7XG4gIGlzX3N0dWRlbnQ6IGJvb2xlYW47XG4gIGVsb19yYXRpbmc6IG51bWJlcjtcbiAgbG9jYXRpb24/OiBzdHJpbmc7XG4gIGlzX2VucmljaGVkPzogYm9vbGVhbjtcbiAgZWR1Y2F0aW9uPzogYW55W107XG4gIHNraWxscz86IGFueVtdO1xuICBba2V5OiBzdHJpbmddOiBhbnk7IC8vIEFsbG93IGZvciBvdGhlciBmaWVsZHNcbn1cblxuLyoqXG4gKiBHZXQgcmFuZG9tIHByb2ZpbGVzIGZyb20gdGhlIGRhdGFiYXNlLCBleGNsdWRpbmcgc3BlY2lmaWMgSURzXG4gKiBUaGlzIG5vdyBpbXBsZW1lbnRzIGEgc21hcnQgcmFua2luZyBzeXN0ZW0gdG8gZW5zdXJlIHVzZXJzIHNlZSBhIG1peCBvZiBoaWdoIGFuZCBhdmVyYWdlIEVMTyBwcm9maWxlc1xuICovXG5hc3luYyBmdW5jdGlvbiBnZXRSYW5kb21Qcm9maWxlcyhleGNsdWRlSWRzOiBudW1iZXJbXSA9IFtdKTogUHJvbWlzZTxTdXBhYmFzZVByb2ZpbGVbXT4ge1xuICBjb25zb2xlLmxvZyhcIkRJQUdOT1NUSUNTIC0gZ2V0UmFuZG9tUHJvZmlsZXMgY2FsbGVkIHdpdGggZXhjbHVkZUlkczpcIiwgZXhjbHVkZUlkcyk7XG5cbiAgdHJ5IHtcbiAgICAvLyBGaXJzdCwgY2hlY2sgaG93IG1hbnkgcHJvZmlsZXMgd2UgaGF2ZSBpbiB0b3RhbFxuICAgIGNvbnN0IHsgY291bnQsIGVycm9yOiBjb3VudEVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoJyonLCB7IGNvdW50OiAnZXhhY3QnLCBoZWFkOiB0cnVlIH0pO1xuICAgIFxuICAgIGlmIChjb3VudEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBwcm9maWxlIGNvdW50OlwiLCBjb3VudEVycm9yKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coXCJESUFHTk9TVElDUyAtIFRvdGFsIHByb2ZpbGUgY291bnQ6XCIsIGNvdW50KTtcbiAgICBcbiAgICAvLyBXZSdsbCB1c2UgYSB3ZWlnaHRlZCBhcHByb2FjaDpcbiAgICAvLyAtIDMwJSBjaGFuY2Ugb2Ygc2VsZWN0aW5nIGEgaGlnaC1FTE8gcHJvZmlsZSAodG9wIDE1JSlcbiAgICAvLyAtIDcwJSBjaGFuY2Ugb2Ygc2VsZWN0aW5nIGEgcmFuZG9tIHByb2ZpbGUgZnJvbSB0aGUgcmVzdFxuICAgIFxuICAgIC8vIEdldCBwb3RlbnRpYWwgaGlnaC1FTE8gcHJvZmlsZXMgKHRvcCAxNSUpXG4gICAgY29uc3QgdG9wUHJvZmlsZUNvdW50ID0gTWF0aC5jZWlsKChjb3VudCB8fCAwKSAqIDAuMTUpO1xuICAgIGNvbnN0IHsgZGF0YTogdG9wUHJvZmlsZXMsIGVycm9yOiB0b3BFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKCdwcm9maWxlcycpXG4gICAgICAuc2VsZWN0KCcqJylcbiAgICAgIC5ub3QoJ2lkJywgJ2luJywgYCgke2V4Y2x1ZGVJZHMuam9pbignLCcpfSlgKVxuICAgICAgLm9yZGVyKCdlbG9fcmF0aW5nJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQodG9wUHJvZmlsZUNvdW50KTtcbiAgICBcbiAgICBpZiAodG9wRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHRvcCBwcm9maWxlczpcIiwgdG9wRXJyb3IpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cbiAgICBcbiAgICAvLyBOb3cgZ2V0IGEgbGFyZ2VyIHBvb2wgb2YgcmVndWxhciBwcm9maWxlc1xuICAgIGNvbnN0IHsgZGF0YTogcmVndWxhclByb2ZpbGVzLCBlcnJvcjogcmVndWxhckVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3Byb2ZpbGVzJylcbiAgICAgIC5zZWxlY3QoJyonKVxuICAgICAgLm5vdCgnaWQnLCAnaW4nLCBgKCR7ZXhjbHVkZUlkcy5qb2luKCcsJyl9KWApXG4gICAgICAub3JkZXIoJ2lkJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pIC8vIEp1c3QgdXNlIElEIGZvciByYW5kb20taXNoIHNlbGVjdGlvbiBmcm9tIG5ld2VyIHByb2ZpbGVzXG4gICAgICAubGltaXQoNTApO1xuICAgIFxuICAgIGlmIChyZWd1bGFyRXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIHJlZ3VsYXIgcHJvZmlsZXM6XCIsIHJlZ3VsYXJFcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIEZldGNoZWQgJHt0b3BQcm9maWxlcy5sZW5ndGh9IHRvcCBwcm9maWxlcyBhbmQgJHtyZWd1bGFyUHJvZmlsZXMubGVuZ3RofSByZWd1bGFyIHByb2ZpbGVzYCk7XG4gICAgXG4gICAgLy8gRnVuY3Rpb24gdG8gc2VsZWN0IHR3byBkaXN0aW5jdCBwcm9maWxlcyB3aXRoIG91ciB3ZWlnaHRlZCBhcHByb2FjaFxuICAgIGNvbnN0IHNlbGVjdFR3b1Byb2ZpbGVzID0gKCkgPT4ge1xuICAgICAgY29uc3Qgc2VsZWN0ZWRQcm9maWxlczogU3VwYWJhc2VQcm9maWxlW10gPSBbXTtcbiAgICAgIFxuICAgICAgLy8gRm9yIGZpcnN0IHByb2ZpbGU6IDMwJSBjaGFuY2Ugb2YgaGlnaC1FTE8sIDcwJSBjaGFuY2Ugb2YgcmVndWxhclxuICAgICAgY29uc3QgdXNlSGlnaEVsb0ZpcnN0ID0gTWF0aC5yYW5kb20oKSA8IDAuMyAmJiB0b3BQcm9maWxlcy5sZW5ndGggPiAwO1xuICAgICAgXG4gICAgICBpZiAodXNlSGlnaEVsb0ZpcnN0ICYmIHRvcFByb2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2VsZWN0IHJhbmRvbSBoaWdoLUVMTyBwcm9maWxlXG4gICAgICAgIGNvbnN0IHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogdG9wUHJvZmlsZXMubGVuZ3RoKTtcbiAgICAgICAgc2VsZWN0ZWRQcm9maWxlcy5wdXNoKHRvcFByb2ZpbGVzW3JhbmRvbUluZGV4XSk7XG4gICAgICAgIFxuICAgICAgICAvLyBSZW1vdmUgZnJvbSBwb29sIHRvIGF2b2lkIGR1cGxpY2F0ZXNcbiAgICAgICAgdG9wUHJvZmlsZXMuc3BsaWNlKHJhbmRvbUluZGV4LCAxKTtcbiAgICAgIH0gZWxzZSBpZiAocmVndWxhclByb2ZpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgLy8gU2VsZWN0IHJhbmRvbSByZWd1bGFyIHByb2ZpbGVcbiAgICAgICAgY29uc3QgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiByZWd1bGFyUHJvZmlsZXMubGVuZ3RoKTtcbiAgICAgICAgc2VsZWN0ZWRQcm9maWxlcy5wdXNoKHJlZ3VsYXJQcm9maWxlc1tyYW5kb21JbmRleF0pO1xuICAgICAgICBcbiAgICAgICAgLy8gUmVtb3ZlIGZyb20gcG9vbCB0byBhdm9pZCBkdXBsaWNhdGVzXG4gICAgICAgIHJlZ3VsYXJQcm9maWxlcy5zcGxpY2UocmFuZG9tSW5kZXgsIDEpO1xuICAgICAgfVxuICAgICAgXG4gICAgICAvLyBGb3Igc2Vjb25kIHByb2ZpbGU6IElmIHdlIHVzZWQgaGlnaC1FTE8gZmlyc3QsIHVzZSByZWd1bGFyIG5vd1xuICAgICAgLy8gSWYgd2UgdXNlZCByZWd1bGFyIGZpcnN0LCAzMCUgY2hhbmNlIG9mIGhpZ2gtRUxPLCA3MCUgY2hhbmNlIG9mIHJlZ3VsYXJcbiAgICAgIGNvbnN0IHVzZUhpZ2hFbG9TZWNvbmQgPSAhdXNlSGlnaEVsb0ZpcnN0ICYmIE1hdGgucmFuZG9tKCkgPCAwLjMgJiYgdG9wUHJvZmlsZXMubGVuZ3RoID4gMDtcbiAgICAgIFxuICAgICAgaWYgKHVzZUhpZ2hFbG9TZWNvbmQgJiYgdG9wUHJvZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHRvcFByb2ZpbGVzLmxlbmd0aCk7XG4gICAgICAgIHNlbGVjdGVkUHJvZmlsZXMucHVzaCh0b3BQcm9maWxlc1tyYW5kb21JbmRleF0pO1xuICAgICAgfSBlbHNlIGlmIChyZWd1bGFyUHJvZmlsZXMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCByYW5kb21JbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIHJlZ3VsYXJQcm9maWxlcy5sZW5ndGgpO1xuICAgICAgICBzZWxlY3RlZFByb2ZpbGVzLnB1c2gocmVndWxhclByb2ZpbGVzW3JhbmRvbUluZGV4XSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIHJldHVybiBzZWxlY3RlZFByb2ZpbGVzO1xuICAgIH07XG4gICAgXG4gICAgLy8gU2VsZWN0IHR3byBwcm9maWxlcyB3aXRoIG91ciBhbGdvcml0aG1cbiAgICBjb25zdCBzZWxlY3RlZFByb2ZpbGVzID0gc2VsZWN0VHdvUHJvZmlsZXMoKTtcbiAgICBcbiAgICAvLyBJZiB3ZSBjb3VsZG4ndCBnZXQgdHdvIHByb2ZpbGVzLCBmYWxsIGJhY2sgdG8gc2ltcGxlIHJhbmRvbSBzZWxlY3Rpb25cbiAgICBpZiAoc2VsZWN0ZWRQcm9maWxlcy5sZW5ndGggPCAyKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGZhbGxiYWNrUHJvZmlsZXMsIGVycm9yOiBmYWxsYmFja0Vycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgICAuc2VsZWN0KCcqJylcbiAgICAgICAgLm5vdCgnaWQnLCAnaW4nLCBgKCR7ZXhjbHVkZUlkcy5qb2luKCcsJyl9KWApXG4gICAgICAgIC5vcmRlcignUkFORE9NKCknKVxuICAgICAgICAubGltaXQoMik7XG4gICAgICBcbiAgICAgIGlmIChmYWxsYmFja0Vycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBnZXR0aW5nIGZhbGxiYWNrIHByb2ZpbGVzOlwiLCBmYWxsYmFja0Vycm9yKTtcbiAgICAgICAgcmV0dXJuIFtdO1xuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zb2xlLmxvZyhgRElBR05PU1RJQ1MgLSBGZWxsIGJhY2sgdG8gcmFuZG9tIHNlbGVjdGlvbiwgZ290ICR7ZmFsbGJhY2tQcm9maWxlcy5sZW5ndGh9IHByb2ZpbGVzYCk7XG4gICAgICByZXR1cm4gZmFsbGJhY2tQcm9maWxlcztcbiAgICB9XG4gICAgXG4gICAgLy8gUGVyZm9ybSBhIGpvaW4gd2l0aCBlZHVjYXRpb24gdG8gZ2V0IHRob3NlIHJlY29yZHMgdG9vXG4gICAgY29uc3Qgc2VsZWN0ZWRQcm9maWxlSWRzID0gc2VsZWN0ZWRQcm9maWxlcy5tYXAocHJvZmlsZSA9PiBwcm9maWxlLmlkKTtcbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGVzV2l0aFJlbGF0aW9ucywgZXJyb3I6IHByb2ZpbGVzRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbSgncHJvZmlsZXMnKVxuICAgICAgLnNlbGVjdChgXG4gICAgICAgICosXG4gICAgICAgIGVkdWNhdGlvbjplZHVjYXRpb24oKiksXG4gICAgICAgIHNraWxsczpza2lsbHMoKilcbiAgICAgIGApXG4gICAgICAuaW4oJ2lkJywgc2VsZWN0ZWRQcm9maWxlSWRzKVxuICAgICAgLm9yZGVyKCdlbG9fcmF0aW5nJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuICAgIFxuICAgIGlmIChwcm9maWxlc0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZ2V0dGluZyBwcm9maWxlcyB3aXRoIHJlbGF0aW9uczpcIiwgcHJvZmlsZXNFcnJvcik7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuICAgIFxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIEZpcnN0IHByb2ZpbGUgc2VsZWN0ZWQ6ICR7c2VsZWN0ZWRQcm9maWxlc1swXS5pZH1gKTtcbiAgICBjb25zb2xlLmxvZyhgRElBR05PU1RJQ1MgLSBTZWNvbmQgcHJvZmlsZSBzZWxlY3RlZDogJHtzZWxlY3RlZFByb2ZpbGVzWzFdLmlkfWApO1xuICAgIFxuICAgIHJldHVybiBwcm9maWxlc1dpdGhSZWxhdGlvbnM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGdldFJhbmRvbVByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBleGNsdWRlUGFyYW0gPSBzZWFyY2hQYXJhbXMuZ2V0KFwiZXhjbHVkZVwiKSB8fCBcIlwiO1xuXG4gICAgLy8gQ29udmVydCBleGNsdWRlIGxpc3QgdG8gYXJyYXkgb2YgbnVtYmVyc1xuICAgIGNvbnN0IGV4Y2x1ZGVJZHMgPSBleGNsdWRlUGFyYW1cbiAgICAgID8gZXhjbHVkZVBhcmFtXG4gICAgICAgICAgLnNwbGl0KFwiLFwiKVxuICAgICAgICAgIC5tYXAoKGlkKSA9PiBwYXJzZUludChpZCwgMTApKVxuICAgICAgICAgIC5maWx0ZXIoKGlkKSA9PiAhaXNOYU4oaWQpKVxuICAgICAgOiBbXTtcblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYEZldGNoaW5nIHJhbmRvbSBwcm9maWxlcyB3aXRoIGV4Y2x1ZGVJZHM6ICR7SlNPTi5zdHJpbmdpZnkoZXhjbHVkZUlkcyl9YFxuICAgICk7XG5cbiAgICAvLyBHZXQgcmFuZG9tIHByb2ZpbGVzIGZyb20gU3VwYWJhc2VcbiAgICBjb25zdCBiYXNpY1Byb2ZpbGVzID0gKGF3YWl0IGdldFJhbmRvbVByb2ZpbGVzKFxuICAgICAgZXhjbHVkZUlkc1xuICAgICkpIGFzIFN1cGFiYXNlUHJvZmlsZVtdO1xuXG4gICAgLy8gQ2hlY2sgaWYgcHJvZmlsZXMgbmVlZCBlbnJpY2htZW50IGFuZCBlbnJpY2ggdGhlbVxuICAgIGNvbnN0IGRldGFpbGVkUHJvZmlsZXMgPSBbXTtcbiAgICBcbiAgICBmb3IgKGNvbnN0IHByb2ZpbGUgb2YgYmFzaWNQcm9maWxlcykge1xuICAgICAgdHJ5IHtcbiAgICAgICAgbGV0IGVucmljaGVkUHJvZmlsZTtcbiAgICAgICAgXG4gICAgICAgIC8vIENoZWNrIGlmIHByb2ZpbGUgbmVlZHMgZW5yaWNobWVudFxuICAgICAgICBpZiAocHJvZmlsZS5pc19lbnJpY2hlZCAhPT0gdHJ1ZSkge1xuICAgICAgICAgIGNvbnNvbGUubG9nKGBQcm9maWxlICR7cHJvZmlsZS5pZH0gKCR7cHJvZmlsZS5mdWxsX25hbWV9KSBuZWVkcyBlbnJpY2htZW50YCk7XG4gICAgICAgICAgXG4gICAgICAgICAgLy8gQ2FsbCB0aGUgZW5yaWNobWVudCBlbmRwb2ludFxuICAgICAgICAgIGNvbnN0IGVucmljaFJlc3BvbnNlID0gYXdhaXQgZmV0Y2goXG4gICAgICAgICAgICBgJHtwcm9jZXNzLmVudi5WRVJDRUxfVVJMIHx8ICdodHRwOi8vbG9jYWxob3N0OjMwMDAnfS9hcGkvcHJvZmlsZXMvZW5yaWNoP2F2aWF0b19pZD0ke3Byb2ZpbGUuYXZpYXRvX2lkfWAsXG4gICAgICAgICAgICB7IG1ldGhvZDogJ0dFVCcgfVxuICAgICAgICAgICk7XG4gICAgICAgICAgXG4gICAgICAgICAgaWYgKCFlbnJpY2hSZXNwb25zZS5vaykge1xuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRXJyb3IgZW5yaWNoaW5nIHByb2ZpbGUgJHtwcm9maWxlLmlkfTogJHtlbnJpY2hSZXNwb25zZS5zdGF0dXNUZXh0fWApO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuICAgICAgICAgIFxuICAgICAgICAgIGNvbnN0IGVucmljaFJlc3VsdCA9IGF3YWl0IGVucmljaFJlc3BvbnNlLmpzb24oKTtcbiAgICAgICAgICBlbnJpY2hlZFByb2ZpbGUgPSBlbnJpY2hSZXN1bHQucHJvZmlsZTtcbiAgICAgICAgICBcbiAgICAgICAgICBjb25zb2xlLmxvZyhgU3VjY2Vzc2Z1bGx5IGVucmljaGVkIHByb2ZpbGUgJHtwcm9maWxlLmlkfSAke2VucmljaFJlc3VsdC5lbnJpY2hlZCA/ICcobmV3bHkgZW5yaWNoZWQpJyA6ICcoYWxyZWFkeSBlbnJpY2hlZCknfWApO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIFByb2ZpbGUgaXMgYWxyZWFkeSBlbnJpY2hlZCwganVzdCBnZXQgdGhlIGRldGFpbHNcbiAgICAgICAgICBlbnJpY2hlZFByb2ZpbGUgPSBhd2FpdCBnZXRQcm9maWxlQnlJZChwcm9maWxlLmlkKTtcbiAgICAgICAgICBjb25zb2xlLmxvZyhgVXNpbmcgYWxyZWFkeSBlbnJpY2hlZCBwcm9maWxlICR7cHJvZmlsZS5pZH1gKTtcbiAgICAgICAgfVxuICAgICAgICBcbiAgICAgICAgaWYgKGVucmljaGVkUHJvZmlsZSkge1xuICAgICAgICAgIGRldGFpbGVkUHJvZmlsZXMucHVzaChlbnJpY2hlZFByb2ZpbGUpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciBwcm9jZXNzaW5nIHByb2ZpbGUgJHtwcm9maWxlLmlkfTpgLCBlcnJvcik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVHJhbnNmb3JtIHByb2ZpbGVzIHRvIG1hdGNoIGZyb250ZW5kIGZvcm1hdFxuICAgIGNvbnN0IHRyYW5zZm9ybWVkUHJvZmlsZXMgPSBkZXRhaWxlZFByb2ZpbGVzLm1hcCgocHJvZmlsZTogYW55KSA9PiB7XG4gICAgICAvLyBHZXQgZXhwZXJpZW5jZXMgZnJvbSBib3RoIGRpcmVjdCBwcm9maWxlIGZpZWxkcyBhbmQgZXhwZXJpZW5jZSB0YWJsZVxuICAgICAgY29uc3QgZXhwZXJpZW5jZXMgPSBbXTtcbiAgICAgIFxuICAgICAgLy8gQWRkIHRvcCBleHBlcmllbmNlcyBmcm9tIGRpcmVjdCBwcm9maWxlIGZpZWxkcyBpZiBhdmFpbGFibGVcbiAgICAgIGlmIChwcm9maWxlLmV4cDFfdGl0bGUgJiYgcHJvZmlsZS5leHAxX2NvbXBhbnkpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRZZWFyID0gcHJvZmlsZS5leHAxX3N0YXJ0X2RhdGVcbiAgICAgICAgICA/IG5ldyBEYXRlKHByb2ZpbGUuZXhwMV9zdGFydF9kYXRlKS5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgOiBcIlwiO1xuICAgICAgICBjb25zdCBlbmRZZWFyID0gcHJvZmlsZS5leHAxX2lzX2N1cnJlbnRcbiAgICAgICAgICA/IFwiUHJlc2VudFwiXG4gICAgICAgICAgOiBwcm9maWxlLmV4cDFfZW5kX2RhdGVcbiAgICAgICAgICA/IG5ldyBEYXRlKHByb2ZpbGUuZXhwMV9lbmRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPVxuICAgICAgICAgIHN0YXJ0WWVhciAmJiBlbmRZZWFyID8gYCR7c3RhcnRZZWFyfSAtICR7ZW5kWWVhcn1gIDogXCJcIjtcbiAgICAgICAgICBcbiAgICAgICAgZXhwZXJpZW5jZXMucHVzaCh7XG4gICAgICAgICAgdGl0bGU6IHByb2ZpbGUuZXhwMV90aXRsZSxcbiAgICAgICAgICBjb21wYW55OiBwcm9maWxlLmV4cDFfY29tcGFueSxcbiAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChwcm9maWxlLmV4cDJfdGl0bGUgJiYgcHJvZmlsZS5leHAyX2NvbXBhbnkpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRZZWFyID0gcHJvZmlsZS5leHAyX3N0YXJ0X2RhdGVcbiAgICAgICAgICA/IG5ldyBEYXRlKHByb2ZpbGUuZXhwMl9zdGFydF9kYXRlKS5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgOiBcIlwiO1xuICAgICAgICBjb25zdCBlbmRZZWFyID0gcHJvZmlsZS5leHAyX2lzX2N1cnJlbnRcbiAgICAgICAgICA/IFwiUHJlc2VudFwiXG4gICAgICAgICAgOiBwcm9maWxlLmV4cDJfZW5kX2RhdGVcbiAgICAgICAgICA/IG5ldyBEYXRlKHByb2ZpbGUuZXhwMl9lbmRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPVxuICAgICAgICAgIHN0YXJ0WWVhciAmJiBlbmRZZWFyID8gYCR7c3RhcnRZZWFyfSAtICR7ZW5kWWVhcn1gIDogXCJcIjtcbiAgICAgICAgICBcbiAgICAgICAgZXhwZXJpZW5jZXMucHVzaCh7XG4gICAgICAgICAgdGl0bGU6IHByb2ZpbGUuZXhwMl90aXRsZSxcbiAgICAgICAgICBjb21wYW55OiBwcm9maWxlLmV4cDJfY29tcGFueSxcbiAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGlmIChwcm9maWxlLmV4cDNfdGl0bGUgJiYgcHJvZmlsZS5leHAzX2NvbXBhbnkpIHtcbiAgICAgICAgY29uc3Qgc3RhcnRZZWFyID0gcHJvZmlsZS5leHAzX3N0YXJ0X2RhdGVcbiAgICAgICAgICA/IG5ldyBEYXRlKHByb2ZpbGUuZXhwM19zdGFydF9kYXRlKS5nZXRGdWxsWWVhcigpXG4gICAgICAgICAgOiBcIlwiO1xuICAgICAgICBjb25zdCBlbmRZZWFyID0gcHJvZmlsZS5leHAzX2lzX2N1cnJlbnRcbiAgICAgICAgICA/IFwiUHJlc2VudFwiXG4gICAgICAgICAgOiBwcm9maWxlLmV4cDNfZW5kX2RhdGVcbiAgICAgICAgICA/IG5ldyBEYXRlKHByb2ZpbGUuZXhwM19lbmRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgIDogXCJcIjtcbiAgICAgICAgY29uc3QgZHVyYXRpb24gPVxuICAgICAgICAgIHN0YXJ0WWVhciAmJiBlbmRZZWFyID8gYCR7c3RhcnRZZWFyfSAtICR7ZW5kWWVhcn1gIDogXCJcIjtcbiAgICAgICAgICBcbiAgICAgICAgZXhwZXJpZW5jZXMucHVzaCh7XG4gICAgICAgICAgdGl0bGU6IHByb2ZpbGUuZXhwM190aXRsZSxcbiAgICAgICAgICBjb21wYW55OiBwcm9maWxlLmV4cDNfY29tcGFueSxcbiAgICAgICAgICBkdXJhdGlvbixcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIEZvcm1hdCBhZGRpdGlvbmFsIGV4cGVyaWVuY2VzIGZyb20gZXhwZXJpZW5jZSB0YWJsZVxuICAgICAgaWYgKHByb2ZpbGUuZXhwZXJpZW5jZSAmJiBwcm9maWxlLmV4cGVyaWVuY2UubGVuZ3RoID4gMCkge1xuICAgICAgICAvLyBTdGFydCBhdCBpbmRleCAwIGlmIHdlIGRvbid0IGhhdmUgYW55IGRpcmVjdCBleHBlcmllbmNlcywgb3RoZXJ3aXNlIGFkZCB0byB0aGUgZXhpc3Rpbmcgb25lc1xuICAgICAgICBjb25zdCBhZGRpdGlvbmFsRXhwZXJpZW5jZXMgPSBwcm9maWxlLmV4cGVyaWVuY2VcbiAgICAgICAgICAubWFwKChleHA6IGFueSkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3RhcnRZZWFyID0gZXhwLnN0YXJ0X2RhdGVcbiAgICAgICAgICAgICAgPyBuZXcgRGF0ZShleHAuc3RhcnRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBlbmRZZWFyID0gZXhwLmlzX2N1cnJlbnRcbiAgICAgICAgICAgICAgPyBcIlByZXNlbnRcIlxuICAgICAgICAgICAgICA6IGV4cC5lbmRfZGF0ZVxuICAgICAgICAgICAgICA/IG5ldyBEYXRlKGV4cC5lbmRfZGF0ZSkuZ2V0RnVsbFllYXIoKVxuICAgICAgICAgICAgICA6IFwiXCI7XG4gICAgICAgICAgICBjb25zdCBkdXJhdGlvbiA9XG4gICAgICAgICAgICAgIHN0YXJ0WWVhciAmJiBlbmRZZWFyID8gYCR7c3RhcnRZZWFyfSAtICR7ZW5kWWVhcn1gIDogXCJcIjtcblxuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgdGl0bGU6IGV4cC50aXRsZSB8fCBcIlwiLFxuICAgICAgICAgICAgICBjb21wYW55OiBleHAuY29tcGFueV9uYW1lIHx8IFwiXCIsXG4gICAgICAgICAgICAgIGR1cmF0aW9uLFxuICAgICAgICAgICAgfTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgICBcbiAgICAgICAgLy8gQWRkIGFueSBleHBlcmllbmNlcyB0aGF0IGFyZW4ndCBhbHJlYWR5IGluY2x1ZGVkIChhdm9pZCBkdXBsaWNhdGVzKVxuICAgICAgICBmb3IgKGNvbnN0IGV4cCBvZiBhZGRpdGlvbmFsRXhwZXJpZW5jZXMpIHtcbiAgICAgICAgICBjb25zdCBpc0R1cGxpY2F0ZSA9IGV4cGVyaWVuY2VzLnNvbWUoXG4gICAgICAgICAgICBlID0+IGUudGl0bGUgPT09IGV4cC50aXRsZSAmJiBlLmNvbXBhbnkgPT09IGV4cC5jb21wYW55XG4gICAgICAgICAgKTtcbiAgICAgICAgICBpZiAoIWlzRHVwbGljYXRlKSB7XG4gICAgICAgICAgICBleHBlcmllbmNlcy5wdXNoKGV4cCk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEdldCBza2lsbHMgZnJvbSBza2lsbHMgdGFibGVcbiAgICAgIGNvbnN0IHNraWxscyA9IHByb2ZpbGUuc2tpbGxzIFxuICAgICAgICA/IHByb2ZpbGUuc2tpbGxzLm1hcCgoc2tpbGw6IGFueSkgPT4gc2tpbGwubmFtZSB8fCBcIlwiKVxuICAgICAgICA6IFtdO1xuXG4gICAgICAvLyBHZXQgZGVncmVlIGZyb20gZWR1Y2F0aW9uIGlmIGF2YWlsYWJsZVxuICAgICAgY29uc3QgZGVncmVlID1cbiAgICAgICAgcHJvZmlsZS5lZHVjYXRpb24gJiYgcHJvZmlsZS5lZHVjYXRpb24ubGVuZ3RoID4gMFxuICAgICAgICAgID8gcHJvZmlsZS5lZHVjYXRpb25bMF0uZGVncmVlIHx8IFwiQlNcIlxuICAgICAgICAgIDogXCJCU1wiO1xuICAgICAgICAgIFxuICAgICAgLy8gRXh0cmFjdCBtYWpvciBmcm9tIGhlYWRsaW5lIGlmIGl0J3Mgbm90IGF2YWlsYWJsZSBpbiB0aGUgcHJvZmlsZVxuICAgICAgbGV0IG1ham9yID0gcHJvZmlsZS5tYWpvciB8fCBcIlwiO1xuICAgICAgXG4gICAgICAvLyBJZiBtYWpvciBpcyBlbXB0eSwgdHJ5IHRvIGV4dHJhY3QgaXQgZnJvbSB0aGUgaGVhZGxpbmVcbiAgICAgIGlmICghbWFqb3IgJiYgcHJvZmlsZS5oZWFkbGluZSkge1xuICAgICAgICAvLyBMb29rIGZvciBjb21tb24gcGF0dGVybnMgbGlrZSBcIkNTIEAgR2VvcmdpYSBUZWNoXCIgb3IgXCJzdHVkeWluZyBDb21wdXRlciBTY2llbmNlIGF0IEdUXCJcbiAgICAgICAgY29uc3QgaGVhZGxpbmUgPSBwcm9maWxlLmhlYWRsaW5lLnRvTG93ZXJDYXNlKCk7XG4gICAgICAgIGlmIChoZWFkbGluZS5pbmNsdWRlcyhcImNzIEBcIikgfHwgaGVhZGxpbmUuaW5jbHVkZXMoXCJjcyBhdFwiKSkge1xuICAgICAgICAgIG1ham9yID0gXCJDb21wdXRlciBTY2llbmNlXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaGVhZGxpbmUuaW5jbHVkZXMoXCJjb21wdXRlciBzY2llbmNlXCIpKSB7XG4gICAgICAgICAgbWFqb3IgPSBcIkNvbXB1dGVyIFNjaWVuY2VcIjtcbiAgICAgICAgfSBlbHNlIGlmIChoZWFkbGluZS5pbmNsdWRlcyhcImVsZWN0cmljYWwgZW5naW5lZXJpbmdcIikpIHtcbiAgICAgICAgICBtYWpvciA9IFwiRWxlY3RyaWNhbCBFbmdpbmVlcmluZ1wiO1xuICAgICAgICB9IGVsc2UgaWYgKGhlYWRsaW5lLmluY2x1ZGVzKFwibWVjaGFuaWNhbCBlbmdpbmVlcmluZ1wiKSkge1xuICAgICAgICAgIG1ham9yID0gXCJNZWNoYW5pY2FsIEVuZ2luZWVyaW5nXCI7XG4gICAgICAgIH0gZWxzZSBpZiAoaGVhZGxpbmUuaW5jbHVkZXMoXCJidXNpbmVzc1wiKSkge1xuICAgICAgICAgIG1ham9yID0gXCJCdXNpbmVzcyBBZG1pbmlzdHJhdGlvblwiO1xuICAgICAgICB9IGVsc2UgaWYgKGhlYWRsaW5lLmluY2x1ZGVzKFwiZGF0YSBzY2llbmNlXCIpKSB7XG4gICAgICAgICAgbWFqb3IgPSBcIkRhdGEgU2NpZW5jZVwiO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIC8vIElmIHN0aWxsIG5vIG1ham9yIGZvdW5kLCB1c2UgcGFydCBvZiB0aGUgZGVncmVlIGlmIGl0IGNvbnRhaW5zIFwiaW5cIlxuICAgICAgaWYgKCFtYWpvciAmJiBkZWdyZWUgJiYgZGVncmVlLmluY2x1ZGVzKFwiIGluIFwiKSkge1xuICAgICAgICBjb25zdCBwYXJ0cyA9IGRlZ3JlZS5zcGxpdChcIiBpbiBcIik7XG4gICAgICAgIGlmIChwYXJ0cy5sZW5ndGggPiAxKSB7XG4gICAgICAgICAgbWFqb3IgPSBwYXJ0c1sxXTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBpZDogcHJvZmlsZS5pZC50b1N0cmluZygpLFxuICAgICAgICBuYW1lOiBwcm9maWxlLmZ1bGxfbmFtZSB8fCBcIlVua25vd25cIixcbiAgICAgICAgdGl0bGU6IHByb2ZpbGUudGl0bGUgfHwgXCJcIixcbiAgICAgICAgY29tcGFueTogcHJvZmlsZS5jb21wYW55IHx8IFwiXCIsXG4gICAgICAgIG1ham9yOiBtYWpvciB8fCBcIlVua25vd24gTWFqb3JcIixcbiAgICAgICAgZ3JhZHVhdGlvblllYXI6IHByb2ZpbGUuZ3JhZHVhdGlvbl95ZWFyIHx8IDAsXG4gICAgICAgIGlzU3R1ZGVudDogcHJvZmlsZS5pc19zdHVkZW50LFxuICAgICAgICBlbG86IHByb2ZpbGUuZWxvX3JhdGluZyxcbiAgICAgICAgbG9jYXRpb246IHByb2ZpbGUubG9jYXRpb24gfHwgXCJcIixcbiAgICAgICAgYXZhdGFyOiBgL2F2YXRhcnMvJHtNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxMCkgKyAxfS5wbmdgLFxuICAgICAgICBkZWdyZWUsXG4gICAgICAgIHNraWxscywgLy8gTm93IHVzaW5nIHNraWxscyBmcm9tIHRoZSBkYXRhYmFzZVxuICAgICAgICBleHBlcmllbmNlcywgLy8gVXNpbmcgdGhlIGZvcm1hdHRlZCBleHBlcmllbmNlcyBmcm9tIGJvdGggc291cmNlc1xuICAgICAgICBsaW5rZWRpblVybDogcHJvZmlsZS5saW5rZWRpbl91cmwgfHwgbnVsbCwgLy8gSW5jbHVkZSBMaW5rZWRJbiBVUkwgaWYgYXZhaWxhYmxlXG4gICAgICAgIGVkdWNhdGlvbjogcHJvZmlsZS5lZHVjYXRpb24gfHwgW10sIC8vIEluY2x1ZGUgdGhlIGZ1bGwgZWR1Y2F0aW9uIGFycmF5XG4gICAgICB9O1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgcHJvZmlsZXM6IHRyYW5zZm9ybWVkUHJvZmlsZXMgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHJhbmRvbSBwcm9maWxlczpcIiwgZXJyb3IpO1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgIHtcbiAgICAgICAgZXJyb3I6IFwiRmFpbGVkIHRvIGZldGNoIHJhbmRvbSBwcm9maWxlc1wiLFxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6IFwiVW5rbm93biBlcnJvclwiLFxuICAgICAgICBwcm9maWxlczogW10sXG4gICAgICB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFByb2ZpbGVCeUlkIiwic3VwYWJhc2UiLCJyZXF1aXJlIiwiZ2V0UmFuZG9tUHJvZmlsZXMiLCJleGNsdWRlSWRzIiwiY29uc29sZSIsImxvZyIsImNvdW50IiwiZXJyb3IiLCJjb3VudEVycm9yIiwiZnJvbSIsInNlbGVjdCIsImhlYWQiLCJ0b3BQcm9maWxlQ291bnQiLCJNYXRoIiwiY2VpbCIsImRhdGEiLCJ0b3BQcm9maWxlcyIsInRvcEVycm9yIiwibm90Iiwiam9pbiIsIm9yZGVyIiwiYXNjZW5kaW5nIiwibGltaXQiLCJyZWd1bGFyUHJvZmlsZXMiLCJyZWd1bGFyRXJyb3IiLCJsZW5ndGgiLCJzZWxlY3RUd29Qcm9maWxlcyIsInNlbGVjdGVkUHJvZmlsZXMiLCJ1c2VIaWdoRWxvRmlyc3QiLCJyYW5kb20iLCJyYW5kb21JbmRleCIsImZsb29yIiwicHVzaCIsInNwbGljZSIsInVzZUhpZ2hFbG9TZWNvbmQiLCJmYWxsYmFja1Byb2ZpbGVzIiwiZmFsbGJhY2tFcnJvciIsInNlbGVjdGVkUHJvZmlsZUlkcyIsIm1hcCIsInByb2ZpbGUiLCJpZCIsInByb2ZpbGVzV2l0aFJlbGF0aW9ucyIsInByb2ZpbGVzRXJyb3IiLCJpbiIsIkdFVCIsInJlcXVlc3QiLCJzZWFyY2hQYXJhbXMiLCJVUkwiLCJ1cmwiLCJleGNsdWRlUGFyYW0iLCJnZXQiLCJzcGxpdCIsInBhcnNlSW50IiwiZmlsdGVyIiwiaXNOYU4iLCJKU09OIiwic3RyaW5naWZ5IiwiYmFzaWNQcm9maWxlcyIsImRldGFpbGVkUHJvZmlsZXMiLCJlbnJpY2hlZFByb2ZpbGUiLCJpc19lbnJpY2hlZCIsImZ1bGxfbmFtZSIsImVucmljaFJlc3BvbnNlIiwiZmV0Y2giLCJwcm9jZXNzIiwiZW52IiwiVkVSQ0VMX1VSTCIsImF2aWF0b19pZCIsIm1ldGhvZCIsIm9rIiwic3RhdHVzVGV4dCIsImVucmljaFJlc3VsdCIsImpzb24iLCJlbnJpY2hlZCIsInRyYW5zZm9ybWVkUHJvZmlsZXMiLCJleHBlcmllbmNlcyIsImV4cDFfdGl0bGUiLCJleHAxX2NvbXBhbnkiLCJzdGFydFllYXIiLCJleHAxX3N0YXJ0X2RhdGUiLCJEYXRlIiwiZ2V0RnVsbFllYXIiLCJlbmRZZWFyIiwiZXhwMV9pc19jdXJyZW50IiwiZXhwMV9lbmRfZGF0ZSIsImR1cmF0aW9uIiwidGl0bGUiLCJjb21wYW55IiwiZXhwMl90aXRsZSIsImV4cDJfY29tcGFueSIsImV4cDJfc3RhcnRfZGF0ZSIsImV4cDJfaXNfY3VycmVudCIsImV4cDJfZW5kX2RhdGUiLCJleHAzX3RpdGxlIiwiZXhwM19jb21wYW55IiwiZXhwM19zdGFydF9kYXRlIiwiZXhwM19pc19jdXJyZW50IiwiZXhwM19lbmRfZGF0ZSIsImV4cGVyaWVuY2UiLCJhZGRpdGlvbmFsRXhwZXJpZW5jZXMiLCJleHAiLCJzdGFydF9kYXRlIiwiaXNfY3VycmVudCIsImVuZF9kYXRlIiwiY29tcGFueV9uYW1lIiwiaXNEdXBsaWNhdGUiLCJzb21lIiwiZSIsInNraWxscyIsInNraWxsIiwibmFtZSIsImRlZ3JlZSIsImVkdWNhdGlvbiIsIm1ham9yIiwiaGVhZGxpbmUiLCJ0b0xvd2VyQ2FzZSIsImluY2x1ZGVzIiwicGFydHMiLCJ0b1N0cmluZyIsImdyYWR1YXRpb25ZZWFyIiwiZ3JhZHVhdGlvbl95ZWFyIiwiaXNTdHVkZW50IiwiaXNfc3R1ZGVudCIsImVsbyIsImVsb19yYXRpbmciLCJsb2NhdGlvbiIsImF2YXRhciIsImxpbmtlZGluVXJsIiwibGlua2VkaW5fdXJsIiwicHJvZmlsZXMiLCJtZXNzYWdlIiwiRXJyb3IiLCJzdGF0dXMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/profiles/random/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/profiles-js.js":
/*!****************************!*\
  !*** ./lib/profiles-js.js ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("// Import supabase client\n\nconst { supabase } = __webpack_require__(/*! ./supabase.js */ \"(rsc)/./lib/supabase.js\");\n/**\n * Get profiles with pagination, filtering and sorting\n */ async function getProfiles({ page = 1, limit = 10, query = \"\", filter = \"all\", sort = \"elo\" }) {\n    try {\n        // Calculate offset\n        const offset = (page - 1) * limit;\n        // Start building query\n        let profileQuery = supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\"\n        });\n        // Add search filter if query is provided\n        if (query) {\n            profileQuery = profileQuery.or(`full_name.ilike.%${query}%,title.ilike.%${query}%,company.ilike.%${query}%,major.ilike.%${query}%`);\n        }\n        // Add category filter\n        if (filter !== \"all\") {\n            if (filter === \"students\") {\n                profileQuery = profileQuery.eq(\"is_student\", true);\n            } else if (filter === \"alumni\") {\n                profileQuery = profileQuery.eq(\"is_student\", false);\n            } else {\n                // Assume filter is a major\n                profileQuery = profileQuery.ilike(\"major\", `%${filter}%`);\n            }\n        }\n        // Add sorting\n        if (sort === \"elo\") {\n            profileQuery = profileQuery.order(\"elo_rating\", {\n                ascending: false\n            });\n        } else if (sort === \"name\") {\n            profileQuery = profileQuery.order(\"full_name\");\n        } else if (sort === \"graduation\") {\n            profileQuery = profileQuery.order(\"graduation_year\");\n        }\n        // Add pagination\n        profileQuery = profileQuery.range(offset, offset + limit - 1);\n        // Execute query\n        const { data: profiles, error, count } = await profileQuery;\n        if (error) throw error;\n        // Get education and work experience for each profile\n        const profilesWithDetails = [];\n        for (const profile of profiles || []){\n            const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", profile.id);\n            const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", profile.id).order(\"is_current\", {\n                ascending: false\n            }).order(\"end_date\", {\n                ascending: false\n            });\n            profilesWithDetails.push({\n                ...profile,\n                education: education || [],\n                experience: experience || []\n            });\n        }\n        return {\n            profiles: profilesWithDetails,\n            total: count || 0,\n            totalPages: Math.ceil((count || 0) / limit)\n        };\n    } catch (error) {\n        console.error(\"Error fetching profiles:\", error);\n        throw error;\n    }\n}\n/**\n * Get a single profile by ID with education and work experience\n */ async function getProfileById(id) {\n    try {\n        const { data: profile, error } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", id).single();\n        if (error) throw error;\n        if (!profile) return null;\n        const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", id);\n        const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", id).order(\"is_current\", {\n            ascending: false\n        }).order(\"end_date\", {\n            ascending: false\n        });\n        // Get skills for this profile\n        const { data: skills } = await supabase.from(\"skills\").select(\"*\").eq(\"profile_id\", id);\n        return {\n            ...profile,\n            education: education || [],\n            experience: experience || [],\n            skills: skills || []\n        };\n    } catch (error) {\n        console.error(`Error fetching profile with ID ${id}:`, error);\n        return null;\n    }\n}\n/**\n * Get two random profiles, excluding specified IDs\n */ async function getRandomProfiles(excludeIds = []) {\n    // Ensure excludeIds is an array of numbers\n    const safeExcludeIds = Array.isArray(excludeIds) ? excludeIds.filter((id)=>typeof id === \"number\" && !isNaN(id)) : [];\n    console.log(`DIAGNOSTICS - getRandomProfiles called with excludeIds:`, safeExcludeIds);\n    try {\n        // Check if we have any profiles at all first\n        const { count: profileCount, error: countError } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (countError) {\n            console.error(\"Error counting profiles:\", countError);\n            throw new Error(`Could not count profiles: ${countError.message}`);\n        }\n        console.log(`DIAGNOSTICS - Total profile count: ${profileCount}`);\n        if (profileCount === 0) {\n            console.error(\"No profiles found in database\");\n            throw new Error(\"No profiles found in database\");\n        }\n        // Get all profiles (limit to a reasonable number)\n        const { data: allProfiles, error: profilesError } = await supabase.from(\"profiles\").select(\"*\").limit(100); // Limit to 100 profiles max for performance\n        if (profilesError) {\n            console.error(\"Error fetching profiles:\", profilesError);\n            throw new Error(`Could not fetch profiles: ${profilesError.message}`);\n        }\n        if (!allProfiles || allProfiles.length === 0) {\n            throw new Error(\"No profiles returned from database\");\n        }\n        console.log(`DIAGNOSTICS - Fetched ${allProfiles.length} profiles successfully`);\n        // Filter out excluded profiles for the first selection\n        let availableForFirst = allProfiles;\n        if (safeExcludeIds.length > 0) {\n            availableForFirst = allProfiles.filter((profile)=>!safeExcludeIds.includes(profile.id));\n            // If no profiles left after exclusion, use all profiles\n            if (availableForFirst.length === 0) {\n                console.warn(\"No profiles left after exclusion, using all profiles for first selection\");\n                availableForFirst = allProfiles;\n            }\n        }\n        // Select a random first profile\n        const randomFirstIndex = Math.floor(Math.random() * availableForFirst.length);\n        const firstProfile = availableForFirst[randomFirstIndex];\n        console.log(`DIAGNOSTICS - First profile selected: ${firstProfile.id}`);\n        // Filter profiles for second selection (exclude the first profile and others)\n        const combinedExcludeIds = [\n            ...safeExcludeIds,\n            firstProfile.id\n        ];\n        let availableForSecond = allProfiles.filter((profile)=>!combinedExcludeIds.includes(profile.id));\n        // If no profiles available for second selection, just exclude the first profile\n        if (availableForSecond.length === 0) {\n            console.warn(\"No profiles available for second selection after exclusions\");\n            availableForSecond = allProfiles.filter((profile)=>profile.id !== firstProfile.id);\n            // If still no profiles available, return just the first profile\n            if (availableForSecond.length === 0) {\n                console.warn(\"Could not find any profile different from the first one\");\n                return [\n                    firstProfile\n                ];\n            }\n        }\n        // Select a random second profile\n        const randomSecondIndex = Math.floor(Math.random() * availableForSecond.length);\n        const secondProfile = availableForSecond[randomSecondIndex];\n        console.log(`DIAGNOSTICS - Second profile selected: ${secondProfile.id}`);\n        // Return both profiles\n        return [\n            firstProfile,\n            secondProfile\n        ];\n    } catch (err) {\n        console.error(\"Exception in getRandomProfiles:\", err);\n        throw new Error(`Failed to get random profiles: ${err.message}`);\n    }\n}\n/**\n * Record a vote in the database\n */ async function recordVote(leftProfileId, rightProfileId, winnerId, sessionId) {\n    try {\n        const voteData = {\n            winner_id: winnerId,\n            left_profile_id: leftProfileId,\n            right_profile_id: rightProfileId,\n            voter_session_id: sessionId\n        };\n        const { error } = await supabase.from(\"votes\").insert([\n            voteData\n        ]);\n        if (error) throw error;\n    } catch (error) {\n        console.error(\"Error recording vote:\", error);\n        throw error;\n    }\n}\n/**\n * Get recent votes for a user session\n */ async function getRecentVotes(sessionId, limit = 5) {\n    try {\n        const { data, error } = await supabase.from(\"votes\").select(\"*\").eq(\"voter_session_id\", sessionId).order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching recent votes:\", error);\n        return [];\n    }\n}\n/**\n * Get top profiles by ELO rating\n */ async function getTopProfiles(limit = 10) {\n    try {\n        const { data, error } = await supabase.from(\"profiles\").select(\"*\").order(\"elo_rating\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching top profiles:\", error);\n        return [];\n    }\n}\n/**\n * Count profiles in the database\n */ async function countProfiles() {\n    try {\n        const { count, error } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (error) {\n            console.error(\"Error counting profiles:\", error);\n            throw error;\n        }\n        return count || 0;\n    } catch (error) {\n        console.error(\"Error in countProfiles:\", error);\n        return 0;\n    }\n}\nmodule.exports = {\n    getProfiles,\n    getProfileById,\n    getRandomProfiles,\n    recordVote,\n    getRecentVotes,\n    getTopProfiles,\n    countProfiles\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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T0YsUUFBUSxFQUFFO0lBQ25CLEVBQUUsT0FBT0UsT0FBTztRQUNkVyxRQUFRWCxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPLEVBQUU7SUFDWDtBQUNGO0FBRUE7O0NBRUMsR0FDRCxlQUFlc0QsZUFBZXZFLFFBQVEsRUFBRTtJQUN0QyxJQUFJO1FBQ0YsTUFBTSxFQUFFZSxJQUFJLEVBQUVFLEtBQUssRUFBRSxHQUFHLE1BQU1yQixTQUMzQlUsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxLQUNQSyxLQUFLLENBQUMsY0FBYztZQUFFQyxXQUFXO1FBQU0sR0FDdkNiLEtBQUssQ0FBQ0E7UUFFVCxJQUFJaUIsT0FBTyxNQUFNQTtRQUNqQixPQUFPRixRQUFRLEVBQUU7SUFDbkIsRUFBRSxPQUFPRSxPQUFPO1FBQ2RXLFFBQVFYLEtBQUssQ0FBQyxnQ0FBZ0NBO1FBQzlDLE9BQU8sRUFBRTtJQUNYO0FBQ0Y7QUFFQTs7Q0FFQyxHQUNELGVBQWV1RDtJQUNiLElBQUk7UUFDRixNQUFNLEVBQUVoRSxLQUFLLEVBQUVTLEtBQUssRUFBRSxHQUFHLE1BQU1yQixTQUM1QlUsSUFBSSxDQUFDLFlBQ0xDLE1BQU0sQ0FBQyxLQUFLO1lBQUVDLE9BQU87WUFBU2lDLE1BQU07UUFBSztRQUU1QyxJQUFJeEIsT0FBTztZQUNUVyxRQUFRWCxLQUFLLENBQUMsNEJBQTRCQTtZQUMxQyxNQUFNQTtRQUNSO1FBRUEsT0FBT1QsU0FBUztJQUNsQixFQUFFLE9BQU9TLE9BQU87UUFDZFcsUUFBUVgsS0FBSyxDQUFDLDJCQUEyQkE7UUFDekMsT0FBTztJQUNUO0FBQ0Y7QUFFQXdELE9BQU9DLE9BQU8sR0FBRztJQUNmNUU7SUFDQStCO0lBQ0FHO0lBQ0EyQjtJQUNBVztJQUNBQztJQUNBQztBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvLi9saWIvcHJvZmlsZXMtanMuanM/ZDdlNiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnQgc3VwYWJhc2UgY2xpZW50XG5jb25zdCB7IHN1cGFiYXNlIH0gPSByZXF1aXJlKFwiLi9zdXBhYmFzZS5qc1wiKTtcblxuLyoqXG4gKiBHZXQgcHJvZmlsZXMgd2l0aCBwYWdpbmF0aW9uLCBmaWx0ZXJpbmcgYW5kIHNvcnRpbmdcbiAqL1xuYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZXMoe1xuICBwYWdlID0gMSxcbiAgbGltaXQgPSAxMCxcbiAgcXVlcnkgPSBcIlwiLFxuICBmaWx0ZXIgPSBcImFsbFwiLFxuICBzb3J0ID0gXCJlbG9cIixcbn0pIHtcbiAgdHJ5IHtcbiAgICAvLyBDYWxjdWxhdGUgb2Zmc2V0XG4gICAgY29uc3Qgb2Zmc2V0ID0gKHBhZ2UgLSAxKSAqIGxpbWl0O1xuXG4gICAgLy8gU3RhcnQgYnVpbGRpbmcgcXVlcnlcbiAgICBsZXQgcHJvZmlsZVF1ZXJ5ID0gc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiB9KTtcblxuICAgIC8vIEFkZCBzZWFyY2ggZmlsdGVyIGlmIHF1ZXJ5IGlzIHByb3ZpZGVkXG4gICAgaWYgKHF1ZXJ5KSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3IoXG4gICAgICAgIGBmdWxsX25hbWUuaWxpa2UuJSR7cXVlcnl9JSx0aXRsZS5pbGlrZS4lJHtxdWVyeX0lLGNvbXBhbnkuaWxpa2UuJSR7cXVlcnl9JSxtYWpvci5pbGlrZS4lJHtxdWVyeX0lYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgY2F0ZWdvcnkgZmlsdGVyXG4gICAgaWYgKGZpbHRlciAhPT0gXCJhbGxcIikge1xuICAgICAgaWYgKGZpbHRlciA9PT0gXCJzdHVkZW50c1wiKSB7XG4gICAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5lcShcImlzX3N0dWRlbnRcIiwgdHJ1ZSk7XG4gICAgICB9IGVsc2UgaWYgKGZpbHRlciA9PT0gXCJhbHVtbmlcIikge1xuICAgICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkuZXEoXCJpc19zdHVkZW50XCIsIGZhbHNlKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIC8vIEFzc3VtZSBmaWx0ZXIgaXMgYSBtYWpvclxuICAgICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkuaWxpa2UoXCJtYWpvclwiLCBgJSR7ZmlsdGVyfSVgKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBZGQgc29ydGluZ1xuICAgIGlmIChzb3J0ID09PSBcImVsb1wiKSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3JkZXIoXCJlbG9fcmF0aW5nXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcbiAgICB9IGVsc2UgaWYgKHNvcnQgPT09IFwibmFtZVwiKSB7XG4gICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkub3JkZXIoXCJmdWxsX25hbWVcIik7XG4gICAgfSBlbHNlIGlmIChzb3J0ID09PSBcImdyYWR1YXRpb25cIikge1xuICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5Lm9yZGVyKFwiZ3JhZHVhdGlvbl95ZWFyXCIpO1xuICAgIH1cblxuICAgIC8vIEFkZCBwYWdpbmF0aW9uXG4gICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5LnJhbmdlKG9mZnNldCwgb2Zmc2V0ICsgbGltaXQgLSAxKTtcblxuICAgIC8vIEV4ZWN1dGUgcXVlcnlcbiAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGVzLCBlcnJvciwgY291bnQgfSA9IGF3YWl0IHByb2ZpbGVRdWVyeTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgICAvLyBHZXQgZWR1Y2F0aW9uIGFuZCB3b3JrIGV4cGVyaWVuY2UgZm9yIGVhY2ggcHJvZmlsZVxuICAgIGNvbnN0IHByb2ZpbGVzV2l0aERldGFpbHMgPSBbXTtcblxuICAgIGZvciAoY29uc3QgcHJvZmlsZSBvZiBwcm9maWxlcyB8fCBbXSkge1xuICAgICAgY29uc3QgeyBkYXRhOiBlZHVjYXRpb24gfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwiZWR1Y2F0aW9uXCIpXG4gICAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAgIC5lcShcInByb2ZpbGVfaWRcIiwgcHJvZmlsZS5pZCk7XG5cbiAgICAgIGNvbnN0IHsgZGF0YTogZXhwZXJpZW5jZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJ3b3JrX2V4cGVyaWVuY2VcIilcbiAgICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBwcm9maWxlLmlkKVxuICAgICAgICAub3JkZXIoXCJpc19jdXJyZW50XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgICAub3JkZXIoXCJlbmRfZGF0ZVwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG5cbiAgICAgIHByb2ZpbGVzV2l0aERldGFpbHMucHVzaCh7XG4gICAgICAgIC4uLnByb2ZpbGUsXG4gICAgICAgIGVkdWNhdGlvbjogZWR1Y2F0aW9uIHx8IFtdLFxuICAgICAgICBleHBlcmllbmNlOiBleHBlcmllbmNlIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpbGVzOiBwcm9maWxlc1dpdGhEZXRhaWxzLFxuICAgICAgdG90YWw6IGNvdW50IHx8IDAsXG4gICAgICB0b3RhbFBhZ2VzOiBNYXRoLmNlaWwoKGNvdW50IHx8IDApIC8gbGltaXQpLFxuICAgIH07XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgdGhyb3cgZXJyb3I7XG4gIH1cbn1cblxuLyoqXG4gKiBHZXQgYSBzaW5nbGUgcHJvZmlsZSBieSBJRCB3aXRoIGVkdWNhdGlvbiBhbmQgd29yayBleHBlcmllbmNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFByb2ZpbGVCeUlkKGlkKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJpZFwiLCBpZClcbiAgICAgIC5zaW5nbGUoKTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG4gICAgaWYgKCFwcm9maWxlKSByZXR1cm4gbnVsbDtcblxuICAgIGNvbnN0IHsgZGF0YTogZWR1Y2F0aW9uIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJlZHVjYXRpb25cIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJwcm9maWxlX2lkXCIsIGlkKTtcblxuICAgIGNvbnN0IHsgZGF0YTogZXhwZXJpZW5jZSB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwid29ya19leHBlcmllbmNlXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBpZClcbiAgICAgIC5vcmRlcihcImlzX2N1cnJlbnRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAub3JkZXIoXCJlbmRfZGF0ZVwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgICBcbiAgICAvLyBHZXQgc2tpbGxzIGZvciB0aGlzIHByb2ZpbGVcbiAgICBjb25zdCB7IGRhdGE6IHNraWxscyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwic2tpbGxzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBpZCk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgLi4ucHJvZmlsZSxcbiAgICAgIGVkdWNhdGlvbjogZWR1Y2F0aW9uIHx8IFtdLFxuICAgICAgZXhwZXJpZW5jZTogZXhwZXJpZW5jZSB8fCBbXSxcbiAgICAgIHNraWxsczogc2tpbGxzIHx8IFtdXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBwcm9maWxlIHdpdGggSUQgJHtpZH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHR3byByYW5kb20gcHJvZmlsZXMsIGV4Y2x1ZGluZyBzcGVjaWZpZWQgSURzXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFJhbmRvbVByb2ZpbGVzKGV4Y2x1ZGVJZHMgPSBbXSkge1xuICAvLyBFbnN1cmUgZXhjbHVkZUlkcyBpcyBhbiBhcnJheSBvZiBudW1iZXJzXG4gIGNvbnN0IHNhZmVFeGNsdWRlSWRzID0gQXJyYXkuaXNBcnJheShleGNsdWRlSWRzKVxuICAgID8gZXhjbHVkZUlkcy5maWx0ZXIoKGlkKSA9PiB0eXBlb2YgaWQgPT09IFwibnVtYmVyXCIgJiYgIWlzTmFOKGlkKSlcbiAgICA6IFtdO1xuXG4gIGNvbnNvbGUubG9nKFxuICAgIGBESUFHTk9TVElDUyAtIGdldFJhbmRvbVByb2ZpbGVzIGNhbGxlZCB3aXRoIGV4Y2x1ZGVJZHM6YCxcbiAgICBzYWZlRXhjbHVkZUlkc1xuICApO1xuXG4gIHRyeSB7XG4gICAgLy8gQ2hlY2sgaWYgd2UgaGF2ZSBhbnkgcHJvZmlsZXMgYXQgYWxsIGZpcnN0XG4gICAgY29uc3QgeyBjb3VudDogcHJvZmlsZUNvdW50LCBlcnJvcjogY291bnRFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIsIHsgY291bnQ6IFwiZXhhY3RcIiwgaGVhZDogdHJ1ZSB9KTtcblxuICAgIGlmIChjb3VudEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgY291bnRpbmcgcHJvZmlsZXM6XCIsIGNvdW50RXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgY291bnQgcHJvZmlsZXM6ICR7Y291bnRFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIFRvdGFsIHByb2ZpbGUgY291bnQ6ICR7cHJvZmlsZUNvdW50fWApO1xuXG4gICAgaWYgKHByb2ZpbGVDb3VudCA9PT0gMCkge1xuICAgICAgY29uc29sZS5lcnJvcihcIk5vIHByb2ZpbGVzIGZvdW5kIGluIGRhdGFiYXNlXCIpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcHJvZmlsZXMgZm91bmQgaW4gZGF0YWJhc2VcIik7XG4gICAgfVxuXG4gICAgLy8gR2V0IGFsbCBwcm9maWxlcyAobGltaXQgdG8gYSByZWFzb25hYmxlIG51bWJlcilcbiAgICBjb25zdCB7IGRhdGE6IGFsbFByb2ZpbGVzLCBlcnJvcjogcHJvZmlsZXNFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAubGltaXQoMTAwKTsgLy8gTGltaXQgdG8gMTAwIHByb2ZpbGVzIG1heCBmb3IgcGVyZm9ybWFuY2VcblxuICAgIGlmIChwcm9maWxlc0Vycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZXM6XCIsIHByb2ZpbGVzRXJyb3IpO1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmV0Y2ggcHJvZmlsZXM6ICR7cHJvZmlsZXNFcnJvci5tZXNzYWdlfWApO1xuICAgIH1cblxuICAgIGlmICghYWxsUHJvZmlsZXMgfHwgYWxsUHJvZmlsZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm9maWxlcyByZXR1cm5lZCBmcm9tIGRhdGFiYXNlXCIpO1xuICAgIH1cblxuICAgIGNvbnNvbGUubG9nKFxuICAgICAgYERJQUdOT1NUSUNTIC0gRmV0Y2hlZCAke2FsbFByb2ZpbGVzLmxlbmd0aH0gcHJvZmlsZXMgc3VjY2Vzc2Z1bGx5YFxuICAgICk7XG5cbiAgICAvLyBGaWx0ZXIgb3V0IGV4Y2x1ZGVkIHByb2ZpbGVzIGZvciB0aGUgZmlyc3Qgc2VsZWN0aW9uXG4gICAgbGV0IGF2YWlsYWJsZUZvckZpcnN0ID0gYWxsUHJvZmlsZXM7XG4gICAgaWYgKHNhZmVFeGNsdWRlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGF2YWlsYWJsZUZvckZpcnN0ID0gYWxsUHJvZmlsZXMuZmlsdGVyKFxuICAgICAgICAocHJvZmlsZSkgPT4gIXNhZmVFeGNsdWRlSWRzLmluY2x1ZGVzKHByb2ZpbGUuaWQpXG4gICAgICApO1xuXG4gICAgICAvLyBJZiBubyBwcm9maWxlcyBsZWZ0IGFmdGVyIGV4Y2x1c2lvbiwgdXNlIGFsbCBwcm9maWxlc1xuICAgICAgaWYgKGF2YWlsYWJsZUZvckZpcnN0Lmxlbmd0aCA9PT0gMCkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgXCJObyBwcm9maWxlcyBsZWZ0IGFmdGVyIGV4Y2x1c2lvbiwgdXNpbmcgYWxsIHByb2ZpbGVzIGZvciBmaXJzdCBzZWxlY3Rpb25cIlxuICAgICAgICApO1xuICAgICAgICBhdmFpbGFibGVGb3JGaXJzdCA9IGFsbFByb2ZpbGVzO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlbGVjdCBhIHJhbmRvbSBmaXJzdCBwcm9maWxlXG4gICAgY29uc3QgcmFuZG9tRmlyc3RJbmRleCA9IE1hdGguZmxvb3IoXG4gICAgICBNYXRoLnJhbmRvbSgpICogYXZhaWxhYmxlRm9yRmlyc3QubGVuZ3RoXG4gICAgKTtcbiAgICBjb25zdCBmaXJzdFByb2ZpbGUgPSBhdmFpbGFibGVGb3JGaXJzdFtyYW5kb21GaXJzdEluZGV4XTtcblxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIEZpcnN0IHByb2ZpbGUgc2VsZWN0ZWQ6ICR7Zmlyc3RQcm9maWxlLmlkfWApO1xuXG4gICAgLy8gRmlsdGVyIHByb2ZpbGVzIGZvciBzZWNvbmQgc2VsZWN0aW9uIChleGNsdWRlIHRoZSBmaXJzdCBwcm9maWxlIGFuZCBvdGhlcnMpXG4gICAgY29uc3QgY29tYmluZWRFeGNsdWRlSWRzID0gWy4uLnNhZmVFeGNsdWRlSWRzLCBmaXJzdFByb2ZpbGUuaWRdO1xuICAgIGxldCBhdmFpbGFibGVGb3JTZWNvbmQgPSBhbGxQcm9maWxlcy5maWx0ZXIoXG4gICAgICAocHJvZmlsZSkgPT4gIWNvbWJpbmVkRXhjbHVkZUlkcy5pbmNsdWRlcyhwcm9maWxlLmlkKVxuICAgICk7XG5cbiAgICAvLyBJZiBubyBwcm9maWxlcyBhdmFpbGFibGUgZm9yIHNlY29uZCBzZWxlY3Rpb24sIGp1c3QgZXhjbHVkZSB0aGUgZmlyc3QgcHJvZmlsZVxuICAgIGlmIChhdmFpbGFibGVGb3JTZWNvbmQubGVuZ3RoID09PSAwKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIFwiTm8gcHJvZmlsZXMgYXZhaWxhYmxlIGZvciBzZWNvbmQgc2VsZWN0aW9uIGFmdGVyIGV4Y2x1c2lvbnNcIlxuICAgICAgKTtcbiAgICAgIGF2YWlsYWJsZUZvclNlY29uZCA9IGFsbFByb2ZpbGVzLmZpbHRlcihcbiAgICAgICAgKHByb2ZpbGUpID0+IHByb2ZpbGUuaWQgIT09IGZpcnN0UHJvZmlsZS5pZFxuICAgICAgKTtcblxuICAgICAgLy8gSWYgc3RpbGwgbm8gcHJvZmlsZXMgYXZhaWxhYmxlLCByZXR1cm4ganVzdCB0aGUgZmlyc3QgcHJvZmlsZVxuICAgICAgaWYgKGF2YWlsYWJsZUZvclNlY29uZC5sZW5ndGggPT09IDApIHtcbiAgICAgICAgY29uc29sZS53YXJuKFwiQ291bGQgbm90IGZpbmQgYW55IHByb2ZpbGUgZGlmZmVyZW50IGZyb20gdGhlIGZpcnN0IG9uZVwiKTtcbiAgICAgICAgcmV0dXJuIFtmaXJzdFByb2ZpbGVdO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIFNlbGVjdCBhIHJhbmRvbSBzZWNvbmQgcHJvZmlsZVxuICAgIGNvbnN0IHJhbmRvbVNlY29uZEluZGV4ID0gTWF0aC5mbG9vcihcbiAgICAgIE1hdGgucmFuZG9tKCkgKiBhdmFpbGFibGVGb3JTZWNvbmQubGVuZ3RoXG4gICAgKTtcbiAgICBjb25zdCBzZWNvbmRQcm9maWxlID0gYXZhaWxhYmxlRm9yU2Vjb25kW3JhbmRvbVNlY29uZEluZGV4XTtcblxuICAgIGNvbnNvbGUubG9nKGBESUFHTk9TVElDUyAtIFNlY29uZCBwcm9maWxlIHNlbGVjdGVkOiAke3NlY29uZFByb2ZpbGUuaWR9YCk7XG5cbiAgICAvLyBSZXR1cm4gYm90aCBwcm9maWxlc1xuICAgIHJldHVybiBbZmlyc3RQcm9maWxlLCBzZWNvbmRQcm9maWxlXTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkV4Y2VwdGlvbiBpbiBnZXRSYW5kb21Qcm9maWxlczpcIiwgZXJyKTtcbiAgICB0aHJvdyBuZXcgRXJyb3IoYEZhaWxlZCB0byBnZXQgcmFuZG9tIHByb2ZpbGVzOiAke2Vyci5tZXNzYWdlfWApO1xuICB9XG59XG5cbi8qKlxuICogUmVjb3JkIGEgdm90ZSBpbiB0aGUgZGF0YWJhc2VcbiAqL1xuYXN5bmMgZnVuY3Rpb24gcmVjb3JkVm90ZShsZWZ0UHJvZmlsZUlkLCByaWdodFByb2ZpbGVJZCwgd2lubmVySWQsIHNlc3Npb25JZCkge1xuICB0cnkge1xuICAgIGNvbnN0IHZvdGVEYXRhID0ge1xuICAgICAgd2lubmVyX2lkOiB3aW5uZXJJZCxcbiAgICAgIGxlZnRfcHJvZmlsZV9pZDogbGVmdFByb2ZpbGVJZCxcbiAgICAgIHJpZ2h0X3Byb2ZpbGVfaWQ6IHJpZ2h0UHJvZmlsZUlkLFxuICAgICAgdm90ZXJfc2Vzc2lvbl9pZDogc2Vzc2lvbklkLFxuICAgIH07XG5cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5mcm9tKFwidm90ZXNcIikuaW5zZXJ0KFt2b3RlRGF0YV0pO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgcmVjb3JkaW5nIHZvdGU6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vKipcbiAqIEdldCByZWNlbnQgdm90ZXMgZm9yIGEgdXNlciBzZXNzaW9uXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFJlY2VudFZvdGVzKHNlc3Npb25JZCwgbGltaXQgPSA1KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwidm90ZXNcIilcbiAgICAgIC5zZWxlY3QoXCIqXCIpXG4gICAgICAuZXEoXCJ2b3Rlcl9zZXNzaW9uX2lkXCIsIHNlc3Npb25JZClcbiAgICAgIC5vcmRlcihcImNyZWF0ZWRfYXRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcmVjZW50IHZvdGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogR2V0IHRvcCBwcm9maWxlcyBieSBFTE8gcmF0aW5nXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGdldFRvcFByb2ZpbGVzKGxpbWl0ID0gMTApIHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5vcmRlcihcImVsb19yYXRpbmdcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdG9wIHByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8qKlxuICogQ291bnQgcHJvZmlsZXMgaW4gdGhlIGRhdGFiYXNlXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNvdW50UHJvZmlsZXMoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb3VudGluZyBwcm9maWxlczpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50IHx8IDA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGNvdW50UHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZ2V0UHJvZmlsZXMsXG4gIGdldFByb2ZpbGVCeUlkLFxuICBnZXRSYW5kb21Qcm9maWxlcyxcbiAgcmVjb3JkVm90ZSxcbiAgZ2V0UmVjZW50Vm90ZXMsXG4gIGdldFRvcFByb2ZpbGVzLFxuICBjb3VudFByb2ZpbGVzLFxufTtcbiJdLCJuYW1lcyI6WyJzdXBhYmFzZSIsInJlcXVpcmUiLCJnZXRQcm9maWxlcyIsInBhZ2UiLCJsaW1pdCIsInF1ZXJ5IiwiZmlsdGVyIiwic29ydCIsIm9mZnNldCIsInByb2ZpbGVRdWVyeSIsImZyb20iLCJzZWxlY3QiLCJjb3VudCIsIm9yIiwiZXEiLCJpbGlrZSIsIm9yZGVyIiwiYXNjZW5kaW5nIiwicmFuZ2UiLCJkYXRhIiwicHJvZmlsZXMiLCJlcnJvciIsInByb2ZpbGVzV2l0aERldGFpbHMiLCJwcm9maWxlIiwiZWR1Y2F0aW9uIiwiaWQiLCJleHBlcmllbmNlIiwicHVzaCIsInRvdGFsIiwidG90YWxQYWdlcyIsIk1hdGgiLCJjZWlsIiwiY29uc29sZSIsImdldFByb2ZpbGVCeUlkIiwic2luZ2xlIiwic2tpbGxzIiwiZ2V0UmFuZG9tUHJvZmlsZXMiLCJleGNsdWRlSWRzIiwic2FmZUV4Y2x1ZGVJZHMiLCJBcnJheSIsImlzQXJyYXkiLCJpc05hTiIsImxvZyIsInByb2ZpbGVDb3VudCIsImNvdW50RXJyb3IiLCJoZWFkIiwiRXJyb3IiLCJtZXNzYWdlIiwiYWxsUHJvZmlsZXMiLCJwcm9maWxlc0Vycm9yIiwibGVuZ3RoIiwiYXZhaWxhYmxlRm9yRmlyc3QiLCJpbmNsdWRlcyIsIndhcm4iLCJyYW5kb21GaXJzdEluZGV4IiwiZmxvb3IiLCJyYW5kb20iLCJmaXJzdFByb2ZpbGUiLCJjb21iaW5lZEV4Y2x1ZGVJZHMiLCJhdmFpbGFibGVGb3JTZWNvbmQiLCJyYW5kb21TZWNvbmRJbmRleCIsInNlY29uZFByb2ZpbGUiLCJlcnIiLCJyZWNvcmRWb3RlIiwibGVmdFByb2ZpbGVJZCIsInJpZ2h0UHJvZmlsZUlkIiwid2lubmVySWQiLCJzZXNzaW9uSWQiLCJ2b3RlRGF0YSIsIndpbm5lcl9pZCIsImxlZnRfcHJvZmlsZV9pZCIsInJpZ2h0X3Byb2ZpbGVfaWQiLCJ2b3Rlcl9zZXNzaW9uX2lkIiwiaW5zZXJ0IiwiZ2V0UmVjZW50Vm90ZXMiLCJnZXRUb3BQcm9maWxlcyIsImNvdW50UHJvZmlsZXMiLCJtb2R1bGUiLCJleHBvcnRzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/profiles-js.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { createClient } = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n(__webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\").config)({\n    path: \".env.local\"\n});\n// Get environment variables with fallbacks for development\nconst supabaseUrl = \"https://qbzwhueywwpqkucwfnsb.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFiendodWV5d3dwcWt1Y3dmbnNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4MDk4MzEsImV4cCI6MjA1OTM4NTgzMX0.YiZec-9dg4z32pqCuSGGB3uyqrEZs5zm-b_unS_2czs\" || 0;\n// Create Supabase client\nconst supabase = createClient(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: false\n    }\n});\n// Log initialization for debugging\nconsole.log(`Supabase JS client initialized with URL: ${supabaseUrl.substring(0, 20)}...`);\n// Export the client\nmodule.exports = {\n    supabase\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sRUFBRUEsWUFBWSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDLDhGQUF1QjtBQUN4REEscUZBQXdCLENBQUM7SUFBRUUsTUFBTTtBQUFhO0FBRTlDLDJEQUEyRDtBQUMzRCxNQUFNQyxjQUNKQywwQ0FBb0MsSUFDcEMsQ0FBdUM7QUFDekMsTUFBTUcsa0JBQ0pILGtOQUF5QyxJQUFJLENBQWU7QUFFOUQseUJBQXlCO0FBQ3pCLE1BQU1LLFdBQVdWLGFBQWFJLGFBQWFJLGlCQUFpQjtJQUMxREcsTUFBTTtRQUNKQyxnQkFBZ0I7SUFDbEI7QUFDRjtBQUVBLG1DQUFtQztBQUNuQ0MsUUFBUUMsR0FBRyxDQUNULENBQUMseUNBQXlDLEVBQUVWLFlBQVlXLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO0FBRy9FLG9CQUFvQjtBQUNwQkMsT0FBT0MsT0FBTyxHQUFHO0lBQUVQO0FBQVMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSByZXF1aXJlKFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCIpO1xucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoeyBwYXRoOiBcIi5lbnYubG9jYWxcIiB9KTtcblxuLy8gR2V0IGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGZhbGxiYWNrcyBmb3IgZGV2ZWxvcG1lbnRcbmNvbnN0IHN1cGFiYXNlVXJsID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8XG4gIFwiaHR0cHM6Ly95b3VyLXN1cGFiYXNlLXVybC5zdXBhYmFzZS5jb1wiO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgXCJ5b3VyLWFub24ta2V5XCI7XG5cbi8vIENyZWF0ZSBTdXBhYmFzZSBjbGllbnRcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgYXV0aDoge1xuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgfSxcbn0pO1xuXG4vLyBMb2cgaW5pdGlhbGl6YXRpb24gZm9yIGRlYnVnZ2luZ1xuY29uc29sZS5sb2coXG4gIGBTdXBhYmFzZSBKUyBjbGllbnQgaW5pdGlhbGl6ZWQgd2l0aCBVUkw6ICR7c3VwYWJhc2VVcmwuc3Vic3RyaW5nKDAsIDIwKX0uLi5gXG4pO1xuXG4vLyBFeHBvcnQgdGhlIGNsaWVudFxubW9kdWxlLmV4cG9ydHMgPSB7IHN1cGFiYXNlIH07XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwicmVxdWlyZSIsImNvbmZpZyIsInBhdGgiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/dotenv","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fprofiles%2Frandom%2Froute&page=%2Fapi%2Fprofiles%2Frandom%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fprofiles%2Frandom%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();