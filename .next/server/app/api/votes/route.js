"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/votes/route";
exports.ids = ["app/api/votes/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "buffer":
/*!*************************!*\
  !*** external "buffer" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("buffer");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("crypto");

/***/ }),

/***/ "events":
/*!*************************!*\
  !*** external "events" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("events");

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

module.exports = require("https");

/***/ }),

/***/ "net":
/*!**********************!*\
  !*** external "net" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("net");

/***/ }),

/***/ "os":
/*!*********************!*\
  !*** external "os" ***!
  \*********************/
/***/ ((module) => {

module.exports = require("os");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("stream");

/***/ }),

/***/ "tls":
/*!**********************!*\
  !*** external "tls" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("tls");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \*********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_vik_GTRanked_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/votes/route.ts */ \"(rsc)/./app/api/votes/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/votes/route\",\n        pathname: \"/api/votes\",\n        filename: \"route\",\n        bundlePath: \"app/api/votes/route\"\n    },\n    resolvedPagePath: \"/Users/vik/GTRanked/app/api/votes/route.ts\",\n    nextConfigOutput,\n    userland: _Users_vik_GTRanked_app_api_votes_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/votes/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ2b3RlcyUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGdm90ZXMlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZ2b3RlcyUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnZpayUyRkdUUmFua2VkJTJGYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj0lMkZVc2VycyUyRnZpayUyRkdUUmFua2VkJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNOO0FBQ3ZFO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvPzQ1ODciXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBwYXRjaEZldGNoIGFzIF9wYXRjaEZldGNoIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL3BhdGNoLWZldGNoXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3Zpay9HVFJhbmtlZC9hcHAvYXBpL3ZvdGVzL3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS92b3Rlcy9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL3ZvdGVzXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS92b3Rlcy9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIi9Vc2Vycy92aWsvR1RSYW5rZWQvYXBwL2FwaS92b3Rlcy9yb3V0ZS50c1wiLFxuICAgIG5leHRDb25maWdPdXRwdXQsXG4gICAgdXNlcmxhbmRcbn0pO1xuLy8gUHVsbCBvdXQgdGhlIGV4cG9ydHMgdGhhdCB3ZSBuZWVkIHRvIGV4cG9zZSBmcm9tIHRoZSBtb2R1bGUuIFRoaXMgc2hvdWxkXG4vLyBiZSBlbGltaW5hdGVkIHdoZW4gd2UndmUgbW92ZWQgdGhlIG90aGVyIHJvdXRlcyB0byB0aGUgbmV3IGZvcm1hdC4gVGhlc2Vcbi8vIGFyZSB1c2VkIHRvIGhvb2sgaW50byB0aGUgcm91dGUuXG5jb25zdCB7IHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmNvbnN0IG9yaWdpbmFsUGF0aG5hbWUgPSBcIi9hcGkvdm90ZXMvcm91dGVcIjtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgc2VydmVySG9va3MsXG4gICAgICAgIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgb3JpZ2luYWxQYXRobmFtZSwgcGF0Y2hGZXRjaCwgIH07XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPWFwcC1yb3V0ZS5qcy5tYXAiXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/votes/route.ts":
/*!********************************!*\
  !*** ./app/api/votes/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_profiles__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/profiles */ \"(rsc)/./lib/profiles.ts\");\n\n\nasync function GET(request) {\n    try {\n        const { searchParams } = new URL(request.url);\n        const sessionId = searchParams.get(\"sessionId\");\n        const limit = parseInt(searchParams.get(\"limit\") || \"10\", 10);\n        if (!sessionId) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"Session ID is required\"\n            }, {\n                status: 400\n            });\n        }\n        // Get votes from DB\n        const votes = await (0,_lib_profiles__WEBPACK_IMPORTED_MODULE_1__.getRecentVotes)(sessionId, limit);\n        // Enhance vote data with profile names\n        const votesWithNames = await Promise.all(votes.map(async (vote)=>{\n            const leftProfile = await (0,_lib_profiles__WEBPACK_IMPORTED_MODULE_1__.getProfileById)(vote.left_profile_id);\n            const rightProfile = await (0,_lib_profiles__WEBPACK_IMPORTED_MODULE_1__.getProfileById)(vote.right_profile_id);\n            let winnerName = null;\n            if (vote.winner_id) {\n                if (vote.winner_id === vote.left_profile_id) {\n                    winnerName = leftProfile?.full_name;\n                } else {\n                    winnerName = rightProfile?.full_name;\n                }\n            }\n            return {\n                ...vote,\n                left_profile_name: leftProfile?.full_name || \"Unknown\",\n                right_profile_name: rightProfile?.full_name || \"Unknown\",\n                winner_name: winnerName\n            };\n        }));\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            votes: votesWithNames,\n            total: votesWithNames.length\n        });\n    } catch (error) {\n        console.error(\"Error fetching votes:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"Failed to fetch votes\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL3ZvdGVzL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7OztBQUEyQztBQUNxQjtBQUV6RCxlQUFlRyxJQUFJQyxPQUFnQjtJQUN4QyxJQUFJO1FBQ0YsTUFBTSxFQUFFQyxZQUFZLEVBQUUsR0FBRyxJQUFJQyxJQUFJRixRQUFRRyxHQUFHO1FBQzVDLE1BQU1DLFlBQVlILGFBQWFJLEdBQUcsQ0FBQztRQUNuQyxNQUFNQyxRQUFRQyxTQUFTTixhQUFhSSxHQUFHLENBQUMsWUFBWSxNQUFNO1FBRTFELElBQUksQ0FBQ0QsV0FBVztZQUNkLE9BQU9SLHFEQUFZQSxDQUFDWSxJQUFJLENBQ3RCO2dCQUFFQyxPQUFPO1lBQXlCLEdBQ2xDO2dCQUFFQyxRQUFRO1lBQUk7UUFFbEI7UUFFQSxvQkFBb0I7UUFDcEIsTUFBTUMsUUFBUSxNQUFNZCw2REFBY0EsQ0FBQ08sV0FBV0U7UUFFOUMsdUNBQXVDO1FBQ3ZDLE1BQU1NLGlCQUFpQixNQUFNQyxRQUFRQyxHQUFHLENBQ3RDSCxNQUFNSSxHQUFHLENBQUMsT0FBT0M7WUFDZixNQUFNQyxjQUFjLE1BQU1uQiw2REFBY0EsQ0FBQ2tCLEtBQUtFLGVBQWU7WUFDN0QsTUFBTUMsZUFBZSxNQUFNckIsNkRBQWNBLENBQUNrQixLQUFLSSxnQkFBZ0I7WUFFL0QsSUFBSUMsYUFBYTtZQUNqQixJQUFJTCxLQUFLTSxTQUFTLEVBQUU7Z0JBQ2xCLElBQUlOLEtBQUtNLFNBQVMsS0FBS04sS0FBS0UsZUFBZSxFQUFFO29CQUMzQ0csYUFBYUosYUFBYU07Z0JBQzVCLE9BQU87b0JBQ0xGLGFBQWFGLGNBQWNJO2dCQUM3QjtZQUNGO1lBRUEsT0FBTztnQkFDTCxHQUFHUCxJQUFJO2dCQUNQUSxtQkFBbUJQLGFBQWFNLGFBQWE7Z0JBQzdDRSxvQkFBb0JOLGNBQWNJLGFBQWE7Z0JBQy9DRyxhQUFhTDtZQUNmO1FBQ0Y7UUFHRixPQUFPekIscURBQVlBLENBQUNZLElBQUksQ0FBQztZQUN2QkcsT0FBT0M7WUFDUGUsT0FBT2YsZUFBZWdCLE1BQU07UUFDOUI7SUFDRixFQUFFLE9BQU9uQixPQUFPO1FBQ2RvQixRQUFRcEIsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkMsT0FBT2IscURBQVlBLENBQUNZLElBQUksQ0FDdEI7WUFBRUMsT0FBTztRQUF3QixHQUNqQztZQUFFQyxRQUFRO1FBQUk7SUFFbEI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2d0cmFua2VkLy4vYXBwL2FwaS92b3Rlcy9yb3V0ZS50cz83NTA0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L3NlcnZlclwiO1xuaW1wb3J0IHsgZ2V0UmVjZW50Vm90ZXMsIGdldFByb2ZpbGVCeUlkIH0gZnJvbSBcIkAvbGliL3Byb2ZpbGVzXCI7XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBHRVQocmVxdWVzdDogUmVxdWVzdCkge1xuICB0cnkge1xuICAgIGNvbnN0IHsgc2VhcmNoUGFyYW1zIH0gPSBuZXcgVVJMKHJlcXVlc3QudXJsKTtcbiAgICBjb25zdCBzZXNzaW9uSWQgPSBzZWFyY2hQYXJhbXMuZ2V0KFwic2Vzc2lvbklkXCIpO1xuICAgIGNvbnN0IGxpbWl0ID0gcGFyc2VJbnQoc2VhcmNoUGFyYW1zLmdldChcImxpbWl0XCIpIHx8IFwiMTBcIiwgMTApO1xuXG4gICAgaWYgKCFzZXNzaW9uSWQpIHtcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcbiAgICAgICAgeyBlcnJvcjogXCJTZXNzaW9uIElEIGlzIHJlcXVpcmVkXCIgfSxcbiAgICAgICAgeyBzdGF0dXM6IDQwMCB9XG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEdldCB2b3RlcyBmcm9tIERCXG4gICAgY29uc3Qgdm90ZXMgPSBhd2FpdCBnZXRSZWNlbnRWb3RlcyhzZXNzaW9uSWQsIGxpbWl0KTtcblxuICAgIC8vIEVuaGFuY2Ugdm90ZSBkYXRhIHdpdGggcHJvZmlsZSBuYW1lc1xuICAgIGNvbnN0IHZvdGVzV2l0aE5hbWVzID0gYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICB2b3Rlcy5tYXAoYXN5bmMgKHZvdGUpID0+IHtcbiAgICAgICAgY29uc3QgbGVmdFByb2ZpbGUgPSBhd2FpdCBnZXRQcm9maWxlQnlJZCh2b3RlLmxlZnRfcHJvZmlsZV9pZCk7XG4gICAgICAgIGNvbnN0IHJpZ2h0UHJvZmlsZSA9IGF3YWl0IGdldFByb2ZpbGVCeUlkKHZvdGUucmlnaHRfcHJvZmlsZV9pZCk7XG5cbiAgICAgICAgbGV0IHdpbm5lck5hbWUgPSBudWxsO1xuICAgICAgICBpZiAodm90ZS53aW5uZXJfaWQpIHtcbiAgICAgICAgICBpZiAodm90ZS53aW5uZXJfaWQgPT09IHZvdGUubGVmdF9wcm9maWxlX2lkKSB7XG4gICAgICAgICAgICB3aW5uZXJOYW1lID0gbGVmdFByb2ZpbGU/LmZ1bGxfbmFtZTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgd2lubmVyTmFtZSA9IHJpZ2h0UHJvZmlsZT8uZnVsbF9uYW1lO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgLi4udm90ZSxcbiAgICAgICAgICBsZWZ0X3Byb2ZpbGVfbmFtZTogbGVmdFByb2ZpbGU/LmZ1bGxfbmFtZSB8fCBcIlVua25vd25cIixcbiAgICAgICAgICByaWdodF9wcm9maWxlX25hbWU6IHJpZ2h0UHJvZmlsZT8uZnVsbF9uYW1lIHx8IFwiVW5rbm93blwiLFxuICAgICAgICAgIHdpbm5lcl9uYW1lOiB3aW5uZXJOYW1lLFxuICAgICAgICB9O1xuICAgICAgfSlcbiAgICApO1xuXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHtcbiAgICAgIHZvdGVzOiB2b3Rlc1dpdGhOYW1lcyxcbiAgICAgIHRvdGFsOiB2b3Rlc1dpdGhOYW1lcy5sZW5ndGgsXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGZldGNoaW5nIHZvdGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxuICAgICAgeyBlcnJvcjogXCJGYWlsZWQgdG8gZmV0Y2ggdm90ZXNcIiB9LFxuICAgICAgeyBzdGF0dXM6IDUwMCB9XG4gICAgKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk5leHRSZXNwb25zZSIsImdldFJlY2VudFZvdGVzIiwiZ2V0UHJvZmlsZUJ5SWQiLCJHRVQiLCJyZXF1ZXN0Iiwic2VhcmNoUGFyYW1zIiwiVVJMIiwidXJsIiwic2Vzc2lvbklkIiwiZ2V0IiwibGltaXQiLCJwYXJzZUludCIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsInZvdGVzIiwidm90ZXNXaXRoTmFtZXMiLCJQcm9taXNlIiwiYWxsIiwibWFwIiwidm90ZSIsImxlZnRQcm9maWxlIiwibGVmdF9wcm9maWxlX2lkIiwicmlnaHRQcm9maWxlIiwicmlnaHRfcHJvZmlsZV9pZCIsIndpbm5lck5hbWUiLCJ3aW5uZXJfaWQiLCJmdWxsX25hbWUiLCJsZWZ0X3Byb2ZpbGVfbmFtZSIsInJpZ2h0X3Byb2ZpbGVfbmFtZSIsIndpbm5lcl9uYW1lIiwidG90YWwiLCJsZW5ndGgiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./app/api/votes/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/profiles.ts":
/*!*************************!*\
  !*** ./lib/profiles.ts ***!
  \*************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   countProfiles: () => (/* binding */ countProfiles),\n/* harmony export */   getProfileById: () => (/* binding */ getProfileById),\n/* harmony export */   getProfiles: () => (/* binding */ getProfiles),\n/* harmony export */   getRandomProfiles: () => (/* binding */ getRandomProfiles),\n/* harmony export */   getRecentVotes: () => (/* binding */ getRecentVotes),\n/* harmony export */   getTopProfiles: () => (/* binding */ getTopProfiles),\n/* harmony export */   recordVote: () => (/* binding */ recordVote)\n/* harmony export */ });\n// Import supabase as a CommonJS module\nconst { supabase } = __webpack_require__(/*! ./supabase */ \"(rsc)/./lib/supabase.js\");\n// Get profiles with pagination, filtering and sorting\nasync function getProfiles({ page = 1, limit = 10, query = \"\", filter = \"all\", sort = \"elo\" }) {\n    try {\n        // Calculate offset\n        const offset = (page - 1) * limit;\n        // Start building query\n        let profileQuery = supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\"\n        });\n        // Add search filter if query is provided\n        if (query) {\n            profileQuery = profileQuery.or(`full_name.ilike.%${query}%,title.ilike.%${query}%,company.ilike.%${query}%,major.ilike.%${query}%`);\n        }\n        // Add category filter\n        if (filter !== \"all\") {\n            if (filter === \"students\") {\n                profileQuery = profileQuery.eq(\"is_student\", true);\n            } else if (filter === \"alumni\") {\n                profileQuery = profileQuery.eq(\"is_student\", false);\n            } else {\n                // Assume filter is a major\n                profileQuery = profileQuery.ilike(\"major\", `%${filter}%`);\n            }\n        }\n        // Add sorting\n        if (sort === \"elo\") {\n            profileQuery = profileQuery.order(\"elo_rating\", {\n                ascending: false\n            });\n        } else if (sort === \"name\") {\n            profileQuery = profileQuery.order(\"full_name\");\n        } else if (sort === \"graduation\") {\n            profileQuery = profileQuery.order(\"graduation_year\");\n        }\n        // Add pagination\n        profileQuery = profileQuery.range(offset, offset + limit - 1);\n        // Execute query\n        const { data: profiles, error, count } = await profileQuery;\n        if (error) throw error;\n        // Get education and work experience for each profile\n        const profilesWithDetails = [];\n        for (const profile of profiles || []){\n            const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", profile.id);\n            const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", profile.id).order(\"is_current\", {\n                ascending: false\n            }).order(\"end_date\", {\n                ascending: false\n            });\n            profilesWithDetails.push({\n                ...profile,\n                education: education || [],\n                experience: experience || []\n            });\n        }\n        return {\n            profiles: profilesWithDetails,\n            total: count || 0,\n            totalPages: Math.ceil((count || 0) / limit)\n        };\n    } catch (error) {\n        console.error(\"Error fetching profiles:\", error);\n        throw error;\n    }\n}\n// Get a single profile by ID with education and work experience\nasync function getProfileById(id) {\n    try {\n        const { data: profile, error } = await supabase.from(\"profiles\").select(\"*\").eq(\"id\", id).single();\n        if (error) throw error;\n        if (!profile) return null;\n        const { data: education } = await supabase.from(\"education\").select(\"*\").eq(\"profile_id\", id);\n        const { data: experience } = await supabase.from(\"work_experience\").select(\"*\").eq(\"profile_id\", id).order(\"is_current\", {\n            ascending: false\n        }).order(\"end_date\", {\n            ascending: false\n        });\n        return {\n            ...profile,\n            education: education || [],\n            experience: experience || []\n        };\n    } catch (error) {\n        console.error(`Error fetching profile with ID ${id}:`, error);\n        return null;\n    }\n}\n// Get two random profiles for voting\nasync function getRandomProfiles(excludeIds = []) {\n    try {\n        // Build the query for the first profile\n        let firstProfileQuery = supabase.from(\"profiles\").select(\"*\");\n        // Only add the exclude condition if we have IDs to exclude\n        if (excludeIds.length > 0) {\n            firstProfileQuery = firstProfileQuery.not(\"id\", \"in\", `(${excludeIds.join(\",\")})`);\n        }\n        // Get first random profile\n        const { data: firstProfileArray, error: firstError } = await firstProfileQuery.order(\"random()\").limit(1);\n        if (firstError) {\n            console.error(\"Error fetching first profile:\", firstError);\n            throw firstError;\n        }\n        let firstProfile = firstProfileArray?.[0];\n        if (!firstProfile) {\n            // Try without the exclusions if we couldn't find any profiles\n            if (excludeIds.length > 0) {\n                console.log(\"Trying to fetch a profile without exclusions...\");\n                const { data: fallbackProfiles } = await supabase.from(\"profiles\").select(\"*\").order(\"random()\").limit(1);\n                firstProfile = fallbackProfiles?.[0];\n                if (!firstProfile) {\n                    throw new Error(\"No profiles found in the database\");\n                }\n            } else {\n                throw new Error(\"No profiles found in the database\");\n            }\n        }\n        // Build the query for the second profile\n        let secondProfileQuery = supabase.from(\"profiles\").select(\"*\");\n        // Always exclude the first profile\n        secondProfileQuery = secondProfileQuery.neq(\"id\", firstProfile.id);\n        // Add other excludes if needed\n        if (excludeIds.length > 0) {\n            secondProfileQuery = secondProfileQuery.not(\"id\", \"in\", `(${excludeIds.join(\",\")})`);\n        }\n        // Get second random profile\n        const { data: secondProfileArray, error: secondError } = await secondProfileQuery.order(\"random()\").limit(1);\n        if (secondError) {\n            console.error(\"Error fetching second profile:\", secondError);\n            throw secondError;\n        }\n        let secondProfile = secondProfileArray?.[0];\n        if (!secondProfile) {\n            // If we can't find a second profile, just get any profile that's not the first one\n            console.log(\"Trying to fetch a second profile without exclusions...\");\n            const { data: fallbackProfiles } = await supabase.from(\"profiles\").select(\"*\").neq(\"id\", firstProfile.id).order(\"random()\").limit(1);\n            secondProfile = fallbackProfiles?.[0];\n            if (!secondProfile) {\n                throw new Error(\"Could not find a second profile. Do you have at least 2 profiles in the database?\");\n            }\n        }\n        return [\n            firstProfile,\n            secondProfile\n        ];\n    } catch (error) {\n        console.error(\"Error fetching random profiles:\", error);\n        throw error;\n    }\n}\n// Record a vote in the database\nasync function recordVote(leftProfileId, rightProfileId, winnerId, sessionId) {\n    try {\n        const voteData = {\n            winner_id: winnerId,\n            left_profile_id: leftProfileId,\n            right_profile_id: rightProfileId,\n            voter_session_id: sessionId\n        };\n        const { error } = await supabase.from(\"votes\").insert([\n            voteData\n        ]);\n        if (error) throw error;\n    // No need to manually update ELO ratings\n    // The database trigger will handle that automatically\n    } catch (error) {\n        console.error(\"Error recording vote:\", error);\n        throw error;\n    }\n}\n// Get recent votes for a user session\nasync function getRecentVotes(sessionId, limit = 5) {\n    try {\n        const { data, error } = await supabase.from(\"votes\").select(\"*\").eq(\"voter_session_id\", sessionId).order(\"created_at\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching recent votes:\", error);\n        return [];\n    }\n}\n// Get top profiles by ELO rating\nasync function getTopProfiles(limit = 10) {\n    try {\n        const { data, error } = await supabase.from(\"profiles\").select(\"*\").order(\"elo_rating\", {\n            ascending: false\n        }).limit(limit);\n        if (error) throw error;\n        return data || [];\n    } catch (error) {\n        console.error(\"Error fetching top profiles:\", error);\n        return [];\n    }\n}\n// Diagnostic function to count profiles\nasync function countProfiles() {\n    try {\n        const { count, error } = await supabase.from(\"profiles\").select(\"*\", {\n            count: \"exact\",\n            head: true\n        });\n        if (error) {\n            console.error(\"Error counting profiles:\", error);\n            throw error;\n        }\n        return count || 0;\n    } catch (error) {\n        console.error(\"Error in countProfiles:\", error);\n        return 0;\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDLDRCQUE0QkE7WUFDMUMsTUFBTUE7UUFDUjtRQUVBLE9BQU9ULFNBQVM7SUFDbEIsRUFBRSxPQUFPUyxPQUFPO1FBQ2RXLFFBQVFYLEtBQUssQ0FBQywyQkFBMkJBO1FBQ3pDLE9BQU87SUFDVDtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vZ3RyYW5rZWQvLi9saWIvcHJvZmlsZXMudHM/NDk2YSJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBJbXBvcnQgc3VwYWJhc2UgYXMgYSBDb21tb25KUyBtb2R1bGVcbmNvbnN0IHsgc3VwYWJhc2UgfSA9IHJlcXVpcmUoXCIuL3N1cGFiYXNlXCIpO1xuXG5leHBvcnQgdHlwZSBQcm9maWxlID0ge1xuICBpZDogbnVtYmVyO1xuICBhdmlhdG9faWQ6IHN0cmluZztcbiAgZnVsbF9uYW1lOiBzdHJpbmc7XG4gIGhlYWRsaW5lPzogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgY29tcGFueT86IHN0cmluZztcbiAgbWFqb3I/OiBzdHJpbmc7XG4gIGdyYWR1YXRpb25feWVhcj86IG51bWJlcjtcbiAgaXNfc3R1ZGVudDogYm9vbGVhbjtcbiAgbG9jYXRpb24/OiBzdHJpbmc7XG4gIGVsb19yYXRpbmc6IG51bWJlcjtcbiAgbGlua2VkaW5fdXJsPzogc3RyaW5nO1xuICB0d2l0dGVyX3VybD86IHN0cmluZztcbiAgZ2l0aHViX3VybD86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIEVkdWNhdGlvbiA9IHtcbiAgaWQ6IG51bWJlcjtcbiAgcHJvZmlsZV9pZDogbnVtYmVyO1xuICBzY2hvb2xfbmFtZTogc3RyaW5nO1xuICBkZWdyZWU/OiBzdHJpbmc7XG4gIGZpZWxkX29mX3N0dWR5Pzogc3RyaW5nO1xuICBzdGFydF9kYXRlPzogc3RyaW5nO1xuICBlbmRfZGF0ZT86IHN0cmluZztcbn07XG5cbmV4cG9ydCB0eXBlIFdvcmtFeHBlcmllbmNlID0ge1xuICBpZDogbnVtYmVyO1xuICBwcm9maWxlX2lkOiBudW1iZXI7XG4gIGNvbXBhbnlfbmFtZTogc3RyaW5nO1xuICB0aXRsZT86IHN0cmluZztcbiAgc3RhcnRfZGF0ZT86IHN0cmluZztcbiAgZW5kX2RhdGU/OiBzdHJpbmc7XG4gIGlzX2N1cnJlbnQ6IGJvb2xlYW47XG59O1xuXG5leHBvcnQgdHlwZSBWb3RlID0ge1xuICBpZDogbnVtYmVyO1xuICB3aW5uZXJfaWQ/OiBudW1iZXI7XG4gIGxlZnRfcHJvZmlsZV9pZDogbnVtYmVyO1xuICByaWdodF9wcm9maWxlX2lkOiBudW1iZXI7XG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcbn07XG5cbmludGVyZmFjZSBQcm9maWxlV2l0aERldGFpbHMgZXh0ZW5kcyBQcm9maWxlIHtcbiAgZWR1Y2F0aW9uPzogRWR1Y2F0aW9uW107XG4gIGV4cGVyaWVuY2U/OiBXb3JrRXhwZXJpZW5jZVtdO1xufVxuXG4vLyBHZXQgcHJvZmlsZXMgd2l0aCBwYWdpbmF0aW9uLCBmaWx0ZXJpbmcgYW5kIHNvcnRpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRQcm9maWxlcyh7XG4gIHBhZ2UgPSAxLFxuICBsaW1pdCA9IDEwLFxuICBxdWVyeSA9IFwiXCIsXG4gIGZpbHRlciA9IFwiYWxsXCIsXG4gIHNvcnQgPSBcImVsb1wiLFxufToge1xuICBwYWdlPzogbnVtYmVyO1xuICBsaW1pdD86IG51bWJlcjtcbiAgcXVlcnk/OiBzdHJpbmc7XG4gIGZpbHRlcj86IHN0cmluZztcbiAgc29ydD86IHN0cmluZztcbn0pOiBQcm9taXNlPHtcbiAgcHJvZmlsZXM6IFByb2ZpbGVXaXRoRGV0YWlsc1tdO1xuICB0b3RhbDogbnVtYmVyO1xuICB0b3RhbFBhZ2VzOiBudW1iZXI7XG59PiB7XG4gIHRyeSB7XG4gICAgLy8gQ2FsY3VsYXRlIG9mZnNldFxuICAgIGNvbnN0IG9mZnNldCA9IChwYWdlIC0gMSkgKiBsaW1pdDtcblxuICAgIC8vIFN0YXJ0IGJ1aWxkaW5nIHF1ZXJ5XG4gICAgbGV0IHByb2ZpbGVRdWVyeSA9IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIgfSk7XG5cbiAgICAvLyBBZGQgc2VhcmNoIGZpbHRlciBpZiBxdWVyeSBpcyBwcm92aWRlZFxuICAgIGlmIChxdWVyeSkge1xuICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5Lm9yKFxuICAgICAgICBgZnVsbF9uYW1lLmlsaWtlLiUke3F1ZXJ5fSUsdGl0bGUuaWxpa2UuJSR7cXVlcnl9JSxjb21wYW55LmlsaWtlLiUke3F1ZXJ5fSUsbWFqb3IuaWxpa2UuJSR7cXVlcnl9JWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gQWRkIGNhdGVnb3J5IGZpbHRlclxuICAgIGlmIChmaWx0ZXIgIT09IFwiYWxsXCIpIHtcbiAgICAgIGlmIChmaWx0ZXIgPT09IFwic3R1ZGVudHNcIikge1xuICAgICAgICBwcm9maWxlUXVlcnkgPSBwcm9maWxlUXVlcnkuZXEoXCJpc19zdHVkZW50XCIsIHRydWUpO1xuICAgICAgfSBlbHNlIGlmIChmaWx0ZXIgPT09IFwiYWx1bW5pXCIpIHtcbiAgICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5LmVxKFwiaXNfc3R1ZGVudFwiLCBmYWxzZSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBBc3N1bWUgZmlsdGVyIGlzIGEgbWFqb3JcbiAgICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5LmlsaWtlKFwibWFqb3JcIiwgYCUke2ZpbHRlcn0lYCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWRkIHNvcnRpbmdcbiAgICBpZiAoc29ydCA9PT0gXCJlbG9cIikge1xuICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5Lm9yZGVyKFwiZWxvX3JhdGluZ1wiLCB7IGFzY2VuZGluZzogZmFsc2UgfSk7XG4gICAgfSBlbHNlIGlmIChzb3J0ID09PSBcIm5hbWVcIikge1xuICAgICAgcHJvZmlsZVF1ZXJ5ID0gcHJvZmlsZVF1ZXJ5Lm9yZGVyKFwiZnVsbF9uYW1lXCIpO1xuICAgIH0gZWxzZSBpZiAoc29ydCA9PT0gXCJncmFkdWF0aW9uXCIpIHtcbiAgICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5vcmRlcihcImdyYWR1YXRpb25feWVhclwiKTtcbiAgICB9XG5cbiAgICAvLyBBZGQgcGFnaW5hdGlvblxuICAgIHByb2ZpbGVRdWVyeSA9IHByb2ZpbGVRdWVyeS5yYW5nZShvZmZzZXQsIG9mZnNldCArIGxpbWl0IC0gMSk7XG5cbiAgICAvLyBFeGVjdXRlIHF1ZXJ5XG4gICAgY29uc3QgeyBkYXRhOiBwcm9maWxlcywgZXJyb3IsIGNvdW50IH0gPSBhd2FpdCBwcm9maWxlUXVlcnk7XG5cbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuXG4gICAgLy8gR2V0IGVkdWNhdGlvbiBhbmQgd29yayBleHBlcmllbmNlIGZvciBlYWNoIHByb2ZpbGVcbiAgICBjb25zdCBwcm9maWxlc1dpdGhEZXRhaWxzOiBQcm9maWxlV2l0aERldGFpbHNbXSA9IFtdO1xuXG4gICAgZm9yIChjb25zdCBwcm9maWxlIG9mIHByb2ZpbGVzIHx8IFtdKSB7XG4gICAgICBjb25zdCB7IGRhdGE6IGVkdWNhdGlvbiB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgLmZyb20oXCJlZHVjYXRpb25cIilcbiAgICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBwcm9maWxlLmlkKTtcblxuICAgICAgY29uc3QgeyBkYXRhOiBleHBlcmllbmNlIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbShcIndvcmtfZXhwZXJpZW5jZVwiKVxuICAgICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgICAuZXEoXCJwcm9maWxlX2lkXCIsIHByb2ZpbGUuaWQpXG4gICAgICAgIC5vcmRlcihcImlzX2N1cnJlbnRcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAgIC5vcmRlcihcImVuZF9kYXRlXCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KTtcblxuICAgICAgcHJvZmlsZXNXaXRoRGV0YWlscy5wdXNoKHtcbiAgICAgICAgLi4ucHJvZmlsZSxcbiAgICAgICAgZWR1Y2F0aW9uOiBlZHVjYXRpb24gfHwgW10sXG4gICAgICAgIGV4cGVyaWVuY2U6IGV4cGVyaWVuY2UgfHwgW10sXG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcHJvZmlsZXM6IHByb2ZpbGVzV2l0aERldGFpbHMsXG4gICAgICB0b3RhbDogY291bnQgfHwgMCxcbiAgICAgIHRvdGFsUGFnZXM6IE1hdGguY2VpbCgoY291bnQgfHwgMCkgLyBsaW1pdCksXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgcHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBHZXQgYSBzaW5nbGUgcHJvZmlsZSBieSBJRCB3aXRoIGVkdWNhdGlvbiBhbmQgd29yayBleHBlcmllbmNlXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZUJ5SWQoXG4gIGlkOiBudW1iZXJcbik6IFByb21pc2U8UHJvZmlsZVdpdGhEZXRhaWxzIHwgbnVsbD4ge1xuICB0cnkge1xuICAgIGNvbnN0IHsgZGF0YTogcHJvZmlsZSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwiaWRcIiwgaWQpXG4gICAgICAuc2luZ2xlKCk7XG5cbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgIGlmICghcHJvZmlsZSkgcmV0dXJuIG51bGw7XG5cbiAgICBjb25zdCB7IGRhdGE6IGVkdWNhdGlvbiB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5mcm9tKFwiZWR1Y2F0aW9uXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiKVxuICAgICAgLmVxKFwicHJvZmlsZV9pZFwiLCBpZCk7XG5cbiAgICBjb25zdCB7IGRhdGE6IGV4cGVyaWVuY2UgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcIndvcmtfZXhwZXJpZW5jZVwiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5lcShcInByb2ZpbGVfaWRcIiwgaWQpXG4gICAgICAub3JkZXIoXCJpc19jdXJyZW50XCIsIHsgYXNjZW5kaW5nOiBmYWxzZSB9KVxuICAgICAgLm9yZGVyKFwiZW5kX2RhdGVcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnByb2ZpbGUsXG4gICAgICBlZHVjYXRpb246IGVkdWNhdGlvbiB8fCBbXSxcbiAgICAgIGV4cGVyaWVuY2U6IGV4cGVyaWVuY2UgfHwgW10sXG4gICAgfTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKGBFcnJvciBmZXRjaGluZyBwcm9maWxlIHdpdGggSUQgJHtpZH06YCwgZXJyb3IpO1xuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8vIEdldCB0d28gcmFuZG9tIHByb2ZpbGVzIGZvciB2b3RpbmdcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRSYW5kb21Qcm9maWxlcyhcbiAgZXhjbHVkZUlkczogbnVtYmVyW10gPSBbXVxuKTogUHJvbWlzZTxbUHJvZmlsZSwgUHJvZmlsZV0+IHtcbiAgdHJ5IHtcbiAgICAvLyBCdWlsZCB0aGUgcXVlcnkgZm9yIHRoZSBmaXJzdCBwcm9maWxlXG4gICAgbGV0IGZpcnN0UHJvZmlsZVF1ZXJ5ID0gc3VwYWJhc2UuZnJvbShcInByb2ZpbGVzXCIpLnNlbGVjdChcIipcIik7XG5cbiAgICAvLyBPbmx5IGFkZCB0aGUgZXhjbHVkZSBjb25kaXRpb24gaWYgd2UgaGF2ZSBJRHMgdG8gZXhjbHVkZVxuICAgIGlmIChleGNsdWRlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIGZpcnN0UHJvZmlsZVF1ZXJ5ID0gZmlyc3RQcm9maWxlUXVlcnkubm90KFxuICAgICAgICBcImlkXCIsXG4gICAgICAgIFwiaW5cIixcbiAgICAgICAgYCgke2V4Y2x1ZGVJZHMuam9pbihcIixcIil9KWBcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gR2V0IGZpcnN0IHJhbmRvbSBwcm9maWxlXG4gICAgY29uc3QgeyBkYXRhOiBmaXJzdFByb2ZpbGVBcnJheSwgZXJyb3I6IGZpcnN0RXJyb3IgfSA9XG4gICAgICBhd2FpdCBmaXJzdFByb2ZpbGVRdWVyeS5vcmRlcihcInJhbmRvbSgpXCIpLmxpbWl0KDEpO1xuXG4gICAgaWYgKGZpcnN0RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyBmaXJzdCBwcm9maWxlOlwiLCBmaXJzdEVycm9yKTtcbiAgICAgIHRocm93IGZpcnN0RXJyb3I7XG4gICAgfVxuXG4gICAgbGV0IGZpcnN0UHJvZmlsZSA9IGZpcnN0UHJvZmlsZUFycmF5Py5bMF07XG4gICAgaWYgKCFmaXJzdFByb2ZpbGUpIHtcbiAgICAgIC8vIFRyeSB3aXRob3V0IHRoZSBleGNsdXNpb25zIGlmIHdlIGNvdWxkbid0IGZpbmQgYW55IHByb2ZpbGVzXG4gICAgICBpZiAoZXhjbHVkZUlkcy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKFwiVHJ5aW5nIHRvIGZldGNoIGEgcHJvZmlsZSB3aXRob3V0IGV4Y2x1c2lvbnMuLi5cIik7XG4gICAgICAgIGNvbnN0IHsgZGF0YTogZmFsbGJhY2tQcm9maWxlcyB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgICAgICAub3JkZXIoXCJyYW5kb20oKVwiKVxuICAgICAgICAgIC5saW1pdCgxKTtcblxuICAgICAgICBmaXJzdFByb2ZpbGUgPSBmYWxsYmFja1Byb2ZpbGVzPy5bMF07XG4gICAgICAgIGlmICghZmlyc3RQcm9maWxlKSB7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFwiTm8gcHJvZmlsZXMgZm91bmQgaW4gdGhlIGRhdGFiYXNlXCIpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJObyBwcm9maWxlcyBmb3VuZCBpbiB0aGUgZGF0YWJhc2VcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQnVpbGQgdGhlIHF1ZXJ5IGZvciB0aGUgc2Vjb25kIHByb2ZpbGVcbiAgICBsZXQgc2Vjb25kUHJvZmlsZVF1ZXJ5ID0gc3VwYWJhc2UuZnJvbShcInByb2ZpbGVzXCIpLnNlbGVjdChcIipcIik7XG5cbiAgICAvLyBBbHdheXMgZXhjbHVkZSB0aGUgZmlyc3QgcHJvZmlsZVxuICAgIHNlY29uZFByb2ZpbGVRdWVyeSA9IHNlY29uZFByb2ZpbGVRdWVyeS5uZXEoXCJpZFwiLCBmaXJzdFByb2ZpbGUuaWQpO1xuXG4gICAgLy8gQWRkIG90aGVyIGV4Y2x1ZGVzIGlmIG5lZWRlZFxuICAgIGlmIChleGNsdWRlSWRzLmxlbmd0aCA+IDApIHtcbiAgICAgIHNlY29uZFByb2ZpbGVRdWVyeSA9IHNlY29uZFByb2ZpbGVRdWVyeS5ub3QoXG4gICAgICAgIFwiaWRcIixcbiAgICAgICAgXCJpblwiLFxuICAgICAgICBgKCR7ZXhjbHVkZUlkcy5qb2luKFwiLFwiKX0pYFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBHZXQgc2Vjb25kIHJhbmRvbSBwcm9maWxlXG4gICAgY29uc3QgeyBkYXRhOiBzZWNvbmRQcm9maWxlQXJyYXksIGVycm9yOiBzZWNvbmRFcnJvciB9ID1cbiAgICAgIGF3YWl0IHNlY29uZFByb2ZpbGVRdWVyeS5vcmRlcihcInJhbmRvbSgpXCIpLmxpbWl0KDEpO1xuXG4gICAgaWYgKHNlY29uZEVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgc2Vjb25kIHByb2ZpbGU6XCIsIHNlY29uZEVycm9yKTtcbiAgICAgIHRocm93IHNlY29uZEVycm9yO1xuICAgIH1cblxuICAgIGxldCBzZWNvbmRQcm9maWxlID0gc2Vjb25kUHJvZmlsZUFycmF5Py5bMF07XG4gICAgaWYgKCFzZWNvbmRQcm9maWxlKSB7XG4gICAgICAvLyBJZiB3ZSBjYW4ndCBmaW5kIGEgc2Vjb25kIHByb2ZpbGUsIGp1c3QgZ2V0IGFueSBwcm9maWxlIHRoYXQncyBub3QgdGhlIGZpcnN0IG9uZVxuICAgICAgY29uc29sZS5sb2coXCJUcnlpbmcgdG8gZmV0Y2ggYSBzZWNvbmQgcHJvZmlsZSB3aXRob3V0IGV4Y2x1c2lvbnMuLi5cIik7XG4gICAgICBjb25zdCB7IGRhdGE6IGZhbGxiYWNrUHJvZmlsZXMgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgIC5mcm9tKFwicHJvZmlsZXNcIilcbiAgICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgICAgLm5lcShcImlkXCIsIGZpcnN0UHJvZmlsZS5pZClcbiAgICAgICAgLm9yZGVyKFwicmFuZG9tKClcIilcbiAgICAgICAgLmxpbWl0KDEpO1xuXG4gICAgICBzZWNvbmRQcm9maWxlID0gZmFsbGJhY2tQcm9maWxlcz8uWzBdO1xuICAgICAgaWYgKCFzZWNvbmRQcm9maWxlKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICBcIkNvdWxkIG5vdCBmaW5kIGEgc2Vjb25kIHByb2ZpbGUuIERvIHlvdSBoYXZlIGF0IGxlYXN0IDIgcHJvZmlsZXMgaW4gdGhlIGRhdGFiYXNlP1wiXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIFtmaXJzdFByb2ZpbGUsIHNlY29uZFByb2ZpbGVdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByYW5kb20gcHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICB0aHJvdyBlcnJvcjtcbiAgfVxufVxuXG4vLyBSZWNvcmQgYSB2b3RlIGluIHRoZSBkYXRhYmFzZVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlY29yZFZvdGUoXG4gIGxlZnRQcm9maWxlSWQ6IG51bWJlcixcbiAgcmlnaHRQcm9maWxlSWQ6IG51bWJlcixcbiAgd2lubmVySWQ6IG51bWJlciB8IG51bGwsXG4gIHNlc3Npb25JZDogc3RyaW5nXG4pOiBQcm9taXNlPHZvaWQ+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB2b3RlRGF0YSA9IHtcbiAgICAgIHdpbm5lcl9pZDogd2lubmVySWQsXG4gICAgICBsZWZ0X3Byb2ZpbGVfaWQ6IGxlZnRQcm9maWxlSWQsXG4gICAgICByaWdodF9wcm9maWxlX2lkOiByaWdodFByb2ZpbGVJZCxcbiAgICAgIHZvdGVyX3Nlc3Npb25faWQ6IHNlc3Npb25JZCxcbiAgICB9O1xuXG4gICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuZnJvbShcInZvdGVzXCIpLmluc2VydChbdm90ZURhdGFdKTtcblxuICAgIGlmIChlcnJvcikgdGhyb3cgZXJyb3I7XG5cbiAgICAvLyBObyBuZWVkIHRvIG1hbnVhbGx5IHVwZGF0ZSBFTE8gcmF0aW5nc1xuICAgIC8vIFRoZSBkYXRhYmFzZSB0cmlnZ2VyIHdpbGwgaGFuZGxlIHRoYXQgYXV0b21hdGljYWxseVxuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciByZWNvcmRpbmcgdm90ZTpcIiwgZXJyb3IpO1xuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8vIEdldCByZWNlbnQgdm90ZXMgZm9yIGEgdXNlciBzZXNzaW9uXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UmVjZW50Vm90ZXMoXG4gIHNlc3Npb25JZDogc3RyaW5nLFxuICBsaW1pdDogbnVtYmVyID0gNVxuKTogUHJvbWlzZTxWb3RlW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJ2b3Rlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5lcShcInZvdGVyX3Nlc3Npb25faWRcIiwgc2Vzc2lvbklkKVxuICAgICAgLm9yZGVyKFwiY3JlYXRlZF9hdFwiLCB7IGFzY2VuZGluZzogZmFsc2UgfSlcbiAgICAgIC5saW1pdChsaW1pdCk7XG5cbiAgICBpZiAoZXJyb3IpIHRocm93IGVycm9yO1xuICAgIHJldHVybiBkYXRhIHx8IFtdO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBmZXRjaGluZyByZWNlbnQgdm90ZXM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gW107XG4gIH1cbn1cblxuLy8gR2V0IHRvcCBwcm9maWxlcyBieSBFTE8gcmF0aW5nXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0VG9wUHJvZmlsZXMobGltaXQ6IG51bWJlciA9IDEwKTogUHJvbWlzZTxQcm9maWxlW10+IHtcbiAgdHJ5IHtcbiAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oXCJwcm9maWxlc1wiKVxuICAgICAgLnNlbGVjdChcIipcIilcbiAgICAgIC5vcmRlcihcImVsb19yYXRpbmdcIiwgeyBhc2NlbmRpbmc6IGZhbHNlIH0pXG4gICAgICAubGltaXQobGltaXQpO1xuXG4gICAgaWYgKGVycm9yKSB0aHJvdyBlcnJvcjtcbiAgICByZXR1cm4gZGF0YSB8fCBbXTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKFwiRXJyb3IgZmV0Y2hpbmcgdG9wIHByb2ZpbGVzOlwiLCBlcnJvcik7XG4gICAgcmV0dXJuIFtdO1xuICB9XG59XG5cbi8vIERpYWdub3N0aWMgZnVuY3Rpb24gdG8gY291bnQgcHJvZmlsZXNcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3VudFByb2ZpbGVzKCk6IFByb21pc2U8bnVtYmVyPiB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBjb3VudCwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAuZnJvbShcInByb2ZpbGVzXCIpXG4gICAgICAuc2VsZWN0KFwiKlwiLCB7IGNvdW50OiBcImV4YWN0XCIsIGhlYWQ6IHRydWUgfSk7XG5cbiAgICBpZiAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBjb3VudGluZyBwcm9maWxlczpcIiwgZXJyb3IpO1xuICAgICAgdGhyb3cgZXJyb3I7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNvdW50IHx8IDA7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcihcIkVycm9yIGluIGNvdW50UHJvZmlsZXM6XCIsIGVycm9yKTtcbiAgICByZXR1cm4gMDtcbiAgfVxufVxuIl0sIm5hbWVzIjpbInN1cGFiYXNlIiwicmVxdWlyZSIsImdldFByb2ZpbGVzIiwicGFnZSIsImxpbWl0IiwicXVlcnkiLCJmaWx0ZXIiLCJzb3J0Iiwib2Zmc2V0IiwicHJvZmlsZVF1ZXJ5IiwiZnJvbSIsInNlbGVjdCIsImNvdW50Iiwib3IiLCJlcSIsImlsaWtlIiwib3JkZXIiLCJhc2NlbmRpbmciLCJyYW5nZSIsImRhdGEiLCJwcm9maWxlcyIsImVycm9yIiwicHJvZmlsZXNXaXRoRGV0YWlscyIsInByb2ZpbGUiLCJlZHVjYXRpb24iLCJpZCIsImV4cGVyaWVuY2UiLCJwdXNoIiwidG90YWwiLCJ0b3RhbFBhZ2VzIiwiTWF0aCIsImNlaWwiLCJjb25zb2xlIiwiZ2V0UHJvZmlsZUJ5SWQiLCJzaW5nbGUiLCJnZXRSYW5kb21Qcm9maWxlcyIsImV4Y2x1ZGVJZHMiLCJmaXJzdFByb2ZpbGVRdWVyeSIsImxlbmd0aCIsIm5vdCIsImpvaW4iLCJmaXJzdFByb2ZpbGVBcnJheSIsImZpcnN0RXJyb3IiLCJmaXJzdFByb2ZpbGUiLCJsb2ciLCJmYWxsYmFja1Byb2ZpbGVzIiwiRXJyb3IiLCJzZWNvbmRQcm9maWxlUXVlcnkiLCJuZXEiLCJzZWNvbmRQcm9maWxlQXJyYXkiLCJzZWNvbmRFcnJvciIsInNlY29uZFByb2ZpbGUiLCJyZWNvcmRWb3RlIiwibGVmdFByb2ZpbGVJZCIsInJpZ2h0UHJvZmlsZUlkIiwid2lubmVySWQiLCJzZXNzaW9uSWQiLCJ2b3RlRGF0YSIsIndpbm5lcl9pZCIsImxlZnRfcHJvZmlsZV9pZCIsInJpZ2h0X3Byb2ZpbGVfaWQiLCJ2b3Rlcl9zZXNzaW9uX2lkIiwiaW5zZXJ0IiwiZ2V0UmVjZW50Vm90ZXMiLCJnZXRUb3BQcm9maWxlcyIsImNvdW50UHJvZmlsZXMiLCJoZWFkIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/profiles.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

eval("\nconst { createClient } = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n(__webpack_require__(/*! dotenv */ \"(rsc)/./node_modules/dotenv/lib/main.js\").config)({\n    path: \".env.local\"\n});\n// Get environment variables with fallbacks for development\nconst supabaseUrl = \"https://qbzwhueywwpqkucwfnsb.supabase.co\" || 0;\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InFiendodWV5d3dwcWt1Y3dmbnNiIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDM4MDk4MzEsImV4cCI6MjA1OTM4NTgzMX0.YiZec-9dg4z32pqCuSGGB3uyqrEZs5zm-b_unS_2czs\" || 0;\n// Create Supabase client\nconst supabase = createClient(supabaseUrl, supabaseAnonKey, {\n    auth: {\n        persistSession: false\n    }\n});\n// Log initialization for debugging\nconsole.log(`Supabase JS client initialized with URL: ${supabaseUrl.substring(0, 20)}...`);\n// Export the client\nmodule.exports = {\n    supabase\n};\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6IjtBQUFBLE1BQU0sRUFBRUEsWUFBWSxFQUFFLEdBQUdDLG1CQUFPQSxDQUFDLDhGQUF1QjtBQUN4REEscUZBQXdCLENBQUM7SUFBRUUsTUFBTTtBQUFhO0FBRTlDLDJEQUEyRDtBQUMzRCxNQUFNQyxjQUNKQywwQ0FBb0MsSUFDcEMsQ0FBdUM7QUFDekMsTUFBTUcsa0JBQ0pILGtOQUF5QyxJQUFJLENBQWU7QUFFOUQseUJBQXlCO0FBQ3pCLE1BQU1LLFdBQVdWLGFBQWFJLGFBQWFJLGlCQUFpQjtJQUMxREcsTUFBTTtRQUNKQyxnQkFBZ0I7SUFDbEI7QUFDRjtBQUVBLG1DQUFtQztBQUNuQ0MsUUFBUUMsR0FBRyxDQUNULENBQUMseUNBQXlDLEVBQUVWLFlBQVlXLFNBQVMsQ0FBQyxHQUFHLElBQUksR0FBRyxDQUFDO0FBRy9FLG9CQUFvQjtBQUNwQkMsT0FBT0MsT0FBTyxHQUFHO0lBQUVQO0FBQVMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ndHJhbmtlZC8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IHsgY3JlYXRlQ2xpZW50IH0gPSByZXF1aXJlKFwiQHN1cGFiYXNlL3N1cGFiYXNlLWpzXCIpO1xucmVxdWlyZShcImRvdGVudlwiKS5jb25maWcoeyBwYXRoOiBcIi5lbnYubG9jYWxcIiB9KTtcblxuLy8gR2V0IGVudmlyb25tZW50IHZhcmlhYmxlcyB3aXRoIGZhbGxiYWNrcyBmb3IgZGV2ZWxvcG1lbnRcbmNvbnN0IHN1cGFiYXNlVXJsID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMIHx8XG4gIFwiaHR0cHM6Ly95b3VyLXN1cGFiYXNlLXVybC5zdXBhYmFzZS5jb1wiO1xuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID1cbiAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfQU5PTl9LRVkgfHwgXCJ5b3VyLWFub24ta2V5XCI7XG5cbi8vIENyZWF0ZSBTdXBhYmFzZSBjbGllbnRcbmNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KHN1cGFiYXNlVXJsLCBzdXBhYmFzZUFub25LZXksIHtcbiAgYXV0aDoge1xuICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSxcbiAgfSxcbn0pO1xuXG4vLyBMb2cgaW5pdGlhbGl6YXRpb24gZm9yIGRlYnVnZ2luZ1xuY29uc29sZS5sb2coXG4gIGBTdXBhYmFzZSBKUyBjbGllbnQgaW5pdGlhbGl6ZWQgd2l0aCBVUkw6ICR7c3VwYWJhc2VVcmwuc3Vic3RyaW5nKDAsIDIwKX0uLi5gXG4pO1xuXG4vLyBFeHBvcnQgdGhlIGNsaWVudFxubW9kdWxlLmV4cG9ydHMgPSB7IHN1cGFiYXNlIH07XG4iXSwibmFtZXMiOlsiY3JlYXRlQ2xpZW50IiwicmVxdWlyZSIsImNvbmZpZyIsInBhdGgiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSIsInN1cGFiYXNlIiwiYXV0aCIsInBlcnNpc3RTZXNzaW9uIiwiY29uc29sZSIsImxvZyIsInN1YnN0cmluZyIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next","vendor-chunks/@supabase","vendor-chunks/tr46","vendor-chunks/whatwg-url","vendor-chunks/dotenv","vendor-chunks/webidl-conversions"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fvotes%2Froute&page=%2Fapi%2Fvotes%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fvotes%2Froute.ts&appDir=%2FUsers%2Fvik%2FGTRanked%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fvik%2FGTRanked&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();